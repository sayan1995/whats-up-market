$slideshow={context:false,tabs:false,timeout:5500,slideSpeed:1500,tabSpeed:300,fx:"scrollLeft",init:function(){this.context=$("#uiv2-slideshow");this.tabs=$("ul.uiv2-slides-nav li",this.context);this.tabs.remove();this.prepareSlideshow()},prepareSlideshow:function(){$("div.uiv2-slides > ul",$slideshow.context).cycle({fx:$slideshow.fx,timeout:$slideshow.timeout,speed:$slideshow.slideSpeed,fastOnEvent:$slideshow.tabSpeed,pager:$("ul.uiv2-slides-nav",$slideshow.context),pagerAnchorBuilder:$slideshow.prepareTabs,before:$slideshow.activateTab,pauseOnPagerHover:true,pause:true})},prepareTabs:function(b,a){return $slideshow.tabs.eq(b)},activateTab:function(c,b){var a=$('a[href="#'+b.id+'"]',$slideshow.context);if(a.length){$slideshow.tabs.removeClass("on");a.parent().addClass("on")}}};var docCookies={getItem:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(d,g,c,b,a,e){if(!d||/^(?:expires|max\-age|path|domain|secure)$/i.test(d)){return false}var f="";if(c){switch(c.constructor){case Number:f=c===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:f="; expires="+c;break;case Date:f="; expires="+c.toUTCString();break}}document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(g)+f+(a?"; domain="+a:"")+(b?"; path="+b:"")+(e?"; secure":"");return true},removeItem:function(c,b,a){if(!c||!this.hasItem(c)){return false}document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(b?"; path="+b:"");return true},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var b=0;b<a.length;b++){a[b]=decodeURIComponent(a[b])}return a}};$(function(){$slideshow.init()});
/*! http://mths.be/placeholder v2.0.7 by @mathias */
(function(h,k,e){var a="placeholder" in k.createElement("input");var f="placeholder" in k.createElement("textarea");var l=e.fn;var d=e.valHooks;var b=e.propHooks;var n;var m;if(a&&f){m=l.placeholder=function(){return this};m.input=m.textarea=true}else{m=l.placeholder=function(){var p=this;p.filter((a?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":c,"blur.placeholder":g}).data("placeholder-enabled",true).trigger("blur.placeholder");return p};m.input=a;m.textarea=f;n={get:function(q){var p=e(q);var r=p.data("placeholder-password");if(r){return r[0].value}return p.data("placeholder-enabled")&&p.hasClass("placeholder")?"":q.value},set:function(q,s){var p=e(q);var r=p.data("placeholder-password");if(r){return r[0].value=s}if(!p.data("placeholder-enabled")){return q.value=s}if(s==""){q.value=s;if(q!=o()){g.call(q)}}else{if(p.hasClass("placeholder")){c.call(q,true,s)||(q.value=s)}else{q.value=s}}return p}};if(!a){d.input=n;b.value=n}if(!f){d.textarea=n;b.value=n}e(function(){e(k).delegate("form","submit.placeholder",function(){var p=e(".placeholder",this).each(c);setTimeout(function(){p.each(g)},10)})});e(h).bind("beforeunload.placeholder",function(){e(".placeholder").each(function(){this.value=""})})}function j(q){var p={};var r=/^jQuery\d+$/;e.each(q.attributes,function(t,s){if(s.specified&&!r.test(s.name)){p[s.name]=s.value}});return p}function c(q,r){var p=this;var s=e(p);if(p.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(q===true){return s[0].value=r}s.focus()}else{p.value="";s.removeClass("placeholder");p==o()&&p.select()}}}function g(){var t;var p=this;var s=e(p);var r=this.id;if(p.value==""){if(p.type=="password"){if(!s.data("placeholder-textinput")){try{t=s.clone().attr({type:"text"})}catch(q){t=e("<input>").attr(e.extend(j(this),{type:"text"}))}t.removeAttr("name").data({"placeholder-password":s,"placeholder-id":r}).bind("focus.placeholder",c);s.data({"placeholder-textinput":t,"placeholder-id":r}).before(t)}s=s.removeAttr("id").hide().prev().attr("id",r).show()}s.addClass("placeholder");s[0].value=s.attr("placeholder")}else{s.removeClass("placeholder")}}function o(){try{return k.activeElement}catch(p){}}}(this,document,jQuery));try{(function(d){d.tiny=d.tiny||{};d.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,lockscroll:true,size:"auto",sizethumb:"auto",invertscroll:false}};d.fn.tinyscrollbar=function(a){var b=d.extend({},d.tiny.scrollbar.options,a);this.each(function(){d(this).data("tsb",new c(d(this),b))});return this};d.fn.tinyscrollbar_update=function(a){return d(this).data("tsb").update(a)};function c(F,P){var L=this,C=F,M={obj:d(".viewport",F)},O={obj:d(".overview",F)},S={obj:d(".scrollbar",F)},J={obj:d(".track",S.obj)},G={obj:d(".thumb",S.obj)},K=P.axis==="x",I=K?"left":"top",A=K?"Width":"Height",E=0,a={start:0,now:0},H={},R="ontouchstart" in document.documentElement;function T(){L.update();D();return L}this.update=function(e){M[P.axis]=M.obj[0]["offset"+A];O[P.axis]=O.obj[0]["scroll"+A];O.ratio=M[P.axis]/O[P.axis];S.obj.toggleClass("disable",O.ratio>=1);J[P.axis]=P.size==="auto"?M[P.axis]:P.size;G[P.axis]=Math.min(J[P.axis],Math.max(0,(P.sizethumb==="auto"?(J[P.axis]*O.ratio):P.sizethumb)));S.ratio=P.sizethumb==="auto"?(O[P.axis]/J[P.axis]):(O[P.axis]-M[P.axis])/(J[P.axis]-G[P.axis]);E=(e==="relative"&&O.ratio<=1)?Math.min((O[P.axis]-M[P.axis]),Math.max(0,E)):0;E=(e==="bottom"&&O.ratio<=1)?(O[P.axis]-M[P.axis]):isNaN(parseInt(e,10))?E:parseInt(e,10);z()};function z(){var e=A.toLowerCase();G.obj.css(I,E/S.ratio);O.obj.css(I,-E);H.start=G.obj.offset()[I];S.obj.css(e,J[P.axis]);J.obj.css(e,J[P.axis]);G.obj.css(e,G[P.axis])}function D(){if(!R){G.obj.bind("mousedown",N);J.obj.bind("mouseup",B)}else{M.obj[0].ontouchstart=function(e){if(1===e.touches.length){N(e.touches[0]);e.stopPropagation()}}}if(P.scroll&&window.addEventListener){C[0].addEventListener("DOMMouseScroll",b,false);C[0].addEventListener("mousewheel",b,false)}else{if(P.scroll){C[0].onmousewheel=b}}}function N(e){d("body").addClass("noSelect");var f=parseInt(G.obj.css(I),10);H.start=K?e.pageX:e.pageY;a.start=f=="auto"?0:f;if(!R){d(document).bind("mousemove",B);d(document).bind("mouseup",Q);G.obj.bind("mouseup",Q)}else{document.ontouchmove=function(g){g.preventDefault();B(g.touches[0])};document.ontouchend=Q}}function b(g){if(O.ratio<1){var e=g||window.event,f=e.wheelDelta?e.wheelDelta/120:-e.detail/3;E-=f*P.wheel;E=Math.min((O[P.axis]-M[P.axis]),Math.max(0,E));G.obj.css(I,E/S.ratio);O.obj.css(I,-E);if(P.lockscroll||(E!==(O[P.axis]-M[P.axis])&&E!==0)){e=d.event.fix(e);e.preventDefault()}}}function B(e){if(O.ratio<1){if(P.invertscroll&&R){a.now=Math.min((J[P.axis]-G[P.axis]),Math.max(0,(a.start+(H.start-(K?e.pageX:e.pageY)))))}else{a.now=Math.min((J[P.axis]-G[P.axis]),Math.max(0,(a.start+((K?e.pageX:e.pageY)-H.start))))}E=a.now*S.ratio;O.obj.css(I,-E);G.obj.css(I,a.now)}}function Q(){d("body").removeClass("noSelect");d(document).unbind("mousemove",B);d(document).unbind("mouseup",Q);G.obj.unbind("mouseup",Q);document.ontouchmove=document.ontouchend=null}return T()}}(jQuery))}catch(err){console.log(err)}
/*!

 handlebars v1.1.2

Copyright (C) 2011 by Yehuda Katz

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

@license
*/
var Handlebars=(function(){var a=(function(){var n;function o(p){this.string=p}o.prototype.toString=function(){return""+this.string};n=o;return n})();var l=(function(w){var x={};var q=w;var y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var n=/[&<>"'`]/g;var r=/[&<>"'`]/;function z(A){return y[A]||"&amp;"}function v(C,B){for(var A in B){if(B.hasOwnProperty(A)){C[A]=B[A]}}}x.extend=v;var p=Object.prototype.toString;x.toString=p;var o=function(A){return typeof A==="function"};if(o(/x/)){o=function(A){return typeof A==="function"&&p.call(A)==="[object Function]"}}var o;x.isFunction=o;var u=Array.isArray||function(A){return(A&&typeof A==="object")?p.call(A)==="[object Array]":false};x.isArray=u;function t(A){if(A instanceof q){return A.toString()}else{if(!A&&A!==0){return""}}A=""+A;if(!r.test(A)){return A}return A.replace(n,z)}x.escapeExpression=t;function s(A){if(!A&&A!==0){return true}else{if(u(A)&&A.length===0){return true}else{return false}}}x.isEmpty=s;return x})(a);var d=(function(){var o;var p=["description","fileName","lineNumber","message","name","number","stack"];function n(){var r=Error.prototype.constructor.apply(this,arguments);for(var q=0;q<p.length;q++){this[p[q]]=r[p[q]]}}n.prototype=new Error();o=n;return o})();var j=(function(y,B){var A={};var w=y;var u=B;var D="1.1.2";A.VERSION=D;var o=4;A.COMPILER_REVISION=o;var r={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};A.REVISION_CHANGES=r;var v=w.isArray,q=w.isFunction,p=w.toString,n="[object Object]";function t(F,E){this.helpers=F||{};this.partials=E||{};x(this)}A.HandlebarsEnvironment=t;t.prototype={constructor:t,logger:z,log:s,registerHelper:function(F,G,E){if(p.call(F)===n){if(E||G){throw new u("Arg not supported with multiple helpers")}w.extend(this.helpers,F)}else{if(E){G.not=E}this.helpers[F]=G}},registerPartial:function(E,F){if(p.call(E)===n){w.extend(this.partials,E)}else{this.partials[E]=F}}};function x(E){E.registerHelper("helperMissing",function(F){if(arguments.length===2){return undefined}else{throw new Error("Missing helper: '"+F+"'")}});E.registerHelper("blockHelperMissing",function(H,G){var F=G.inverse||function(){},I=G.fn;if(q(H)){H=H.call(this)}if(H===true){return I(this)}else{if(H===false||H==null){return F(this)}else{if(v(H)){if(H.length>0){return E.helpers.each(H,G)}else{return F(this)}}else{return I(H)}}}});E.registerHelper("each",function(F,N){var L=N.fn,H=N.inverse;var J=0,K="",I;if(q(F)){F=F.call(this)}if(N.data){I=C(N.data)}if(F&&typeof F==="object"){if(v(F)){for(var G=F.length;J<G;J++){if(I){I.index=J;I.first=(J===0);I.last=(J===(F.length-1))}K=K+L(F[J],{data:I})}}else{for(var M in F){if(F.hasOwnProperty(M)){if(I){I.key=M}K=K+L(F[M],{data:I});J++}}}}if(J===0){K=H(this)}return K});E.registerHelper("if",function(G,F){if(q(G)){G=G.call(this)}if((!F.hash.includeZero&&!G)||w.isEmpty(G)){return F.inverse(this)}else{return F.fn(this)}});E.registerHelper("unless",function(G,F){return E.helpers["if"].call(this,G,{fn:F.inverse,inverse:F.fn,hash:F.hash})});E.registerHelper("with",function(G,F){if(q(G)){G=G.call(this)}if(!w.isEmpty(G)){return F.fn(G)}});E.registerHelper("log",function(G,F){var H=F.data&&F.data.level!=null?parseInt(F.data.level,10):1;E.log(H,G)})}var z={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(G,E){if(z.level<=G){var F=z.methodMap[G];if(typeof console!=="undefined"&&console[F]){console[F].call(console,E)}}}};A.logger=z;function s(F,E){z.log(F,E)}A.log=s;var C=function(E){var F={};w.extend(F,E);return F};A.createFrame=C;return A})(l,d);var g=(function(w,A,q){var y={};var v=w;var t=A;var p=q.COMPILER_REVISION;var s=q.REVISION_CHANGES;function o(D){var C=D&&D[0]||1,F=p;if(C!==F){if(C<F){var B=s[F],E=s[C];throw new Error("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+B+") or downgrade your runtime to an older version ("+E+").")}else{throw new Error("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+D[1]+").")}}}function x(B,E){if(!E){throw new Error("No environment passed to template")}var D;if(E.compile){D=function(G,I,K,L,J,M){var F=n.apply(this,arguments);if(F){return F}var H={helpers:L,partials:J,data:M};J[I]=E.compile(G,{data:M!==undefined},E);return J[I](K,H)}}else{D=function(G,H){var F=n.apply(this,arguments);if(F){return F}throw new t("The partial "+H+" could not be compiled when running in runtime-only mode")}}var C={escapeExpression:v.escapeExpression,invokePartial:D,programs:[],program:function(G,H,I){var F=this.programs[G];if(I){F=u(G,H,I)}else{if(!F){F=this.programs[G]=u(G,H)}}return F},merge:function(H,G){var F=H||G;if(H&&G&&(H!==G)){F={};v.extend(F,G);v.extend(F,H)}return F},programWithDepth:r,noop:z,compilerInfo:null};return function(I,G){G=G||{};var J=G.partial?G:E,K,H;if(!G.partial){K=G.helpers;H=G.partials}var F=B.call(C,J,I,K,H,G.data);if(!G.partial){o(C.compilerInfo)}return F}}y.template=x;function r(C,D,E){var B=Array.prototype.slice.call(arguments,3);var F=function(H,G){G=G||{};return D.apply(this,[H,G.data||E].concat(B))};F.program=C;F.depth=B.length;return F}y.programWithDepth=r;function u(B,C,D){var E=function(G,F){F=F||{};return C(G,F.data||D)};E.program=B;E.depth=0;return E}y.program=u;function n(B,D,F,G,E,H){var C={partial:true,helpers:G,partials:E,data:H};if(B===undefined){throw new t("The partial "+D+" could not be found")}else{if(B instanceof Function){return B(F,C)}}}y.invokePartial=n;function z(){return""}y.noop=z;return y})(l,d,j);var f=(function(x,z,p,t,w){var y;var n=x;var q=z;var s=p;var v=t;var r=w;var u=function(){var A=new n.HandlebarsEnvironment();v.extend(A,n);A.SafeString=q;A.Exception=s;A.Utils=v;A.VM=r;A.template=function(B){return r.template(B,A)};return A};var o=u();o.create=u;y=o;return y})(j,a,d,l,g);var k=(function(y){var B={};var s=y;function p(E,F,D){this.type="program";this.statements=E;this.strip={};if(D){this.inverse=new p(D,F);this.strip.right=F.left}else{if(F){this.strip.left=F.right}}}B.ProgramNode=p;function C(K,H,D,F){this.type="mustache";this.hash=H;this.strip=F;var G=D[3]||D[2];this.escaped=G!=="{"&&G!=="&";var J=this.id=K[0];var I=this.params=K.slice(1);var E=this.eligibleHelper=J.isSimple;this.isHelper=E&&(I.length||H)}B.MustacheNode=C;function u(D,E,F){this.type="partial";this.partialName=D;this.context=E;this.strip=F}B.PartialNode=u;function o(F,E,D,G){if(F.id.original!==G.path.original){throw new s(F.id.original+" doesn't match "+G.path.original)}this.type="block";this.mustache=F;this.program=E;this.inverse=D;this.strip={left:F.strip.left,right:G.strip.right};(E||D).strip.left=F.strip.right;(D||E).strip.right=G.strip.left;if(D&&!E){this.isInverse=true}}B.BlockNode=o;function A(D){this.type="content";this.string=D}B.ContentNode=A;function x(D){this.type="hash";this.pairs=D}B.HashNode=x;function r(I){this.type="ID";var H="",F=[],J=0;for(var G=0,D=I.length;G<D;G++){var E=I[G].part;H+=(I[G].separator||"")+E;if(E===".."||E==="."||E==="this"){if(F.length>0){throw new s("Invalid path: "+H)}else{if(E===".."){J++}else{this.isScoped=true}}}else{F.push(E)}}this.original=H;this.parts=F;this.string=F.join(".");this.depth=J;this.isSimple=I.length===1&&!this.isScoped&&J===0;this.stringModeValue=this.string}B.IdNode=r;function v(D){this.type="PARTIAL_NAME";this.name=D.original}B.PartialNameNode=v;function n(D){this.type="DATA";this.id=D}B.DataNode=n;function q(D){this.type="STRING";this.original=this.string=this.stringModeValue=D}B.StringNode=q;function z(D){this.type="INTEGER";this.original=this.integer=D;this.stringModeValue=Number(D)}B.IntegerNode=z;function t(D){this.type="BOOLEAN";this.bool=D;this.stringModeValue=D==="true"}B.BooleanNode=t;function w(D){this.type="comment";this.comment=D}B.CommentNode=w;return B})(d);var b=(function(){var o;var n=(function(){var w={trace:function s(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,inMustache_repetition0:28,inMustache_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,hash:35,hash_repetition_plus0:36,hashSegment:37,ID:38,EQUALS:39,DATA:40,pathSegments:41,SEP:42,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",38:"ID",39:"EQUALS",40:"DATA",42:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[35,1],[37,3],[26,1],[26,1],[26,1],[30,2],[21,1],[41,3],[41,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[36,1],[36,2]],performAction:function r(x,A,B,E,D,z,C){var y=z.length-1;switch(D){case 1:return new E.ProgramNode(z[y-1]);break;case 2:return new E.ProgramNode([]);break;case 3:this.$=new E.ProgramNode([],z[y-1],z[y]);break;case 4:this.$=new E.ProgramNode(z[y-2],z[y-1],z[y]);break;case 5:this.$=new E.ProgramNode(z[y-1],z[y],[]);break;case 6:this.$=new E.ProgramNode(z[y]);break;case 7:this.$=new E.ProgramNode([]);break;case 8:this.$=new E.ProgramNode([]);break;case 9:this.$=[z[y]];break;case 10:z[y-1].push(z[y]);this.$=z[y-1];break;case 11:this.$=new E.BlockNode(z[y-2],z[y-1].inverse,z[y-1],z[y]);break;case 12:this.$=new E.BlockNode(z[y-2],z[y-1],z[y-1].inverse,z[y]);break;case 13:this.$=z[y];break;case 14:this.$=z[y];break;case 15:this.$=new E.ContentNode(z[y]);break;case 16:this.$=new E.CommentNode(z[y]);break;case 17:this.$=new E.MustacheNode(z[y-1][0],z[y-1][1],z[y-2],p(z[y-2],z[y]));break;case 18:this.$=new E.MustacheNode(z[y-1][0],z[y-1][1],z[y-2],p(z[y-2],z[y]));break;case 19:this.$={path:z[y-1],strip:p(z[y-2],z[y])};break;case 20:this.$=new E.MustacheNode(z[y-1][0],z[y-1][1],z[y-2],p(z[y-2],z[y]));break;case 21:this.$=new E.MustacheNode(z[y-1][0],z[y-1][1],z[y-2],p(z[y-2],z[y]));break;case 22:this.$=new E.PartialNode(z[y-2],z[y-1],p(z[y-3],z[y]));break;case 23:this.$=p(z[y-1],z[y]);break;case 24:this.$=[[z[y-2]].concat(z[y-1]),z[y]];break;case 25:this.$=[[z[y]],null];break;case 26:this.$=z[y];break;case 27:this.$=new E.StringNode(z[y]);break;case 28:this.$=new E.IntegerNode(z[y]);break;case 29:this.$=new E.BooleanNode(z[y]);break;case 30:this.$=z[y];break;case 31:this.$=new E.HashNode(z[y]);break;case 32:this.$=[z[y-2],z[y]];break;case 33:this.$=new E.PartialNameNode(z[y]);break;case 34:this.$=new E.PartialNameNode(new E.StringNode(z[y]));break;case 35:this.$=new E.PartialNameNode(new E.IntegerNode(z[y]));break;case 36:this.$=new E.DataNode(z[y]);break;case 37:this.$=new E.IdNode(z[y]);break;case 38:z[y-2].push({part:z[y],separator:z[y-1]});this.$=z[y-2];break;case 39:this.$=[{part:z[y]}];break;case 42:this.$=[];break;case 43:z[y-1].push(z[y]);break;case 46:this.$=[z[y]];break;case 47:z[y-1].push(z[y]);break}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:29,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:30,21:24,30:25,38:[1,28],40:[1,27],41:26},{17:31,21:24,30:25,38:[1,28],40:[1,27],41:26},{21:33,26:32,32:[1,34],33:[1,35],38:[1,28],41:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,38:[1,28],40:[1,27],41:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,42],24:[2,42],28:43,32:[2,42],33:[2,42],34:[2,42],38:[2,42],40:[2,42]},{18:[2,25],24:[2,25]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],38:[2,37],40:[2,37],42:[1,44]},{21:45,38:[1,28],41:26},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],40:[2,39],42:[2,39]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,40],21:50,27:49,38:[1,28],41:26},{18:[2,33],38:[2,33]},{18:[2,34],38:[2,34]},{18:[2,35],38:[2,35]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,38:[1,28],41:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,44],21:56,24:[2,44],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:55,36:61,37:62,38:[1,63],40:[1,27],41:26},{38:[1,64]},{18:[2,36],24:[2,36],32:[2,36],33:[2,36],34:[2,36],38:[2,36],40:[2,36]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,65]},{18:[2,41]},{18:[1,66]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24]},{18:[2,43],24:[2,43],32:[2,43],33:[2,43],34:[2,43],38:[2,43],40:[2,43]},{18:[2,45],24:[2,45]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],38:[2,26],40:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],38:[2,27],40:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],38:[2,28],40:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],38:[2,29],40:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],38:[2,30],40:[2,30]},{18:[2,31],24:[2,31],37:67,38:[1,68]},{18:[2,46],24:[2,46],38:[2,46]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],38:[2,39],39:[1,69],40:[2,39],42:[2,39]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],38:[2,38],40:[2,38],42:[2,38]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{18:[2,47],24:[2,47],38:[2,47]},{39:[1,69]},{21:56,30:60,31:70,32:[1,57],33:[1,58],34:[1,59],38:[1,28],40:[1,27],41:26},{18:[2,32],24:[2,32],38:[2,32]}],defaultActions:{3:[2,2],16:[2,1],50:[2,41]},parseError:function t(y,x){throw new Error(y)},parse:function v(G){var N=this,D=[0],W=[null],I=[],X=this.table,y="",H=0,U=0,A=0,F=2,K=1;this.lexer.setInput(G);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;this.yy.parser=this;if(typeof this.lexer.yylloc=="undefined"){this.lexer.yylloc={}}var z=this.lexer.yylloc;I.push(z);var B=this.lexer.options&&this.lexer.options.ranges;if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function M(Z){D.length=D.length-2*Z;W.length=W.length-Z;I.length=I.length-Z}function L(){var Z;Z=N.lexer.lex()||1;if(typeof Z!=="number"){Z=N.symbols_[Z]||Z}return Z}var T,P,C,S,Y,J,R={},O,V,x,E;while(true){C=D[D.length-1];if(this.defaultActions[C]){S=this.defaultActions[C]}else{if(T===null||typeof T=="undefined"){T=L()}S=X[C]&&X[C][T]}if(typeof S==="undefined"||!S.length||!S[0]){var Q="";if(!A){E=[];for(O in X[C]){if(this.terminals_[O]&&O>2){E.push("'"+this.terminals_[O]+"'")}}if(this.lexer.showPosition){Q="Parse error on line "+(H+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+E.join(", ")+", got '"+(this.terminals_[T]||T)+"'"}else{Q="Parse error on line "+(H+1)+": Unexpected "+(T==1?"end of input":"'"+(this.terminals_[T]||T)+"'")}this.parseError(Q,{text:this.lexer.match,token:this.terminals_[T]||T,line:this.lexer.yylineno,loc:z,expected:E})}}if(S[0] instanceof Array&&S.length>1){throw new Error("Parse Error: multiple actions possible at state: "+C+", token: "+T)}switch(S[0]){case 1:D.push(T);W.push(this.lexer.yytext);I.push(this.lexer.yylloc);D.push(S[1]);T=null;if(!P){U=this.lexer.yyleng;y=this.lexer.yytext;H=this.lexer.yylineno;z=this.lexer.yylloc;if(A>0){A--}}else{T=P;P=null}break;case 2:V=this.productions_[S[1]][1];R.$=W[W.length-V];R._$={first_line:I[I.length-(V||1)].first_line,last_line:I[I.length-1].last_line,first_column:I[I.length-(V||1)].first_column,last_column:I[I.length-1].last_column};if(B){R._$.range=[I[I.length-(V||1)].range[0],I[I.length-1].range[1]]}J=this.performAction.call(R,y,U,H,this.yy,S[1],W,I);if(typeof J!=="undefined"){return J}if(V){D=D.slice(0,-1*V*2);W=W.slice(0,-1*V);I=I.slice(0,-1*V)}D.push(this.productions_[S[1]][0]);W.push(R.$);I.push(R._$);x=X[D[D.length-2]][D[D.length-1]];D.push(x);break;case 3:return true}}return true}};function p(x,y){return{left:x[2]==="~",right:y[0]==="~"||y[1]==="~"}}var q=(function(){var A=({EOF:1,parseError:function C(F,E){if(this.yy.parser){this.yy.parser.parseError(F,E)}else{throw new Error(F)}},setInput:function(E){this._input=E;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};if(this.options.ranges){this.yylloc.range=[0,0]}this.offset=0;return this},input:function(){var F=this._input[0];this.yytext+=F;this.yyleng++;this.offset++;this.match+=F;this.matched+=F;var E=F.match(/(?:\r\n?|\n).*/g);if(E){this.yylineno++;this.yylloc.last_line++}else{this.yylloc.last_column++}if(this.options.ranges){this.yylloc.range[1]++}this._input=this._input.slice(1);return F},unput:function(G){var E=G.length;var F=G.split(/(?:\r\n?|\n)/g);this._input=G+this._input;this.yytext=this.yytext.substr(0,this.yytext.length-E-1);this.offset-=E;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1);this.matched=this.matched.substr(0,this.matched.length-1);if(F.length-1){this.yylineno-=F.length-1}var H=this.yylloc.range;this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===I.length?this.yylloc.first_column:0)+I[I.length-F.length].length-F[0].length:this.yylloc.first_column-E};if(this.options.ranges){this.yylloc.range=[H[0],H[0]+this.yyleng-E]}return this},more:function(){this._more=true;return this},less:function(E){this.unput(this.match.slice(E))},pastInput:function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var E=this.match;if(E.length<20){E+=this._input.substr(0,20-E.length)}return(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var E=this.pastInput();var F=new Array(E.length+1).join("-");return E+this.upcomingInput()+"\n"+F+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var K,I,F,H,G,E;if(!this._more){this.yytext="";this.match=""}var L=this._currentRules();for(var J=0;J<L.length;J++){F=this._input.match(this.rules[L[J]]);if(F&&(!I||F[0].length>I[0].length)){I=F;H=J;if(!this.options.flex){break}}}if(I){E=I[0].match(/(?:\r\n?|\n).*/g);if(E){this.yylineno+=E.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:E?E[E.length-1].length-E[E.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+I[0].length};this.yytext+=I[0];this.match+=I[0];this.matches=I;this.yyleng=this.yytext.length;if(this.options.ranges){this.yylloc.range=[this.offset,this.offset+=this.yyleng]}this._more=false;this._input=this._input.slice(I[0].length);this.matched+=I[0];K=this.performAction.call(this,this.yy,this,L[H],this.conditionStack[this.conditionStack.length-1]);if(this.done&&this._input){this.done=false}if(K){return K}else{return}}if(this._input===""){return this.EOF}else{return this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function x(){var E=this.next();if(typeof E!=="undefined"){return E}else{return this.lex()}},begin:function y(E){this.conditionStack.push(E)},popState:function D(){return this.conditionStack.pop()},_currentRules:function B(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function y(E){this.begin(E)}});A.options={};A.performAction=function z(J,F,I,E){function G(L,K){return F.yytext=F.yytext.substr(L,F.yyleng-K)}var H=E;switch(I){case 0:if(F.yytext.slice(-2)==="\\\\"){G(0,1);this.begin("mu")}else{if(F.yytext.slice(-1)==="\\"){G(0,1);this.begin("emu")}else{this.begin("mu")}}if(F.yytext){return 14}break;case 1:return 14;break;case 2:if(F.yytext.slice(-1)!=="\\"){this.popState()}if(F.yytext.slice(-1)==="\\"){G(0,1)}return 14;break;case 3:G(0,4);this.popState();return 15;break;case 4:return 25;break;case 5:return 16;break;case 6:return 20;break;case 7:return 19;break;case 8:return 19;break;case 9:return 23;break;case 10:return 22;break;case 11:this.popState();this.begin("com");break;case 12:G(3,5);this.popState();return 15;break;case 13:return 22;break;case 14:return 39;break;case 15:return 38;break;case 16:return 38;break;case 17:return 42;break;case 18:break;case 19:this.popState();return 24;break;case 20:this.popState();return 18;break;case 21:F.yytext=G(1,2).replace(/\\"/g,'"');return 32;break;case 22:F.yytext=G(1,2).replace(/\\'/g,"'");return 32;break;case 23:return 40;break;case 24:return 34;break;case 25:return 34;break;case 26:return 33;break;case 27:return 38;break;case 28:F.yytext=G(1,2);return 38;break;case 29:return"INVALID";break;case 30:return 5;break}};A.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s])))/,/^(?:false(?=([~}\s])))/,/^(?:-?[0-9]+(?=([~}\s])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/];A.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],inclusive:false},emu:{rules:[2],inclusive:false},com:{rules:[3],inclusive:false},INITIAL:{rules:[0,1,30],inclusive:true}};return A})();w.lexer=q;function u(){this.yy={}}u.prototype=w;w.Parser=u;return new u})();o=n;return o})();var m=(function(r,n){var o={};var s=r;var p=n;o.parser=s;function q(t){if(t.constructor===p.ProgramNode){return t}s.yy=p;return s.parse(t)}o.parse=q;return o})(b,k);var h=(function(u){var w;var n=u.COMPILER_REVISION;var r=u.REVISION_CHANGES;var s=u.log;function p(y){this.value=y}function x(){}x.prototype={nameLookup:function(B,z){var A,y;if(B.indexOf("depth")===0){A=true}if(/^[0-9]+$/.test(z)){y=B+"["+z+"]"}else{if(x.isValidJavaScriptVariableName(z)){y=B+"."+z}else{y=B+"['"+z+"']"}}if(A){return"("+B+" && "+y+")"}else{return y}},appendToBuffer:function(y){if(this.environment.isSimple){return"return "+y+";"}else{return{appendToBuffer:true,content:y,toString:function(){return"buffer += "+y+";"}}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(y,A,C,B){this.environment=y;this.options=A||{};s("debug",this.environment.disassemble()+"\n\n");this.name=this.environment.name;this.isChild=!!C;this.context=C||{programs:[],environments:[],aliases:{}};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileStack=[];this.inlineStack=[];this.compileChildren(y,A);var E=y.opcodes,D;this.i=0;for(var z=E.length;this.i<z;this.i++){D=E[this.i];if(D.opcode==="DECLARE"){this[D.name]=D.value}else{this[D.opcode].apply(this,D.args)}if(D.opcode!==this.stripNext){this.stripNext=false}}this.pushSource("");return this.createFunctionContext(B)},preamble:function(){var y=[];if(!this.isChild){var z=this.namespace;var A="helpers = this.merge(helpers, "+z+".helpers);";if(this.environment.usePartial){A=A+" partials = this.merge(partials, "+z+".partials);"}if(this.options.data){A=A+" data = data || {};"}y.push(A)}else{y.push("")}if(!this.environment.isSimple){y.push(", buffer = "+this.initializeBuffer())}else{y.push("")}this.lastContext=0;this.source=y},createFunctionContext:function(F){var A=this.stackVars.concat(this.registers.list);if(A.length>0){this.source[1]=this.source[1]+", "+A.join(", ")}if(!this.isChild){for(var E in this.context.aliases){if(this.context.aliases.hasOwnProperty(E)){this.source[1]=this.source[1]+", "+E+"="+this.context.aliases[E]}}}if(this.source[1]){this.source[1]="var "+this.source[1].substring(2)+";"}if(!this.isChild){this.source[1]+="\n"+this.context.programs.join("\n")+"\n"}if(!this.environment.isSimple){this.pushSource("return buffer;")}var C=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"];for(var D=0,B=this.environment.depths.list.length;D<B;D++){C.push("depth"+this.environment.depths.list[D])}var y=this.mergeSource();if(!this.isChild){var G=n,z=r[G];y="this.compilerInfo = ["+G+",'"+z+"'];\n"+y}if(F){C.push(y);return Function.apply(this,C)}else{var H="function "+(this.name||"")+"("+C.join(",")+") {\n  "+y+"}";s("debug",H+"\n\n");return H}},mergeSource:function(){var C="",A;for(var B=0,y=this.source.length;B<y;B++){var z=this.source[B];if(z.appendToBuffer){if(A){A=A+"\n    + "+z.content}else{A=z.content}}else{if(A){C+="buffer += "+A+";\n  ";A=undefined}C+=z+"\n  "}}return C},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var y=["depth0"];this.setupParams(0,y);this.replaceStack(function(z){y.splice(1,0,z);return"blockHelperMissing.call("+y.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var z=["depth0"];this.setupParams(0,z);var y=this.topStack();z.splice(1,0,y);z[z.length-1]="options";this.pushSource("if (!"+this.lastHelper+") { "+y+" = blockHelperMissing.call("+z.join(", ")+"); }")},appendContent:function(y){if(this.pendingContent){y=this.pendingContent+y}if(this.stripNext){y=y.replace(/^\s+/,"")}this.pendingContent=y},strip:function(){if(this.pendingContent){this.pendingContent=this.pendingContent.replace(/\s+$/,"")}this.stripNext="strip"},append:function(){this.flushInline();var y=this.popStack();this.pushSource("if("+y+" || "+y+" === 0) { "+this.appendToBuffer(y)+" }");if(this.environment.isSimple){this.pushSource("else { "+this.appendToBuffer("''")+" }")}},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression";this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(y){if(this.lastContext!==y){this.lastContext=y}},lookupOnContext:function(y){this.push(this.nameLookup("depth"+this.lastContext,y,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"';this.replaceStack(function(y){return"typeof "+y+" === functionType ? "+y+".apply(depth0) : "+y})},lookup:function(y){this.replaceStack(function(z){return z+" == null || "+z+" === false ? "+z+" : "+this.nameLookup(z,y,"context")})},lookupData:function(){this.push("data")},pushStringParam:function(y,z){this.pushStackLiteral("depth"+this.lastContext);this.pushString(z);if(typeof y==="string"){this.pushString(y)}else{this.pushStackLiteral(y)}},emptyHash:function(){this.pushStackLiteral("{}");if(this.options.stringParams){this.register("hashTypes","{}");this.register("hashContexts","{}")}},pushHash:function(){this.hash={values:[],types:[],contexts:[]}},popHash:function(){var y=this.hash;this.hash=undefined;if(this.options.stringParams){this.register("hashContexts","{"+y.contexts.join(",")+"}");this.register("hashTypes","{"+y.types.join(",")+"}")}this.push("{\n    "+y.values.join(",\n    ")+"\n  }")},pushString:function(y){this.pushStackLiteral(this.quotedString(y))},push:function(y){this.inlineStack.push(y);return y},pushLiteral:function(y){this.pushStackLiteral(y)},pushProgram:function(y){if(y!=null){this.pushStackLiteral(this.programExpression(y))}else{this.pushStackLiteral(null)}},invokeHelper:function(A,y){this.context.aliases.helperMissing="helpers.helperMissing";var z=this.lastHelper=this.setupHelper(A,y,true);var B=this.nameLookup("depth"+this.lastContext,y,"context");this.push(z.name+" || "+B);this.replaceStack(function(C){return C+" ? "+C+".call("+z.callParams+") : helperMissing.call("+z.helperMissingParams+")"})},invokeKnownHelper:function(A,y){var z=this.setupHelper(A,y);this.push(z.name+".call("+z.callParams+")")},invokeAmbiguous:function(y,C){this.context.aliases.functionType='"function"';this.pushStackLiteral("{}");var z=this.setupHelper(0,y,C);var A=this.lastHelper=this.nameLookup("helpers",y,"helper");var D=this.nameLookup("depth"+this.lastContext,y,"context");var B=this.nextStack();this.pushSource("if ("+B+" = "+A+") { "+B+" = "+B+".call("+z.callParams+"); }");this.pushSource("else { "+B+" = "+D+"; "+B+" = typeof "+B+" === functionType ? "+B+".call("+z.callParams+") : "+B+"; }")},invokePartial:function(y){var z=[this.nameLookup("partials",y,"partial"),"'"+y+"'",this.popStack(),"helpers","partials"];if(this.options.data){z.push("data")}this.context.aliases.self="this";this.push("self.invokePartial("+z.join(", ")+")")},assignToHash:function(z){var B=this.popStack(),y,A;if(this.options.stringParams){A=this.popStack();y=this.popStack()}var C=this.hash;if(y){C.contexts.push("'"+z+"': "+y)}if(A){C.types.push("'"+z+"': "+A)}C.values.push("'"+z+"': ("+B+")")},compiler:x,compileChildren:function(y,B){var D=y.children,F,E;for(var C=0,z=D.length;C<z;C++){F=D[C];E=new this.compiler();var A=this.matchExistingProgram(F);if(A==null){this.context.programs.push("");A=this.context.programs.length;F.index=A;F.name="program"+A;this.context.programs[A]=E.compile(F,B,this.context);this.context.environments[A]=F}else{F.index=A;F.name="program"+A}}},matchExistingProgram:function(B){for(var A=0,z=this.context.environments.length;A<z;A++){var y=this.context.environments[A];if(y&&y.equals(B)){return A}}},programExpression:function(z){this.context.aliases.self="this";if(z==null){return"self.noop"}var E=this.environment.children[z],D=E.depths.list,C;var B=[E.index,E.name,"data"];for(var A=0,y=D.length;A<y;A++){C=D[A];if(C===1){B.push("depth0")}else{B.push("depth"+(C-1))}}return(D.length===0?"self.program(":"self.programWithDepth(")+B.join(", ")+")"},register:function(y,z){this.useRegister(y);this.pushSource(y+" = "+z+";")},useRegister:function(y){if(!this.registers[y]){this.registers[y]=true;this.registers.list.push(y)}},pushStackLiteral:function(y){return this.push(new p(y))},pushSource:function(y){if(this.pendingContent){this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent)));this.pendingContent=undefined}if(y){this.source.push(y)}},pushStack:function(z){this.flushInline();var y=this.incrStack();if(z){this.pushSource(y+" = "+z+";")}this.compileStack.push(y);return y},replaceStack:function(E){var B="",D=this.isInline(),y;if(D){var C=this.popStack(true);if(C instanceof p){y=C.value}else{var z=this.stackSlot?this.topStackName():this.incrStack();B="("+this.push(z)+" = "+C+"),";y=this.topStack()}}else{y=this.topStack()}var A=E.call(this,y);if(D){if(this.inlineStack.length||this.compileStack.length){this.popStack()}this.push("("+B+A+")")}else{if(!/^stack/.test(y)){y=this.nextStack()}this.pushSource(y+" = ("+B+A+");")}return y},nextStack:function(){return this.pushStack()},incrStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var A=this.inlineStack;if(A.length){this.inlineStack=[];for(var z=0,y=A.length;z<y;z++){var B=A[z];if(B instanceof p){this.compileStack.push(B)}else{this.pushStack(B)}}}},isInline:function(){return this.inlineStack.length},popStack:function(y){var A=this.isInline(),z=(A?this.inlineStack:this.compileStack).pop();if(!y&&(z instanceof p)){return z.value}else{if(!A){this.stackSlot--}return z}},topStack:function(z){var y=(this.isInline()?this.inlineStack:this.compileStack),A=y[y.length-1];if(!z&&(A instanceof p)){return A.value}else{return A}},quotedString:function(y){return'"'+y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(C,A,z){var B=[];this.setupParams(C,B,z);var y=this.nameLookup("helpers",A,"helper");return{params:B,name:y,callParams:["depth0"].concat(B).join(", "),helperMissingParams:z&&["depth0",this.quotedString(A)].concat(B).join(", ")}},setupParams:function(B,A,y){var H=[],F=[],G=[],z,C,E;H.push("hash:"+this.popStack());C=this.popStack();E=this.popStack();if(E||C){if(!E){this.context.aliases.self="this";E="self.noop"}if(!C){this.context.aliases.self="this";C="self.noop"}H.push("inverse:"+C);H.push("fn:"+E)}for(var D=0;D<B;D++){z=this.popStack();A.push(z);if(this.options.stringParams){G.push(this.popStack());F.push(this.popStack())}}if(this.options.stringParams){H.push("contexts:["+F.join(",")+"]");H.push("types:["+G.join(",")+"]");H.push("hashContexts:hashContexts");H.push("hashTypes:hashTypes")}if(this.options.data){H.push("data:data")}H="{"+H.join(",")+"}";if(y){this.register("options",H);A.push("options")}else{A.push(H)}return A.join(", ")}};var o=("break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield").split(" ");var v=x.RESERVED_WORDS={};for(var t=0,q=o.length;t<q;t++){v[o[t]]=true}x.isValidJavaScriptVariableName=function(y){if(!x.RESERVED_WORDS[y]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(y)){return true}return false};w=x;return w})(j);var e=(function(t,x,n,q){var v={};var r=t;var p=x.parse;var y=n;var s=q;function u(){}v.Compiler=u;u.prototype={compiler:u,disassemble:function(){var E=this.opcodes,D,B=[],G,F;for(var C=0,z=E.length;C<z;C++){D=E[C];if(D.opcode==="DECLARE"){B.push("DECLARE "+D.name+"="+D.value)}else{G=[];for(var A=0;A<D.args.length;A++){F=D.args[A];if(typeof F==="string"){F='"'+F.replace("\n","\\n")+'"'}G.push(F)}B.push(D.opcode+" "+G.join(" "))}}return B.join("\n")},equals:function(A){var z=this.opcodes.length;if(A.opcodes.length!==z){return false}for(var D=0;D<z;D++){var E=this.opcodes[D],B=A.opcodes[D];if(E.opcode!==B.opcode||E.args.length!==B.args.length){return false}for(var C=0;C<E.args.length;C++){if(E.args[C]!==B.args[C]){return false}}}z=this.children.length;if(A.children.length!==z){return false}for(D=0;D<z;D++){if(!this.children[D].equals(A.children[D])){return false}}return true},guid:0,compile:function(z,B){this.opcodes=[];this.children=[];this.depths={list:[]};this.options=B;var C=this.options.knownHelpers;this.options.knownHelpers={helperMissing:true,blockHelperMissing:true,each:true,"if":true,unless:true,"with":true,log:true};if(C){for(var A in C){this.options.knownHelpers[A]=C[A]}}return this.accept(z)},accept:function(B){var A=B.strip||{},z;if(A.left){this.opcode("strip")}z=this[B.type](B);if(A.right){this.opcode("strip")}return z},program:function(B){var A=B.statements;for(var C=0,z=A.length;C<z;C++){this.accept(A[C])}this.isSimple=z===1;this.depths.list=this.depths.list.sort(function(E,D){return E-D});return this},compileProgram:function(B){var z=new this.compiler().compile(B,this.options);var C=this.guid++,E;this.usePartial=this.usePartial||z.usePartial;this.children[C]=z;for(var D=0,A=z.depths.list.length;D<A;D++){E=z.depths.list[D];if(E<2){continue}else{this.addDepth(E-1)}}return C},block:function(D){var C=D.mustache,A=D.program,z=D.inverse;if(A){A=this.compileProgram(A)}if(z){z=this.compileProgram(z)}var B=this.classifyMustache(C);if(B==="helper"){this.helperMustache(C,A,z)}else{if(B==="simple"){this.simpleMustache(C);this.opcode("pushProgram",A);this.opcode("pushProgram",z);this.opcode("emptyHash");this.opcode("blockValue")}else{this.ambiguousMustache(C,A,z);this.opcode("pushProgram",A);this.opcode("pushProgram",z);this.opcode("emptyHash");this.opcode("ambiguousBlockValue")}}this.opcode("append")},hash:function(C){var B=C.pairs,E,D;this.opcode("pushHash");for(var A=0,z=B.length;A<z;A++){E=B[A];D=E[1];if(this.options.stringParams){if(D.depth){this.addDepth(D.depth)}this.opcode("getContext",D.depth||0);this.opcode("pushStringParam",D.stringModeValue,D.type)}else{this.accept(D)}this.opcode("assignToHash",E[0])}this.opcode("popHash")},partial:function(z){var A=z.partialName;this.usePartial=true;if(z.context){this.ID(z.context)}else{this.opcode("push","depth0")}this.opcode("invokePartial",A.name);this.opcode("append")},content:function(z){this.opcode("appendContent",z.string)},mustache:function(B){var z=this.options;var A=this.classifyMustache(B);if(A==="simple"){this.simpleMustache(B)}else{if(A==="helper"){this.helperMustache(B)}else{this.ambiguousMustache(B)}}if(B.escaped&&!z.noEscape){this.opcode("appendEscaped")}else{this.opcode("append")}},ambiguousMustache:function(D,B,A){var E=D.id,C=E.parts[0],z=B!=null||A!=null;this.opcode("getContext",E.depth);this.opcode("pushProgram",B);this.opcode("pushProgram",A);this.opcode("invokeAmbiguous",C,z)},simpleMustache:function(z){var A=z.id;if(A.type==="DATA"){this.DATA(A)}else{if(A.parts.length){this.ID(A)}else{this.addDepth(A.depth);this.opcode("getContext",A.depth);this.opcode("pushContext")}}this.opcode("resolvePossibleLambda")},helperMustache:function(C,A,z){var D=this.setupFullMustacheParams(C,A,z),B=C.id.parts[0];if(this.options.knownHelpers[B]){this.opcode("invokeKnownHelper",D.length,B)}else{if(this.options.knownHelpersOnly){throw new Error("You specified knownHelpersOnly, but used the unknown helper "+B)}else{this.opcode("invokeHelper",D.length,B)}}},ID:function(C){this.addDepth(C.depth);this.opcode("getContext",C.depth);var A=C.parts[0];if(!A){this.opcode("pushContext")}else{this.opcode("lookupOnContext",C.parts[0])}for(var B=1,z=C.parts.length;B<z;B++){this.opcode("lookup",C.parts[B])}},DATA:function(B){this.options.data=true;if(B.id.isScoped||B.id.depth){throw new r("Scoped data references are not supported: "+B.original)}this.opcode("lookupData");var C=B.id.parts;for(var A=0,z=C.length;A<z;A++){this.opcode("lookup",C[A])}},STRING:function(z){this.opcode("pushString",z.string)},INTEGER:function(z){this.opcode("pushLiteral",z.integer)},BOOLEAN:function(z){this.opcode("pushLiteral",z.bool)},comment:function(){},opcode:function(z){this.opcodes.push({opcode:z,args:[].slice.call(arguments,1)})},declare:function(z,A){this.opcodes.push({opcode:"DECLARE",name:z,value:A})},addDepth:function(z){if(isNaN(z)){throw new Error("EWOT")}if(z===0){return}if(!this.depths[z]){this.depths[z]=true;this.depths.list.push(z)}},classifyMustache:function(C){var B=C.isHelper;var D=C.eligibleHelper;var A=this.options;if(D&&!B){var z=C.id.parts[0];if(A.knownHelpers[z]){B=true}else{if(A.knownHelpersOnly){D=false}}}if(B){return"helper"}else{if(D){return"ambiguous"}else{return"simple"}}},pushParams:function(B){var z=B.length,A;while(z--){A=B[z];if(this.options.stringParams){if(A.depth){this.addDepth(A.depth)}this.opcode("getContext",A.depth||0);this.opcode("pushStringParam",A.stringModeValue,A.type)}else{this[A.type](A)}}},setupMustacheParams:function(z){var A=z.params;this.pushParams(A);if(z.hash){this.hash(z.hash)}else{this.opcode("emptyHash")}return A},setupFullMustacheParams:function(B,A,z){var C=B.params;this.pushParams(C);this.opcode("pushProgram",A);this.opcode("pushProgram",z);if(B.hash){this.hash(B.hash)}else{this.opcode("emptyHash")}return C}};function o(B,C){if(B==null||(typeof B!=="string"&&B.constructor!==s.ProgramNode)){throw new r("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+B)}C=C||{};if(!("data" in C)){C.data=true}var A=p(B);var z=new u().compile(A,C);return new y().compile(z,C)}v.precompile=o;function w(z,A,B){if(z==null||(typeof z!=="string"&&z.constructor!==s.ProgramNode)){throw new r("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+z)}A=A||{};if(!("data" in A)){A.data=true}var D;function C(){var G=p(z);var F=new u().compile(G,A);var E=new y().compile(F,A,undefined,true);return B.template(E)}return function(F,E){if(!D){D=C()}return D.call(this,F,E)}}v.compile=w;return v})(d,m,h,k);var c=(function(w,B,o,s,v){var y;var n=w;var u=B;var r=o.parser;var q=o.parse;var x=s.Compiler;var A=s.compile;var p=s.precompile;var C=v;var z=n.create;var t=function(){var D=z();D.compile=function(E,F){return A(E,F,D)};D.precompile=p;D.AST=u;D.Compiler=x;D.JavaScriptCompiler=C;D.Parser=r;D.parse=q;return D};n=t();n.create=t;y=n;return y})(f,k,m,e,h);return c})();var docCookie={getItem:function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},setItem:function(d,g,c,b,a,e){if(!d||/^(?:expires|max\-age|path|domain|secure)$/i.test(d)){return false}var f="";if(c){switch(c.constructor){case Number:f=c===Infinity?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+c;break;case String:f="; expires="+c;break;case Date:f="; expires="+c.toUTCString();break}}document.cookie=encodeURIComponent(d)+"="+encodeURIComponent(g)+f+(a?"; domain="+a:"")+(b?"; path="+b:"")+(e?"; secure":"");return true},removeItem:function(c,b,a){if(!c||!this.hasItem(c)){return false}document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(a?"; domain="+a:"")+(b?"; path="+b:"");return true},hasItem:function(a){return(new RegExp("(?:^|;\\s*)"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=")).test(document.cookie)},keys:function(){var a=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/);for(var b=0;b<a.length;b++){a[b]=decodeURIComponent(a[b])}return a}};jQuery.notifyBar=function(a){(function(c){var b=notifyBarNS={};notifyBarNS.shown=false;if(!a){a={}}notifyBarNS.html=a.html||"Your message here";notifyBarNS.delay=a.delay||2000;notifyBarNS.animationSpeed=a.animationSpeed||200;notifyBarNS.jqObject=a.jqObject;notifyBarNS.cls=a.cls||"";notifyBarNS.close=a.close||false;if(notifyBarNS.jqObject){b=notifyBarNS.jqObject;notifyBarNS.html=b.html()}else{b=jQuery("<div></div>").addClass("jquery-notify-bar").addClass(notifyBarNS.cls).attr("id","__notifyBar")}b.html(notifyBarNS.html).hide();var d=b.attr("id");switch(notifyBarNS.animationSpeed){case"slow":asTime=600;break;case"normal":asTime=400;break;case"fast":asTime=200;break;default:asTime=notifyBarNS.animationSpeed;break}if(b!="object"){jQuery("body").prepend(b)}if(notifyBarNS.close){b.append(jQuery("<a href='#' class='notify-bar-close'>Close [X]</a>"));jQuery(".notify-bar-close").click(function(){if(b.attr("id")=="__notifyBar"){jQuery("#"+d).slideUp(asTime,function(){jQuery("#"+d).remove()})}else{jQuery("#"+d).slideUp(asTime)}return false})}if(c(".jquery-notify-bar:visible").length>0){c(".jquery-notify-bar:visible").stop().slideUp(asTime,function(){b.stop().slideDown(asTime)})}else{b.slideDown(asTime)}b.click(function(){c(this).slideUp(asTime)});if(b.attr("id")=="__notifyBar"){setTimeout("jQuery('#"+d+"').stop().slideUp("+asTime+", function() {jQuery('#"+d+"').remove()});",notifyBarNS.delay+asTime)}else{setTimeout("jQuery('#"+d+"').stop().slideUp("+asTime+", function() {jQuery('#"+d+"')});",notifyBarNS.delay+asTime)}})(jQuery)};function LocationDropdown(a){this.LocationId=a;this.placeholder=this.LocationId.children().children("span");this.opts=this.LocationId.find(".uiv2-location-dropdown ul > li");this.val="";this.index=-1;this.initEvents()}LocationDropdown.prototype={initEvents:function(){var a=this;$(".uiv2-loc-wrapper").on("click",function(b){if($("#uiv2-location-id").hasClass("active")){$("#uiv2-location-id").removeClass("active")}else{$("#uiv2-location-id").addClass("active");compute_top_menu_css()}resetCities();return false})},getValue:function(){return this.val},getIndex:function(){return this.index}};function compute_top_menu_css(){wid=$("#uiv2-location-id .uiv2-loc-wrapper").width();$("#uiv2-location-id .uiv2-whiteshade").css("width",wid+20);if(wid>250){$("#uiv2-location-id .uiv2-location-dropdown").css("width",wid+20)}$(".uiv2-tele").css("margin-left",wid+30)}function resetCities(){cities=[];$("#uiv2-change li").each(function(){cities.push($(this).text())});$(".uiv2-location-multicity-input").val("");for(var a=0;a<cities.length;a++){city_name=cities[a].toLowerCase();if(a>1){$("#"+city_name+"_city").hide()}else{$("#"+city_name+"_city").show()}}}$(function(){var a=new LocationDropdown($("#uiv2-location-id"));$(".uiv2-remove-row").click(function(){$(this).closest("div.uiv2-row").slideUp(300,function(){$(this).remove()})});$(".uiv2-myshoping-minus").click(function(){if($(this).hasClass("uiv2-plus-open")){$(".uiv2-my-shoppinglist-wrapper").slideDown(300);$(this).removeClass("uiv2-plus-open")}else{$(".uiv2-my-shoppinglist-wrapper").slideUp(300);$(this).addClass("uiv2-plus-open")}})});$(function(){var c=$(".backgroundShade");var b=$(document).width();var a=$(document).height();c.height(a);c.width(b);$(".uiv2-why-location").click(function(){$(".uiv2-background-shade, .uiv2-location-popup").fadeIn("slow")});$(".uiv2-popup-close").click(function(){$(".uiv2-background-shade, .uiv2-location-popup").fadeOut("slow")});$("input, textarea").placeholder()});(function(a){a.fn.typeWatch=function(e){var c=["TEXT","TEXTAREA","PASSWORD","TEL","SEARCH","URL","EMAIL","DATETIME","DATE","MONTH","WEEK","TIME","DATETIME-LOCAL","NUMBER","RANGE"];var b=a.extend({wait:750,callback:function(){},highlight:true,captureLength:2,inputTypes:c},e);function d(j,g){var h=a(j.el).val();if((h.length>=b.captureLength&&h.toUpperCase()!=j.text)||(g&&h.length>=b.captureLength)){j.text=h.toUpperCase();j.cb.call(j.el,h)}}function f(j){var g=j.type.toUpperCase();if(a.inArray(g,b.inputTypes)>=0){var k={timer:null,text:a(j).val().toUpperCase(),cb:b.callback,el:j,wait:b.wait};if(b.highlight){a(j).focus(function(){this.select()})}var h=function(l){var p=k.wait;var o=false;var n=this.type.toUpperCase();if(typeof l.keyCode!="undefined"&&l.keyCode==13&&n!="TEXTAREA"&&a.inArray(n,b.inputTypes)>=0){p=1;o=true}var m=function(){d(k,o)};clearTimeout(k.timer);k.timer=setTimeout(m,p)};a(j).on("keydown paste cut input",h)}}return this.each(function(){f(this)})}})(jQuery);Number.prototype.formatMoney=function(e,g,b){var f=this,e=isNaN(e=Math.abs(e))?2:e,b=b==undefined?".":b,g=g==undefined?",":g,a=f<0?"-":"",d=parseInt(f=Math.abs(+f||0).toFixed(e))+"",c=(c=d.length)>3?c%3:0;return a+(c?d.substr(0,c)+g:"")+d.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+g)+(e?b+Math.abs(f-d).toFixed(e).slice(2):"")};var delivery_slots_data=null;var auto_complete_areas=[];var main_menu_clicked=false;var QueryString=function(){var d={};var c=window.location.search.substring(1);var e=c.split("&");for(var b=0;b<e.length;b++){var f=e[b].split("=");if(typeof d[f[0]]==="undefined"){d[f[0]]=f[1]}else{if(typeof d[f[0]]==="string"){var a=[d[f[0]],f[1]];d[f[0]]=a}else{d[f[0]].push(f[1])}}}return d}();function init_autocomplete_areas(a){auto_complete_areas=a}function init_newaddress_autocomplete(){var a=$("#id_contact_area");area_autocomplete=a.autocomplete({source:function(c,b){var d=$.map(auto_complete_areas,function(e){if(e.toUpperCase().indexOf(c.term.toUpperCase())===0){return e}});b(d)}});a.focusout(function(){var b=$("#id_contact_area").val();if(b!=""){$.ajax({url:"/member/get-pincode/?area="+b,type:"get",dataType:"json",success:function(c){$("#id_contact_zipcode").val(c.pincode)}})}})}function init_dropaddress_autocomplete(){var a=$("#uiv2-drop-area");area_drop_autocomplete=a.autocomplete({source:function(c,b){var d=$.map(auto_complete_areas,function(e){if(e.toUpperCase().indexOf(c.term.toUpperCase())===0){return e}});b(d)}})}function uiv2_hide_popup(b){var a=$("#"+b);var c=$(".uiv2-background-shade");a.fadeOut("slow");c.fadeOut("slow",function(){if(b.indexOf("shipment_products")==0){a.empty()}});$(".uiv2-location").show();add_address_details=$("#add_address_detail").val();if(add_address_details==1){reset_address_form()}}function init_edit_address_submit(){$("#frmEditAddress").submit(function(){$(".uiv2-example-r").html();$.ajax({data:$(this).serialize(),type:$(this).attr("method"),url:$(this).attr("action"),dataType:"json",success:function(a){if(a.success==true){$(".uiv2-popup").hide();$("#shadow-mask").hide();uiv2_hide_popup("uiv2-edit-address-form");$.ajax({url:"/member/get-all-addresses/",type:"get",data:{},success:function(d){$("#uiv2-address-book").html(d.addresses)}})}else{var c=a.errors;var b=a.memberaddress_id;for(error in c){$("#edit_"+b+"_error_"+error).html(c[error])}}},error:function(c,a,b){$(".uiv2-address-error").html("An error occurred. Please try again.")}});return false})}function refresh_addresses(){var b=$("#uiv2-dispatch-options input[type='radio']:checked").val();var a=$("#uiv2-checkout-delivery-address");if(b=="1"){var d=$("#uiv2-default-address").attr("value");$.ajax({url:"/member/get-drop-addresses-address/",type:"post",data:{address_id:d},success:function(f){a.html(f);a.find("li").first().click();d=$("#uiv2-default-address").attr("value");var e=$("#evoucher_credit").val();if(!e){e="0.00"}update_payment_details(e,d)}})}else{if(b=="2"){var c=$("#uiv2-drop-area").val();$.ajax({url:"/member/get-drop-addresses-area/",type:"post",data:{area:c},success:function(f){a.html(f);a.find("li").first().click();d=$("#uiv2-default-address").attr("value");var e=$("#evoucher_credit").val();if(!e){e="0.00"}update_payment_details(e,d)}})}else{$.ajax({url:"/member/get-addresses/",type:"get",data:{apply_selected_order:0},success:function(f){a.html(f);a.find("li").first().click();d=$("#uiv2-default-address").attr("value");var e=$("#evoucher_credit").val();if(!e){e="0.00"}update_payment_details(e,d)}})}}}var autosearch_template="";var cartitems_template="";var max_qty=25;var static_url="";var last_add_prod=null;var csrf="";var autosearch_results=0;var AUTO_SEARCH_LIMIT=20;var num_items_in_basket=0;var ganalytics=false;var bb_analytics=false;var cart_changed=true;var shoppinglist_click_state=false;var current=null;var shoppinglist_create_state=false;var shoppinglist_copy_state=false;var number_of_items=0;var checkout_clicked=false;var scratch_list_edited=false;var set_help="";var shopping_list_menu_loaded=false;var page_data={};var q_term="";var analyticsHandler=null;var ADD_TO_CART_SOURCES={AUTO_SEARCH:"auto-search",AUTO_SEARCH_AD:"auto-search-ad",DYF:"dyf",PD:"pd",PD_ALSO_BOUGHT:"pd-ab",PD_REL_CAT_PROD:"pd-cat",PD_TOP_LEVEL_CAT:"pd-tlc",PD_REL_BRAND:"pd-brand",PD_STORE:"pd-offers",UPDATE_QTY:"update_qty",PROMO_BUNDLE:"promo_bundle",PROMO_POPUP:"promo_popup",FEATURED_PRODUCT:"fp",ALTERNATE_PRODUCT:"suggestion",RECOMMENDATIONS:"recommendations",SMART_BASKET:"smart-basket",IMPULSE_BUYING:"impulse-buying",ENGAGEMENT_STORE:"engagement_store"};var BBUtils={range:function(e,c,d){if(typeof c=="undefined"){c=e;e=0}if(typeof d=="undefined"){d=1}if((d>0&&e>=c)||(d<0&&e<=c)){return[]}var a=[];for(var b=e;d>0?b<c:b>c;b+=d){a.push(b)}return a},chunkify:function(d,c){var b=[];for(var a=0;a<d.length;a+=c){b.push(d.slice(a,a+c))}return b},column_major_chunks:function(f,b){var e=this.chunkify(f,b);var a=[];for(var d=0;d<e.length;d++){for(var c=0;c<e[d].length;c++){if(!a[c]){a[c]=[]}a[c][d]=e[d][c]}}return a},is_touch_device:function(){return $.cookie("_bb_tc")=="1"},showIEPopupIfApplicable:function(){if(this.ieVersion<9&&!docCookie.hasItem("_bb_ie")){$("#id_browser_support, .uiv2-background-shade").fadeIn("slow");docCookie.setItem("_bb_ie","shown",15552000)}},getObjPropertyName:function(b,a){for(var c in b){if(b.hasOwnProperty(c)&&b[c]===a){return c}}}};jQuery.fn.extend({colorTable:function(){var a="#"+this.attr("id")+" tbody tr";$(a).each(function(c,b){$(b).removeClass("dark");if(c%2!=0){$(b).addClass("dark")}})},banner_resize:function(b,a,c){$(this).find(b).each(function(d,h){var j=$(h);var e=j.children("img").width();var g=j.width();var f=g-e-(c?c:0);j.children(a).css("width",f+"px")})},exists:function(){return this&&this.length!==0}});(function(a){a.QueryString=(function(d){if(d==""){return{}}var c={};for(var e=0;e<d.length;++e){var f=d[e].split("=");if(f.length!=2){continue}c[f[0]]=decodeURIComponent(f[1].replace(/\+/g," "))}return c})(window.location.search.substr(1).split("&"))})(jQuery);var TouchHandler={init:function(){if(!BBUtils.is_touch_device()){document.documentElement.className+=" no-touch"}else{document.documentElement.className+=" touch";if(docCookie.hasItem("is_touch")){var b=docCookie.getItem("is_touch");if(b!=="true"){this.requestTopMenu()}else{this.initTopMenu()}}else{this.requestTopMenu()}var a=$("#id_top_menu_banner");this.addToHoverHandler(a,$(".uiv2-newbasket-dropdown"));this.addToHoverHandler(a,$(".uiv2-latest-basket-dropdown"));this.addToHoverHandler($(".uiv2-deliveryslot-link"),$(".uiv2-deliveryslot-dropdown"));this.addToHoverHandler($(".uiv2-loggedin-user-link"),$(".uiv2-loggedin-user-dropdown"));this.addToHoverHandlerAndOnlyHide($(".uiv2-search"),$(".uiv2-search-dropdown-block"),true);this.addToHoverHandler($(".uiv2-your-basket"),$(".uiv2-your-basket-dropdown"));this.addToHoverHandler($(".uiv2-offers-link"),$(".uiv2-offers-dropdown"));this.addToHoverHandler($(".uiv2-new-arrivals-link"),$(".uiv2-new-arrivals-dropdown"));this.addToHoverHandler($(".uiv2-shop-link"),$(".uiv2-shop-dropdown"));this.addToHoverHandler($(".uiv2-shop-by-list-link"),$(".uiv2-shop-by-list-dropdown"))}},requestTopMenu:function(){var a=this;$.ajax({url:"/product/touch-menu/",type:"get",success:function(c){if(c.success){console.log("Setting touch cookie");docCookie.setItem("is_touch","true");var b=c.menu;if(b){console.log("Replacing Menu");$(".uiv2-main-menu").html(b);a.initTopMenu()}}},error:function(){console.log("An error occurred when requesting top menu")}})},initTopMenu:function(){var b=$("nav ul li.top-category");var a=this;b.each(function(c,g){var f=$(g);var h=$(f.find("div.top-category-link"));var e=$(f.find(".uiv2-dropdown-box"));h.on("touchend",function(j){a._hideAll(b,h);j.preventDefault();if(e.is(":visible")){h.removeClass("hover");e.hide()}else{h.addClass("hover");e.show()}});var d=$(e.find("li.uiv2-submenu"));d.each(function(j,m){var l=$(m);var k="l3-link";l.on("touchend",function(n){if($(n.target).hasClass(k)){return}a._hideAllL3Categories(d,l);n.preventDefault();var o=l.find(".uiv2-sub-dropdown-column");if(o.is(":visible")){l.removeClass("hover");o.hide()}else{l.addClass("hover");o.show()}})})})},addToHoverHandlerAndOnlyHide:function(b,c,a){this._addToHoverHandler(b,c,{onlyHide:a})},addToHoverHandler:function(a,b){this._addToHoverHandler(a,b,{})},_addToHoverHandler:function(b,c,a){if(b.exists()){this._hoverHandlerList.push({parent:b,child:c,onlyHide:a.onlyHide})}},_hoverHandlerList:[],handleHover:function(){var a=this;$(document).on("touchend",function(k){var h=$(k.target);var j=$(".uiv2-left-navigation");var c=$(".uiv2-main-menu").find(".uiv2-dropdown-box");if(c.is(":visible")&&!j.find(h).exists()){c.hide();$(".top-category-link").removeClass("hover")}for(var f in a._hoverHandlerList){var l=a._hoverHandlerList[f]["parent"];var b=a._hoverHandlerList[f]["child"];var d=a._hoverHandlerList[f]["onlyHide"];var g=h.get(0)==l.get(0)||l.find(h).exists();if(!g){if(b.is(":visible")){b.hide()}}else{if(!d){if(!b.is(":visible")){b.show()}}}}})}};
/*!
 * typeahead.js 0.11.1
 * https://github.com/twitter/typeahead.js
 * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT
 */
(function(a,b){if(typeof define==="function"&&define.amd){define("bloodhound",["jquery"],function(c){return a.Bloodhound=b(c)})}else{if(typeof exports==="object"){module.exports=b(require("jquery"))}else{a.Bloodhound=b(jQuery)}}})(this,function(d){var k=function(){return{isMsie:function(){return/(msie|trident)/i.test(navigator.userAgent)?navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]:false},isBlankString:function(p){return !p||/^\s*$/.test(p)},escapeRegExChars:function(p){return p.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(p){return typeof p==="string"},isNumber:function(p){return typeof p==="number"},isArray:d.isArray,isFunction:d.isFunction,isObject:d.isPlainObject,isUndefined:function(p){return typeof p==="undefined"},isElement:function(p){return !!(p&&p.nodeType===1)},isJQuery:function(p){return p instanceof d},toStr:function o(p){return k.isUndefined(p)||p===null?"":p+""},bind:d.proxy,each:function(r,p){d.each(r,q);function q(s,t){return p(t,s)}},map:d.map,filter:d.grep,every:function(q,r){var p=true;if(!q){return p}d.each(q,function(s,t){if(!(p=r.call(null,t,s,q))){return false}});return !!p},some:function(q,r){var p=false;if(!q){return p}d.each(q,function(s,t){if(p=r.call(null,t,s,q)){return false}});return !!p},mixin:d.extend,identity:function(p){return p},clone:function(p){return d.extend(true,{},p)},getIdGenerator:function(){var p=0;return function(){return p++}},templatify:function n(q){return d.isFunction(q)?q:p;function p(){return String(q)}},defer:function(p){setTimeout(p,0)},debounce:function(r,t,q){var s,p;return function(){var x=this,w=arguments,v,u;v=function(){s=null;if(!q){p=r.apply(x,w)}};u=q&&!s;clearTimeout(s);s=setTimeout(v,t);if(u){p=r.apply(x,w)}return p}},throttle:function(u,w){var s,r,v,p,t,q;t=0;q=function(){t=new Date();v=null;p=u.apply(s,r)};return function(){var x=new Date(),y=w-(x-t);s=this;r=arguments;if(y<=0){clearTimeout(v);v=null;t=x;p=u.apply(s,r)}else{if(!v){v=setTimeout(q,y)}}return p}},stringify:function(p){return k.isString(p)?p:JSON.stringify(p)},noop:function(){}}}();var m="0.11.1";var f=function(){return{nonword:n,whitespace:o,obj:{nonword:p(n),whitespace:p(o)}};function o(q){q=k.toStr(q);return q?q.split(/\s+/):[]}function n(q){q=k.toStr(q);return q?q.split(/\W+/):[]}function p(r){return function q(s){s=k.isArray(s)?s:[].slice.call(arguments,0);return function t(v){var u=[];k.each(s,function(w){u=u.concat(r(k.toStr(v[w])))});return u}}}}();var l=function(){function o(v){this.maxSize=k.isNumber(v)?v:100;this.reset();if(this.maxSize<=0){this.set=this.get=d.noop}}k.mixin(o.prototype,{set:function u(v,y){var x=this.list.tail,w;if(this.size>=this.maxSize){this.list.remove(x);delete this.hash[x.key];this.size--}if(w=this.hash[v]){w.val=y;this.list.moveToFront(w)}else{w=new p(v,y);this.list.add(w);this.hash[v]=w;this.size++}},get:function q(v){var w=this.hash[v];if(w){this.list.moveToFront(w);return w.val}},reset:function s(){this.size=0;this.hash={};this.list=new r()}});function r(){this.head=this.tail=null}k.mixin(r.prototype,{add:function t(v){if(this.head){v.next=this.head;this.head.prev=v}this.head=v;this.tail=this.tail||v},remove:function n(v){v.prev?v.prev.next=v.next:this.head=v.next;v.next?v.next.prev=v.prev:this.tail=v.prev},moveToFront:function(v){this.remove(v);this.add(v)}});function p(v,w){this.key=v;this.val=w;this.prev=this.next=null}return o}();var h=function(){var s;try{s=window.localStorage;s.setItem("~~~","!");s.removeItem("~~~")}catch(r){s=null}function p(v,u){this.prefix=["__",v,"__"].join("");this.ttlKey="__ttl__";this.keyMatcher=new RegExp("^"+k.escapeRegExChars(this.prefix));this.ls=u||s;!this.ls&&this._noop()}k.mixin(p.prototype,{_prefix:function(u){return this.prefix+u},_ttlKey:function(u){return this._prefix(u)+this.ttlKey},_noop:function(){this.get=this.set=this.remove=this.clear=this.isExpired=k.noop},_safeSet:function(u,w){try{this.ls.setItem(u,w)}catch(v){if(v.name==="QuotaExceededError"){this.clear();this._noop()}}},get:function(u){if(this.isExpired(u)){this.remove(u)}return t(this.ls.getItem(this._prefix(u)))},set:function(v,w,u){if(k.isNumber(u)){this._safeSet(this._ttlKey(v),q(o()+u))}else{this.ls.removeItem(this._ttlKey(v))}return this._safeSet(this._prefix(v),q(w))},remove:function(u){this.ls.removeItem(this._ttlKey(u));this.ls.removeItem(this._prefix(u));return this},clear:function(){var u,v=n(this.keyMatcher);for(u=v.length;u--;){this.remove(v[u])}return this},isExpired:function(v){var u=t(this.ls.getItem(this._ttlKey(v)));return k.isNumber(u)&&o()>u?true:false}});return p;function o(){return new Date().getTime()}function q(u){return JSON.stringify(k.isUndefined(u)?null:u)}function t(u){return d.parseJSON(u)}function n(v){var x,w,y=[],u=s.length;for(x=0;x<u;x++){if((w=s.key(x)).match(v)){y.push(w.replace(v,""))}}return y}}();var e=function(){var p=0,s={},n=6,r=new l(10);function u(v){v=v||{};this.cancelled=false;this.lastReq=null;this._send=v.transport;this._get=v.limiter?v.limiter(this._get):this._get;this._cache=v.cache===false?new l(0):r}u.setMaxPendingRequests=function o(v){n=v};u.resetCache=function t(){r.reset()};k.mixin(u.prototype,{_fingerprint:function q(v){v=v||{};return v.url+v.type+d.param(v.data||{})},_get:function(C,w){var B=this,z,A;z=this._fingerprint(C);if(this.cancelled||z!==this.lastReq){return}if(A=s[z]){A.done(y).fail(x)}else{if(p<n){p++;s[z]=this._send(C).done(y).fail(x).always(v)}else{this.onDeckRequestArgs=[].slice.call(arguments,0)}}function y(D){w(null,D);B._cache.set(z,D)}function x(){w(true)}function v(){p--;delete s[z];if(B.onDeckRequestArgs){B._get.apply(B,B.onDeckRequestArgs);B.onDeckRequestArgs=null}}},get:function(y,v){var x,w;v=v||d.noop;y=k.isString(y)?{url:y}:y||{};w=this._fingerprint(y);this.cancelled=false;this.lastReq=w;if(x=this._cache.get(w)){v(null,x)}else{this._get(y,v)}},cancel:function(){this.cancelled=true}});return u}();var a=window.SearchIndex=function(){var u="c",v="i";function n(A){A=A||{};if(!A.datumTokenizer||!A.queryTokenizer){d.error("datumTokenizer and queryTokenizer are both required")}this.identify=A.identify||k.stringify;this.datumTokenizer=A.datumTokenizer;this.queryTokenizer=A.queryTokenizer;this.reset()}k.mixin(n.prototype,{bootstrap:function p(A){this.datums=A.datums;this.trie=A.trie},add:function(B){var A=this;B=k.isArray(B)?B:[B];k.each(B,function(C){var E,D;A.datums[E=A.identify(C)]=C;D=r(A.datumTokenizer(C));k.each(D,function(F){var I,H,G;I=A.trie;H=F.split("");while(G=H.shift()){I=I[u][G]||(I[u][G]=w());I[v].push(E)}})})},get:function o(A){var B=this;return k.map(A,function(C){return B.datums[C]})},search:function z(C){var A=this,D,B;D=r(this.queryTokenizer(C));k.each(D,function(E){var I,H,G,F;if(B&&B.length===0){return false}I=A.trie;H=E.split("");while(I&&(G=H.shift())){I=I[u][G]}if(I&&H.length===0){F=I[v].slice(0);B=B?s(B,F):F}else{B=[];return false}});return B?k.map(q(B),function(E){return A.datums[E]}):[]},all:function x(){var A=[];for(var B in this.datums){A.push(this.datums[B])}return A},reset:function t(){this.datums={};this.trie=w()},serialize:function y(){return{datums:this.datums,trie:this.trie}}});return n;function r(A){A=k.filter(A,function(B){return !!B});A=k.map(A,function(B){return B.toLowerCase()});return A}function w(){var A={};A[v]=[];A[u]={};return A}function q(E){var B={},D=[];for(var C=0,A=E.length;C<A;C++){if(!B[E[C]]){B[E[C]]=true;D.push(E[C])}}return D}function s(F,D){var B=0,E=0,G=[];F=F.sort();D=D.sort();var C=F.length,A=D.length;while(B<C&&E<A){if(F[B]<D[E]){B++}else{if(F[B]>D[E]){E++}else{G.push(F[B]);B++;E++}}}return G}}();var g=function(){var r;r={data:"data",protocol:"protocol",thumbprint:"thumbprint"};function s(t){this.url=t.url;this.ttl=t.ttl;this.cache=t.cache;this.prepare=t.prepare;this.transform=t.transform;this.transport=t.transport;this.thumbprint=t.thumbprint;this.storage=new h(t.cacheKey)}k.mixin(s.prototype,{_settings:function q(){return{url:this.url,type:"GET",dataType:"json"}},store:function o(t){if(!this.cache){return}this.storage.set(r.data,t,this.ttl);this.storage.set(r.protocol,location.protocol,this.ttl);this.storage.set(r.thumbprint,this.thumbprint,this.ttl)},fromCache:function p(){var t={},u;if(!this.cache){return null}t.data=this.storage.get(r.data);t.protocol=this.storage.get(r.protocol);t.thumbprint=this.storage.get(r.thumbprint);u=t.thumbprint!==this.thumbprint||t.protocol!==location.protocol;return t.data&&!u?t.data:null},fromNetwork:function(t){var w=this,u;if(!t){return}u=this.prepare(this._settings());this.transport(u).fail(v).done(x);function v(){t(true)}function x(y){t(null,w.transform(y))}},clear:function n(){this.storage.clear();return this}});return s}();var c=function(){function p(r){this.url=r.url;this.prepare=r.prepare;this.transform=r.transform;this.transport=new e({cache:r.cache,limiter:r.limiter,transport:r.transport})}k.mixin(p.prototype,{_settings:function o(){return{url:this.url,type:"GET",dataType:"json"}},get:function n(u,r){var t=this,s;if(!r){return}u=u||"";s=this.prepare(u,this._settings());return this.transport.get(s,v);function v(w,x){w?r([]):r(t.transform(x))}},cancelLastRequest:function q(){this.transport.cancel()}});return p}();var b=function(){return function r(u){var t,v;t={initialize:true,identify:k.stringify,datumTokenizer:null,queryTokenizer:null,sufficient:5,sorter:null,local:[],prefetch:null,remote:null};u=k.mixin(t,u||{});!u.datumTokenizer&&d.error("datumTokenizer is required");!u.queryTokenizer&&d.error("queryTokenizer is required");v=u.sorter;u.sorter=v?function(w){return w.sort(v)}:k.identity;u.local=k.isFunction(u.local)?u.local():u.local;u.prefetch=o(u.prefetch);u.remote=n(u.remote);return u};function o(u){var t;if(!u){return null}t={url:null,ttl:24*60*60*1000,cache:true,cacheKey:null,thumbprint:"",prepare:k.identity,transform:k.identity,transport:null};u=k.isString(u)?{url:u}:u;u=k.mixin(t,u);!u.url&&d.error("prefetch requires url to be set");u.transform=u.filter||u.transform;u.cacheKey=u.cacheKey||u.url;u.thumbprint=m+u.thumbprint;u.transport=u.transport?p(u.transport):d.ajax;return u}function n(u){var t;if(!u){return}t={url:null,cache:true,prepare:null,replace:null,wildcard:null,limiter:null,rateLimitBy:"debounce",rateLimitWait:300,transform:k.identity,transport:null};u=k.isString(u)?{url:u}:u;u=k.mixin(t,u);!u.url&&d.error("remote requires url to be set");u.transform=u.filter||u.transform;u.prepare=s(u);u.limiter=q(u);u.transport=u.transport?p(u.transport):d.ajax;delete u.replace;delete u.wildcard;delete u.rateLimitBy;delete u.rateLimitWait;return u}function s(z){var w,y,u;w=z.prepare;y=z.replace;u=z.wildcard;if(w){return w}if(y){w=t}else{if(z.wildcard){w=v}else{w=x}}return w;function t(B,A){A.url=y(A.url,B);return A}function v(B,A){A.url=A.url.replace(u,encodeURIComponent(B));return A}function x(B,A){return A}}function q(x){var t,y,w;t=x.limiter;y=x.rateLimitBy;w=x.rateLimitWait;if(!t){t=/^throttle$/i.test(y)?v(w):u(w)}return t;function u(A){return function z(B){return k.debounce(B,A)}}function v(A){return function z(B){return k.throttle(B,A)}}}function p(t){return function u(y){var v=d.Deferred();t(y,x,w);return v;function x(z){k.defer(function(){v.resolve(z)})}function w(z){k.defer(function(){v.reject(z)})}}}}();var j=function(){var p;p=window&&window.Bloodhound;function t(A){A=b(A);this.sorter=A.sorter;this.identify=A.identify;this.sufficient=A.sufficient;this.local=A.local;this.remote=A.remote?new c(A.remote):null;this.prefetch=A.prefetch?new g(A.prefetch):null;this.index=new a({identify:this.identify,datumTokenizer:A.datumTokenizer,queryTokenizer:A.queryTokenizer});A.initialize!==false&&this.initialize()}t.noConflict=function s(){window&&(window.Bloodhound=p);return t};t.tokenizers=f;k.mixin(t.prototype,{__ttAdapter:function u(){var C=this;return this.remote?B:A;function B(F,E,D){return C.search(F,E,D)}function A(E,D){return C.search(E,D)}},_loadPrefetch:function n(){var C=this,B,D;B=d.Deferred();if(!this.prefetch){B.resolve()}else{if(D=this.prefetch.fromCache()){this.index.bootstrap(D);B.resolve()}else{this.prefetch.fromNetwork(A)}}return B.promise();function A(E,F){if(E){return B.reject()}C.add(F);C.prefetch.store(C.index.serialize());B.resolve()}},_initialize:function q(){var C=this,A;this.clear();(this.initPromise=this._loadPrefetch()).done(B);return this.initPromise;function B(){C.add(C.local)}},initialize:function q(A){return !this.initPromise||A?this._initialize():this.initPromise},add:function y(A){this.index.add(A);return this},get:function o(A){A=k.isArray(A)?A:[].slice.call(arguments);return this.index.get(A)},search:function z(E,D,B){var C=this,A;A=this.sorter(this.index.search(E));D(this.remote?A.slice():A);if(this.remote&&A.length<this.sufficient){this.remote.get(E,F)}else{if(this.remote){this.remote.cancelLastRequest()}}return this;function F(H){var G=[];k.each(H,function(I){!k.some(A,function(J){return C.identify(I)===C.identify(J)})&&G.push(I)});B&&B(G)}},all:function v(){return this.index.all()},clear:function r(){this.index.reset();return this},clearPrefetchCache:function x(){this.prefetch&&this.prefetch.clear();return this},clearRemoteCache:function w(){e.resetCache();return this},ttAdapter:function u(){return this.__ttAdapter()}});return t}();return j});var MessageView={error:function(a){this._showMsg(a,"error")},success:function(a){this._showMsg(a,"success")},_showMsg:function(a,c){var b="<ul class='messagelist'><li class='"+c+"'>"+a+"</li></ul>";$(".sysMessage").html(b)},hide:function(){$(".sysMessage").html("")}};function LoginHandler(d,e,b,f,g,c,h,a){this.url=d;this.emailWidget=e;this.passwordWidget=b;this.errorViewContainer=f;this.errorTxt=this.errorViewContainer.find(".uiv2-err-text");this.loginBtn=g;this.resetBtn=c;this.loginContainer=h;this.tnc_id=a;this.init=function(){var j=this;this.loginContainer.on("keyup",function(k){if(k.which==13||k.keyCode==13){}});this.loginBtn.click(function(){_gaq.push(["_trackEvent","Login","Login Action","Click on submit"])});this.resetBtn.click(function(){j.reset();_gaq.push(["_trackEvent","Login","Login Action","Reset"])})};this.reset=function(){this.emailWidget.val("");this.passwordWidget.val("");this.errorTxt.html("");this.errorViewContainer.hide()};this._showErrMsg=function(j){this.errorViewContainer.show();this.errorTxt.text(j);_gaq.push(["_trackEvent","Login","Login Action","Failed attempt - "+j])};this._isValid=function(k,j){if(!k){this._showErrMsg("Email can't be empty");return false}if(!j){this._showErrMsg("Password can't be empty");return false}var l=this.emailWidget.get(0);if(l&&l.validity&&!l.validity.valid){this._showErrMsg("Please enter a valid email address");return false}if(typeof(this.tnc_id)!="undefined"&&!$(this.tnc_id).is(":checked")){this._showErrMsg("Please accept Terms & Conditions");return false}return true};this._disableLoginButton=function(){this.loginBtn.attr("disabled","disabled");this.loginBtn.val("Please wait...");$(".uiv2-login-button-block").css("width","77%")};this._enableLoginButton=function(){this.loginBtn.removeAttr("disabled");this.loginBtn.val("LOGIN");$(".uiv2-login-button-block").css("width","72%")};this.urlJoin=function(k,j){if(j.indexOf("/")==0){return k+j}return k+"/"+j};this.login=function(){this.errorTxt.html("");this._disableLoginButton();var l=$.trim(this.emailWidget.val());var j=this.passwordWidget.val();var p=this;var n="//"+window.location.host;var k=n+this.url;var o={is_ajax:"true",email:l,password:j,csrfmiddlewaretoken:csrf};var m=$.QueryString.next;if(m){o.next=m}if(this._isValid(l,j)){$.ajax({url:k,type:"post",data:o,success:function(q){if(q.success){p.errorViewContainer.hide();if(m){window.location.href=p.urlJoin(n,m)}else{window.location.reload()}_gaq.push(["_trackEvent","Login","Login Action","Successful login"])}else{var r=q.error;if(r){p.errorViewContainer.show();r=BBUtils.join_on(r,30,"<br />");p.errorTxt.html(r)}p._enableLoginButton();_gaq.push(["_trackEvent","Login","Login Action","Failed attempt - "+r])}},error:function(){p._showErrMsg("Sorry, but an unknown error occurred!");p._enableLoginButton()}})}else{this._enableLoginButton()}}}$.ajaxSetup({beforeSend:function(c,b){$("#id_loader").show();function a(d){var h=null;if(document.cookie&&document.cookie!==""){var g=document.cookie.split(";");for(var f=0;f<g.length;f++){var e=jQuery.trim(g[f]);if(e.substring(0,d.length+1)==(d+"=")){h=decodeURIComponent(e.substring(d.length+1));break}}}if(!h){h=$("#id_csrftkn").val()}return h}if(!((/^http:.*/.test(b.url))||(/^https:.*/.test(b.url)))){c.setRequestHeader("X-CSRFToken",a("csrftoken"))}},complete:function(b,a){$("#id_loader").hide()}});function set_city_cart_check(b,a){$(".loadShoplistMask1").hide();window.scrollTo(0,40);$.ajax({url:make_req_url("/basket/get-cart-item-difference/"),type:"post",data:{city_id:b,address_id:a,get_item_html:1}}).done(function(c){cart_items_html=c.items;if(c.show_popup){show_cart_items_popup(cart_items_html)}else{$("#shoplist-mask").hide();$(".loadShoplistMask1").hide();set_city(b,a);$(".changeCity-detail").hide()}})}function set_checkout_selected_address(b,a){$(".uiv2-selected").removeAttr("class");$(".uiv2-selected-span").css("visibility","hidden");$("#"+a).attr("class","uiv2-selected");$("#"+a).find(".uiv2-selected-span").css("visibility","visible")}function do_ajax_city(b){var a="";if(window.location.pathname.indexOf("auth")!==-1||window.location.pathname.indexOf("register")!==-1){a="/auth/set-city/"}else{a="/set-city/"}return $.ajax({url:a,type:"post",data:{city_id:b,csrfmiddlewaretoken:csrf},dataType:"json"})}function change_city(a){do_ajax_city(a).done(function(){location.reload();return true})}function show_cart_items_popup(a){$("#uiv2-multicity-change").show();$("#city_cart_popup").html(a);$("#shoplist-mask").show()}function cancel_city_change(){$("#uiv2-multicity-change").hide();$("#city_cart_popup").empty();$("#shoplist-mask").hide()}function set_city(c,b){checkout=$("#is_checkout").val();var a="";if(window.location.pathname.indexOf("auth")!==-1||window.location.pathname.indexOf("register")!==-1){a="/auth/set-city/"}else{a="/set-city/"}$.ajax({url:a,type:"post",data:{city_id:c,csrfmiddlewaretoken:csrf,address_id:b},dataType:"json",success:function(d){if(!d.success){show_alert("Failed to set city");$(".loadShoplistMask1").hide();$("#shoplist-mask").hide();return false}if(checkout){location.href="/co/checkout/"}else{$("#popuphelp").hide();$("#popuphelp").hide();$("#city-label").hide();_next=$("#id_next").val();if(_next=="/choose-city/"){_next="/"}if(_next==undefined||_next==null||_next==""){change_city_next=$("#id_current_path").val();if(change_city_next){_next=change_city_next}if(!_next){_next="/"}}window.location=_next;$(".uiv2-landing-outer, #shoplist-mask").fadeOut();return true}}})}function set_current_address(a,b){$.ajax({url:"/co/set-top-menu-address/",type:"post",data:{city_id:a,address_id:b},dataType:"json",success:function(c){if(c.success){$("#address_drop_down").empty().html(c.address_drop_down);$(".loadShoplistMask1").hide();$("#shoplist-mask").hide();var d=new LocationDropdown($("#uiv2-location-id"));if(c.normal_next_slot){normal_slot=c.normal_next_slot;$("#normal_slot").empty().html(normal_slot);$(".normal-slot").prop("title",normal_slot)}if(c.darkstore_next_slot){darkstore_next_slot=c.darkstore_next_slot;$("#express_slot").empty().html(darkstore_next_slot);$(".exp-slot").prop("title",darkstore_next_slot)}else{if(c.express_next_slot){express_slot=c.express_next_slot;$("#express_slot").empty().html(express_slot);$(".exp-slot").prop("title",express_slot)}else{$(".express_slot_container").hide()}}}}})}function init_delivery_dropdown(){var a=$(".uiv2-deliveryslot-link");var b=$(".uiv2-deliveryslot-dropdown");a.mouseenter(function(c){b.show();show_delivery_slots()}).mouseleave(function(c){b.hide()});b.bind("afterShow",function(){show_delivery_slots()})}var main_menu_open=false;$("body").click(function(a){if($(".add-to-shoplist").has(a.target).length==0){$(".add-to-shoplist").hide();$(".apply_sl").hide()}if($(".uiv2-location").has(a.target).length==0){$("#uiv2-location-id").removeClass("active")}if($(".featuredItem").has(a.target).length==0&&$(".add-to-shoplist").has(a.target).length==0){$(".featured-products-hover-box").hide()}});$(document).ready(function(){$("#shop-by-list-link").on({mouseover:function(){load_shopping_list_menu()},mouseout:function(){$(".uiv2-shop-by-list-dropdown").hide()}});$("#shop_list").on({mouseenter:function(){load_shopping_list_menu()},mouseleave:function(){$("#shoplist-menu").hide()}});compute_top_menu_css();var a;$("#sendSmsButton").on("click",function(){a=new AppDownloadWeb(1);a.sendDownloadSms()});state_changed=true;$("#numberForSms").focus(function(){$("#numberForSms").addClass("send_sms_focus")});$("#numberForSms").keyup(function(){$("#numberForSms").addClass("send_sms_focus")});$(".uiv2-basket-items").hide();$(".view_basket_checkout").click(function(){analyticsHandler.initParam();location.href="/basket/?ver=1"});$("body").click(function(e){if($(".add-to-shoplist").has(e.target).length==0){$(".add-to-shoplist").hide();$(".apply_sl").hide()}if($(".featuredItem").has(e.target).length==0&&$(".add-to-shoplist").has(e.target).length==0){$(".featured-products-hover-box").hide()}});$("#member_notifications").on("click touchend",function(){location.href="/member/notifications/"});$("#member_account").on("click touchend",function(){location.href="/member/"});$("#member_logout").on("click touchend",function(){location.href="/auth/logout/"});$(".uiv2-shopping-list-right-column").click(function(e){if($(".featuredItem").has(e.target).length==0&&$(".add-to-shoplist").has(e.target).length==0){$(".featured-products-hover-box").hide()}});if(!window.old_ui){$(document).click(function(f){if($(f.target).attr("class")!="icon icon-question-mark"){$(".uiv2-small-pop-up").hide();$(".uiv2-small-pop-up-reco").hide()}else{}});$(".uiv2-menu-bar").click(function(f){$(".uiv2-main-menu").toggle()});init_page_data();init_search();init_templates();init_globals();init_basket_hover();scratch_list_edit_handler();$("#current-year").html(new Date().getFullYear());init_delivery_dropdown();BBUtils.showIEPopupIfApplicable()}TouchHandler.init();var c=$(".uiv2-main-menu");$(".uiv2-menu-bar").hover(function(f){if(location.pathname!="/"||$(this).attr("id")=="sticky-shop"){if(!main_menu_clicked){c.show()}else{main_menu_clicked=false}}}).mouseleave(function(f){if(location.pathname!="/"||$(this).attr("id")=="sticky-shop"){setTimeout(function(){if(!$(".uiv2-main-menu:hover").length>0){c.hide()}if(location.pathname=="/"){$("#basket_menu").show()}},100)}});c.mouseleave(function(f){if(location.pathname!="/"||$(this).attr("id")=="sticky-shop"){c.hide()}}).mouseenter(function(f){});$(document).click(function(f){if($(f.target).hasClass("uiv2-menu-bar")){main_menu_clicked=true}});$(".uiv2-shop-link").on("mouseover",function(){$("#ss-logo1").hide();$("#ss-logo2").show()});$(".uiv2-shop-link").on("mouseout",function(){$("#ss-logo2").hide();$("#ss-logo1").show()});var d;var b=120;$(".uiv2-dropdown-column li.uiv2-submenu").hover(function(){$(this).find(".uiv2-sub-dropdown-column").removeClass("inactive");$(this).find(".uiv2-sub-dropdown-column").addClass("active");d=setTimeout(function(){$(".uiv2-sub-dropdown-column.active").show()},b)},function(){$(this).find(".uiv2-sub-dropdown-column").removeClass("active");$(this).find(".uiv2-sub-dropdown-column").addClass("inactive");setTimeout(function(){$(".uiv2-sub-dropdown-column.inactive").hide()},120);clearTimeout(d)})});function init_page_data(a){init_basket();update_next_slot()}function init_basket_hover(){set_basket_size(80,80,80);var a=$(".uiv2-your-basket");a.hover(function(){$(".uiv2-your-basket-dropdown").show(0,function(b){$(".scrollbar1").tinyscrollbar();$(".scrollbar1").tinyscrollbar_update()});a.addClass("hover");update_basket()},function(){$(this).stop()});a.mouseleave(function(){if(!checkout_clicked){$(".uiv2-your-basket-dropdown").hide();a.removeClass("hover")}});if(!BBUtils.is_touch_device()){$(document).click(function(b){if(checkout_clicked){checkout_clicked=false;$(".uiv2-your-basket-dropdown").hide();a.removeClass("hover")}});$(".uiv2-checkout-widget").click(function(b){if(!checkout_clicked){checkout_clicked=true;$(".uiv2-your-basket-dropdown").show(0,function(c){$(".scrollbar1").tinyscrollbar();$(".scrollbar1").tinyscrollbar_update()});a.addClass("hover");update_basket()}else{checkout_clicked=false;$(".uiv2-your-basket-dropdown").hide();a.removeClass("hover")}});a.click(function(b){b.stopPropagation()})}}function init_notifications(c){var b=c.has_more;var a=c.notifications;if(b){$(".uiv2-loggedin-user-link").css("background",'url("'+$("#id_static_url").val()+'uiv2/images/loggedin_error.png") no-repeat right 15px').css("background-position","94% 15px")}if(a){if(a.type=="popup"){$("#system-popup-message-subject").html(a.title);$("#system-popup-message-body").html(a.content);uiv2_show_popup("system-popup-message")}if(a.type=="show_message"){$("#show-message-subject").html(a.title);$("#show-message-body").html(a.content);$("#show-message").show();init_show_message()}if(a.type=="promo"){show_system_promo_poup(a.promo_id)}if(a.type=="evoucher"){show_system_evoucher_popup(a.title,a.description,a.code,a.expires)}}}function init_basket(){var a;if(page_data.num_items){var b=page_data.num_items;if(b.cart_no_items==1){a=b.cart_no_items+" item"}else{a=b.cart_no_items+" items"}$(".uiv2-num-basket-items").html(a);$(".uiv2-basket-items").show()}if(page_data.notifications){init_notifications(page_data.notifications)}}function show_system_evoucher_popup(d,c,b,a){$("#system-voucher-popup-message-subject").html(d);$("#system-voucher-popup-heading").html(c);$("#system-voucher-popup-code").html(b);$("#system-voucher-popup-expiry").html(a);uiv2_show_popup("system-voucher-popup-message")}function show_system_promo_poup(a){$.ajax({url:"/promo/get-available-promos/",type:"post",dataType:"json",data:{promo_id:a},success:function(c){if(c.success){var b=$("#system_promo_available_div");b.html(c.available_promos);uiv2_show_popup("system_popup_available_promos");$(".uiv2-popup-wrapper").height(b.height())}}})}function pop_up(k){var e=$(k);var h=$(document).height();var l=$(window).width();var f=$(window).height();var d=e.width();var m=e.height();var j=$(".uiv2-back-block").height(h).width(l);var b=(l-d)/2;var n=(f-m)/2;width=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;height=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var c=((width/2)-(d/2));var g=((height/2)-(m/2));if(m<f&&d<l){e.css("margin-left",c+"px");e.css("margin-top",g+"px")}}function Analytics(a,d,c,f,b,e){this.items=a;this.itemsKey="itemsKey";this.total=d;this.totalKey="totalKey";this.category=c;this.action=f;this.label=b;this.value=e;this.initParam=function(){if(!this.items){this.items=this.getLocalStorageData()[this.itemsKey]}if(!this.items){return}this.total=this.total.replace("Rs.","");this.total=truncate_str(this.total);this.action=location.pathname;this.label=this.items+" | "+this.total;this.logAnalytics()};this.logAnalytics=function(){if(ganalytics){ga("send","event",this.category,this.action,this.label,this.value)}else{console.log(this.category+","+this.action+","+this.label)}};this.checkLocalStorage=function(){try{localStorage.setItem("test",1);localStorage.removeItem("test");return true}catch(g){return false}};this.setLocalStorageData=function(){var g=this.checkLocalStorage();if(g){localStorage.setItem(this.itemsKey,this.items);localStorage.setItem(this.totalKey,this.total)}return g};this.getLocalStorageData=function(){var g=this.checkLocalStorage();if(g){var h={};h[this.itemsKey]=localStorage.getItem(this.itemsKey);h[this.totalKey]=localStorage.getItem(this.totalKey);return h}return g}}function update_basket(d,f,c){if(!cart_changed){return false}if(!d){d=1}var a=$(".cart-items-holder");var e='<li class="uiv2-cart-placeholder-msg"><p>Your basket is empty. Start shopping now!</p></li>';if(a.html()==e){a.empty()}var b=make_req_url("/basket/get/?ct="+d);$.ajax({url:b,cache:false,data:{},dataType:"json",success:function(o){var m;if(o.cart_no_items==1){m=o.cart_no_items+" item"}else{m=o.cart_no_items+" items"}$(".uiv2-num-basket-items").html(m);$(".uiv2-basket-saving").empty().html("<span class='WebRupee'>Rs.</span> "+truncate_str(o.cart_saving));if(o.cart_saving=="0.00"){$(".uiv2-basket-items-saved").hide()}else{$(".uiv2-basket-items-saved").show()}if(c==ADD_TO_CART_SOURCES.AUTO_SEARCH||c==ADD_TO_CART_SOURCES.AUTO_SEARCH_AD){$("#is_promo").val("0")}if(f){if($("#is_promo").val()!="1"){var j="Successfully added <strong>"+f+"</strong> to the basket";$.notifyBar({cls:"success",html:j})}}if(c==ADD_TO_CART_SOURCES.AUTO_SEARCH||c==ADD_TO_CART_SOURCES.AUTO_SEARCH_AD){$("#is_promo").val("1");if(typeof(refresh)!="undefined"){refresh()}}$(".uiv2-items-total-delivery_charge").empty();$(".uiv2-items-sub-total").empty();$(".uiv2-items-total-cost").empty().html("<b>Total: <span class='WebRupee'>Rs.</span> "+truncate_str(o.cart_total)+"</b>");var h=o.delivery_limit||1000;if(parseFloat(o.cart_total)>=parseFloat(h)){$(".uiv2-get-free-delivery").empty().html("<p>This basket is eligible for <strong>Free Home Delivery!<strong></p>");$(".uiv2-items-total-delivery_charge").empty();$(".uiv2-items-sub-total").empty()}else{var l=parseFloat(o.cart_total);var n=parseFloat(h-l).toFixed(2);if(l>0){var k=parseFloat(o.delivery_charge)+l;$(".uiv2-items-total-cost").empty().html("<b>Total: <span class='WebRupee'>Rs.</span> "+truncate_str(k)+"</b>");$(".uiv2-items-sub-total").empty().html("Sub Total: <span class='WebRupee'>Rs.</span> "+truncate_str(l));$(".uiv2-items-total-delivery_charge").empty().html("Delivery Charges: <span class='WebRupee'>Rs.</span> "+truncate_str(o.delivery_charge))}$(".uiv2-get-free-delivery").empty().html("<p>Shop for <strong><span class='WebRupee'>Rs.</span> </strong>"+truncate_str(n.toString())+" or more and get free delivery!")}if(!o.items||o.items.length==0){a.html(e);set_basket_size(80,80,80)}else{if(o.items&&(o.items.length==1||o.items.length==2)){a.html(cartitems_template(o));var g=a.actual("height");set_basket_size(g,g,g)}else{a.html(cartitems_template(o));set_basket_size(250,250,252)}}init_view_basket(max_qty,d,"basket-popup",".cart-items-holder ");$(".cart-items-holder .uiv2-remove-product").each(function(){$(this).click(function(){remove_from_cart($(this).attr("id").split("_")[2],d,null,"remove-from-cart","basket-popup")})});analyticsHandler=new Analytics(o.cart_no_items,o.cart_total,"view_basket","","","1");cart_changed=false;if(o.cart_no_items>0){pdid=o.items[0].pid;send_vizury_tags("shopping_cart",pdid,o.cart_total)}updateEngagementStoreFromCart()}});return false}function set_basket_size(b,c,a){$(".scrollbar1").height(b);$(".scrollbar1 .viewport").height(c);$(".scrollbar").height(a);$(".scrollbar1").tinyscrollbar_update()}function init_globals(){static_url=$("#id_static_url").val();max_qty=$("#id_max_qty").val();csrf=$("#id_csrftkn").val();ganalytics=($("#flag-gana").val()=="True");bb_analytics=($("#flag-ana").val()=="True")}function init_templates(){autosearch_template=Handlebars.compile($("#tmplt-autosearch").html(),{noEscape:true});cartitems_template=Handlebars.compile($("#tmplt-cart-items").html(),{noEscape:true});$(".cart-items-holder").html(cartitems_template({}))}function make_req_url(a){return(window.location.protocol=="https:"?"/auth":"")+a}function init_autosearch_add_to_cart_buttons(){$(".uiv2-a2c-autosearch").click(function(){if($(this).hasClass("auto-ad")){var c="Auto-ad"}var b=$(this).attr("id").split("-")[2];var a=$(this).parent().parent();var f=parseInt(a.find("div.uiv2-search-qty-widget").find("input").val());var d=a.find("input[name='cart-item-mode']").val();if(!f||f==1){f=$("#uiv2-banner-qty-"+b);if(f.length==0){f=1}else{f=parseInt(f.val());if(!f){f=1}}}var e=$("#uiv2-pdesc-"+b).val();if(!is_valid_qty(f)){show_alert("Invalid Quantity");return false}if(c=="Auto-ad"){add_to_basket(b,f,1,e,ADD_TO_CART_SOURCES.AUTO_SEARCH_AD,d)}else{add_to_basket(b,f,1,e,ADD_TO_CART_SOURCES.AUTO_SEARCH,d)}})}var current_as_suggestion=null;function do_auto_complete_search(b,a){var d=a||$("#autosearch_url").val();var c=$(".uiv2-search-dropdown-block");var e=$(".uiv2-search-dropdown-block");if(b.length>=3){current_as_suggestion=null;$.ajax({url:make_req_url(d),dataType:"json",cache:false,data:{term:b,city_id:$("#city_id").val()},success:function(q){data=q;member_stores=q.member_stores;q=q.results;q.member_stores=member_stores;q_term=q.term;ab_mode=data.ab_mode;is_express_valid_address=data.is_express_valid_address;if(ab_mode=="contextual"){q.ab_mode=1}else{q.ab_mode=0}for(i in q.data){var r=q.data[i];var C=false;if(r){r.store_details_to_use={};for(var j in r.store_details){var n=r.store_details[j];if(!("fi_id" in n)){C=true;break}var x=n.fi_id;var f=n.fi_type;availability=r.store_details[j]["availability"];if(member_stores[j]&&member_stores[j][x]&&availability==1){r.store_details_to_use[f]={next_slot:member_stores[j][x]["eta"],fi_type:f}}}if(C){continue}if(q.ab_mode!=1){if("darkstore-express" in r.store_details_to_use&&"normal" in r.store_details_to_use){delete r.store_details_to_use.normal}}}}var h=$("#id_autosearch_list_container");var v=$("#uiv2-no-result");var l=$("#scrollbar2");var k=$("#scrollbar2 .viewport");var B=false;var m=q.term;if((q.top_searches&&q.top_searches.length>0)&&(!q.data||q.data.length==0)){v.html("No results found for <i>"+q.term+"</i>.");q.top_searches=BBUtils.column_major_chunks(q.top_searches,4);B=true}else{B=false;if(!q.alt_suggestions){v.html('Showing results for <i>"'+q.term+'"')}else{if(q.alt_suggestions){if(q.data){v.html('No results found for "'+q.term+'"<BR>Instead showing suggested products for: "'+q.alt_term+'"')}else{v.html('No results found for "'+q.term+'"<BR>Perhaps you may be interested in: "'+q.alt_term+'"')}}else{v.html('We do not understand "'+q.term+'".<BR>Perhaps you may be interested in')}}}h.empty();if(q.alt_suggestions&&q.alt_pb_pc_res){$("#id_alt_suggestions").show();$("#id_alt_list_container").show()}$(autosearch_template(q)).appendTo(h);c.show();var A=$("#id_search_view_all_link");if(B){e.css("height","auto");l.css("height","auto");k.height(216);A.html("VIEW COMPLETE SHOP");A.attr("href","/product/all-categories/")}else{e.height(452);l.height(378);k.height(378);if(q.alt_suggestions&&(q.alt_pb_pc_res||q.data)){$("#id_search_view_all_link").html("VIEW COMPLETE SHOP");$("#id_search_view_all_link").attr("href","/product/all-categories/")}else{A.html("VIEW ALL PRODUCTS")}}c.mouseleave(function(){c.hide()});$(".scrollbar1").tinyscrollbar();$("#scrollbar2").tinyscrollbar();if(q.suggestions){if(q.suggestions.brands.length==0&&q.suggestions.terms.length==0&&q.suggestions.categories.length==0){$(".uiv2-product-search-list-wrap").css("border-right","1px solid #5d5958");$(".uiv2-product-search-list-wrap").css("border-left","0 none")}var s=$("#uiv2-search-brands");var t=$("#uiv2-search-categories");var y=$("#uiv2-search-terms");var w=$("#uiv2-promo-ads");var o=$("#id_common_search_container");var u=$("#id_popular_brand_container");var g=$("#id_common_categories");var z=$("#auto_promo_ad");if(q.suggestions.brands.length||q.suggestions.categories.length||q.suggestions.terms.length){$(".uiv2-product-rightlist-wrap").show();$("#id_more_suggestion_labels").show();$(".uiv2-search-dropdown-block").css("width","785px");s.empty();if(q.suggestions.brands.length){u.show();$.each(q.suggestions.brands,function(p,D){if(p<4){$('<li> <a href="'+D.url+'?nc=ascs">'+D.name+"</a></li>").appendTo(s)}})}else{u.hide()}t.empty();if(q.suggestions.categories.length){g.show();$.each(q.suggestions.categories,function(p,D){if(p<4){$('<li> <a href="'+D.url+'?nc=ascs">'+D.name+"</a></li>").appendTo(t)}})}else{g.hide()}y.empty();if(q.suggestions.terms.length){o.show();$.each(q.suggestions.terms,function(D,p){if(D<5){url="/ps/?q="+p.url+"&nc=ascs";$('<li> <a href="'+url+'" >'+p.term+"</a></li>").appendTo(y)}})}else{o.hide()}w.empty();if(q.suggestions.ads||q.suggestions.discounts){$("#auto_promo_ad").html(data.sl_menu);z.show()}else{z.hide()}}else{$(".uiv2-search-dropdown-block").css("width","auto");$(".uiv2-product-rightlist-wrap").hide();$("#id_more_suggestion_labels").hide()}}if(q.correction==null||q.correction==undefined||q.correction.length==0){}else{if(q.alt_suggestion==true&&q.data){v.html('No Results found for <i>"'+q.term+'"</i>. Instead showing results for <i>"'+q.correction+'"</i>')}}if(q.correction&&q.correction.length>1){current_as_suggestion=q.correction}if(q.data.length>=AUTO_SEARCH_LIMIT){A.show();setTimeout(function(){var p="/ps/?nc=as&q="+encodeURIComponent(b);A.attr("href",p)},60)}if(ganalytics){if(data.results.alt_suggestions){_gaq.push(["_trackEvent","search","Suggestion",b,data.results.data.length])}else{_gaq.push(["_trackEvent","search","auto-search",b,q.data.length])}}else{if(data.results.alt_suggestions){console.log(["search","suggestion",b,q.data.length])}else{console.log(["search","auto-search",b,q.data.length])}}init_autosearch_add_to_cart_buttons()}})}else{if(b.length==0){c.hide()}}}function init_search(){var a=$("#id_q");a.click(function(){if(autosearch_results>1){$(".uiv2-search-dropdown-block").show()}});a.focus(function(){if(a.val()=="Search for over 18,000 products in 7 languages, e.g. bhindi, vendakai..."){a.val("");a.css("borderColor","#005576");a.css("color","#333333")}});a.blur(function(){if(a.val()==""){a.val("Search for over 18,000 products in 7 languages, e.g. bhindi, vendakai...");a.css("borderColor","#BEBCBD");a.css("color","#B2B2B2")}});var b=$(".uiv2-search-dropdown-block");b.mouseleave(function(){b.hide()});$(document).click(function(d){var c=$(d.target);if(!(c.get(0)==b.get(0)||b.find(c).exists())&&b.is(":visible")){b.hide()}});a.typeWatch({callback:do_auto_complete_search,wait:300,captureLength:3});$(".scrollbar1").tinyscrollbar();$("#scrollbar2").tinyscrollbar()}function validate_email(b){if(b==""||b==null||b==undefined){return false}var a=b.indexOf("@");var c=b.lastIndexOf(".");if(a<1||c<a+2||c+2>=b.length){return false}return true}function get_qty(a){var b=parseInt($("#uiv2-qty-"+a).val());if(!b||b==1){b=$("#uiv2-banner-qty-"+a);if(b.length==0){b=1}else{b=parseInt($("#uiv2-banner-qty-"+a).val());if(!b){b=1}}}return b}function set_pd_cart_nav_ctx(){$(".a2c").off("click");init_a2c_for_selector(".uiv2-product-detail-content .a2c",ADD_TO_CART_SOURCES.PD);init_a2c_for_selector(".category_rp .a2c",ADD_TO_CART_SOURCES.PD_REL_CAT_PROD);init_a2c_for_selector(".related_brand .a2c",ADD_TO_CART_SOURCES.PD_REL_BRAND);init_a2c_for_selector(".related_top_cat .a2c",ADD_TO_CART_SOURCES.PD_TOP_LEVEL_CAT);init_a2c_for_selector(".related_store_offers .a2c",ADD_TO_CART_SOURCES.PD_STORE);init_a2c_for_selector(".also_bought .a2c",ADD_TO_CART_SOURCES.PD_ALSO_BOUGHT);init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD,".uiv2-product-detail-content ");init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD_REL_CAT_PROD,".category_rp ");init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD_REL_BRAND,".related_brand ");init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD_TOP_LEVEL_CAT,".related_top_cat ");init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD_STORE,".related_store_offers ");init_view_basket(max_qty,1,ADD_TO_CART_SOURCES.PD_ALSO_BOUGHT,".also_bought ")}function update_promo_page(a){$.ajax({url:"/promo/add-promo-product-to-basket/",type:"post",dataType:"json",data:{promo_id:a},success:function(b){if(b.success){$("#promoCartDetails").html(b.promo_cart_html)}}})}function qty_changed(f,k,d,g,j,a){if(!g){var e=$("#reserved_qty_"+f).text();var l=parseInt(k)>parseInt(e);if(l){var c=$("#p_name_"+f).text();show_alert("We are sorry, but you can only order up to "+e+" quantity of "+c);$("#p_"+f).val(e);k=e}else{if(k===""){k=1}}}var b="";var h="";if(a==ADD_TO_CART_SOURCES.ALTERNATE_PRODUCT){b=$("#id_q").val();h="SUGGESTION"}else{if(a==ADD_TO_CART_SOURCES.AUTO_SEARCH||a==ADD_TO_CART_SOURCES.AUTO_SEARCH){b=$("#id_q").val();h="AUTO"}else{if(location.pathname=="/ps/"){b=$("#id_q").val();h="PS"}}}sid="";if(typeof(facets)!="undefined"&&facets.sid){sid=facets.sid}is_express_tab=$("#express_tab_"+f).val();cartitem_mode=$.trim($("#cartitem_mode_"+f).val());$.ajax({url:"/basket/qty-update/",type:"post",data:{prod_id:f,qty:k,cart_type:d,is_list:g,term:b,term_source:h,sid:sid,is_express_tab:is_express_tab,cartitem_mode:cartitem_mode,},dataType:"json",success:function(n){if(n.success===false&&n.added===false){show_alert(n.mesg);var m=n.mesg.replace(/\D+/g,"");if(m){$("#p_"+f).val(m);$("#p_"+f).trigger("blur")}}else{if(typeof(refresh)!="undefined"){refresh()}promo_id=$("#cart_promotion_id").val();if(promo_id){update_promo_page(promo_id)}}if(n.success==true){cart_changed=true;if(a=="basket-popup"){update_basket(d,null,ADD_TO_CART_SOURCES.UPDATE_QTY)}if(n.basket_widget!="undefined"){update_basket_widget(f,d,n.basket_widget,true,a)}if(ganalytics){_gaq.push(["_trackEvent",j,a,f+"."+n.pslug,k])}else{console.log(j,a,f+"."+n.pslug,k)}}}})}function remove_from_cart(b,e,a,c,d){is_express_tab=$("#express_tab_"+b).val();sid="";if(typeof(facets)!="undefined"&&facets.sid){sid=facets.sid}$.ajax({url:make_req_url("/basket/del-item/"),type:"post",data:{sid:sid,is_express_tab:is_express_tab,prod_id:b,cart_type:e,is_list:a},dataType:"json",success:function(f){if(!f.success){show_alert("Error removing product from basket!")}else{cart_changed=true;if(d=="basket-popup"){update_basket(1,null,ADD_TO_CART_SOURCES.UPDATE_QTY)}else{init_page_data();init_basket()}$("#id_prow_"+b).remove();if(ganalytics){_gaq.push(["_trackEvent",c,d,b+"."+f.pslug,1])}else{console.log(c,d,b+"."+f.pslug,1)}promo_id=$("#cart_promotion_id").val();if(promo_id){update_promo_page(promo_id)}if(f.basket_widget!="undefined"){update_basket_widget(b,e,f.basket_widget,false,d)}}if(typeof(refresh)!="undefined"){refresh_impulse_menu();refresh()}if(window.remove_product_success_callback!==undefined){window.remove_product_success_callback()}return false}})}function update_basket_widget(a,e,d,b,c){$("li[name='widget_"+a+"'] .uiv2-add-to-basket").html(d);if(b){init_view_basket(max_qty,e,c,'li[name="widget_'+a+'"] ');if($('li[name="widget_'+a+'"].uiv2-selected-product').length==0){$('li[name="widget_'+a+'"]').addClass("uiv2-selected-product")}}else{init_a2c_for_selector('li[name="widget_'+a+'"] .a2c');if($('li[name="widget_'+a+'"].uiv2-selected-product').length>=1){$('li[name="widget_'+a+'"]').removeClass("uiv2-selected-product")}}is_pd_page=$("#a2c-pd-"+a).val();if(is_pd_page==1){$('li[name="widget_'+a+'"]').removeClass("uiv2-selected-product")}}function add_to_basket(k,l,e,j,h,a){var b;var f=get_add_to_basket_nav_ctx(h);var c="";var g="";try{b=$("#p"+k).attr("class").split(" ")[1].split("_")[1]}catch(d){b="0"}if(h==ADD_TO_CART_SOURCES.ALTERNATE_PRODUCT){c=$("#id_q").val();g="SUGGESTION"}else{if(h==ADD_TO_CART_SOURCES.AUTO_SEARCH||h==ADD_TO_CART_SOURCES.AUTO_SEARCH_AD){g="AUTO";if(current_as_suggestion!=null){c=current_as_suggestion}else{c=q_term}}else{if(location.pathname=="/ps/"){g="PS";c=$("#q_term_products").val()}}}sid="";if(typeof(facets)!="undefined"&&facets.sid){sid=facets.sid}is_express_tab=$("#express_tab_"+k).val();if(h==ADD_TO_CART_SOURCES.AUTO_SEARCH&&a){cartitem_mode=a}else{cartitem_mode=$.trim($("#cartitem_mode_"+k).val())}$.ajax({url:make_req_url("/basket/add/"),cache:false,type:"post",data:{prod_id:k,qty:l,ru:window.location.pathname+window.location.search+"&spn="+b,cart_type:e,nc:f,term:c,term_source:g,sid:sid,csrfmiddlewaretoken:csrf,is_express_tab:is_express_tab,cartitem_mode:cartitem_mode,},dataType:"json",success:function(n){if(!n.success){if(!n.added){show_alert(n.mesg)}else{show_alert("Error adding product to cart!")}return false}else{promo_id=$("#cart_promotion_id").val();if(promo_id){update_promo_page(promo_id);if(ga){ga("set","metric2",1)}}if(window.add_product_success_callback!==undefined){window.add_product_success_callback(k)}}updateEngagementStore(k,l);if(window.location.pathname=="/member/smart-basket/"){h=ADD_TO_CART_SOURCES.SMART_BASKET;ga("set","metric3",1)}if(window.location.pathname=="/member/recommendations/"){h=ADD_TO_CART_SOURCES.RECOMMENDATIONS}if(h==ADD_TO_CART_SOURCES.DYF&&ga){ga("set","metric4",1)}if(window.location.pathname.search("order")!=-1&&window.location.pathname.search("order-detail")!=-1&&ga){ga("set","metric5",1)}if(h==ADD_TO_CART_SOURCES.FEATURED_PRODUCT&&ga){ga("set","metric6",1)}page_data.num_items["cart_no_items"]=n.num_items;init_basket();cart_changed=true;if(!j){if(last_add_prod!==null&&last_add_prod!==undefined&&h!=ADD_TO_CART_SOURCES.UPDATE_QTY){j=$("#prod-"+last_add_prod+"-desc").val()}}if(j){mesg="Successfully added <strong>"+j+"</strong> to the basket"}else{mesg="Successfully added the product to the basket"}$.notifyBar({cls:"success",html:mesg});var p="";if(h==ADD_TO_CART_SOURCES.AUTO_SEARCH){p="auto-search"}else{if(h==ADD_TO_CART_SOURCES.ALTERNATE_PRODUCT){p="suggestion"}else{if(h==ADD_TO_CART_SOURCES.AUTO_SEARCH_AD){p="auto-ad"}else{if(h==ADD_TO_CART_SOURCES.DYF){p="dyf"}else{if(h==ADD_TO_CART_SOURCES.PROMO_POPUP){p="promo-popup"}else{if(h==ADD_TO_CART_SOURCES.FEATURED_PRODUCT){p="fp"}else{if(h==ADD_TO_CART_SOURCES.SMART_BASKET){p="smart-basket"}else{if(h==ADD_TO_CART_SOURCES.RECOMMENDATIONS){p="recommendation"}else{if(h==ADD_TO_CART_SOURCES.IMPULSE_BUYING){p="impulse-buying"}else{if(h==ADD_TO_CART_SOURCES.ENGAGEMENT_STORE){p=engagementStoreName+" | engagement_store"}else{if(f=="n"){p=location.pathname}else{p=f}}}}}}}}}}}var o=location.pathname;if(o.search("all-offers")==1){p=location.pathname}var m=k+"."+n.pslug;if(ganalytics&&(h!=ADD_TO_CART_SOURCES.IMPULSE_BUYING)){_gaq.push(["_trackEvent","add-to-cart",p,m,parseInt(l)])}else{console.log("add-to-cart",p,m,parseInt(l))}if(n.basket_widget!="undefined"){update_basket_widget(k,n.cart_type,n.basket_widget,true,p)}if(h==ADD_TO_CART_SOURCES.AUTO_SEARCH||h==ADD_TO_CART_SOURCES.AUTO_SEARCH_AD||h=="pd"||h=="pd-cat"||typeof(h)=="undefined"){send_vizury_tags("shopping_cart",k)}return false}});return false}function see_child(b,a){$("#"+b).hide();$("#"+a).show()}function uiv2_show_popup(d,c,b){if(c==undefined||c==null){c=true}var a=$("#"+d);if(b==null||b==undefined){b=a.height()}var h=$(document).width();var f=$(document).height();var g=$(".uiv2-background-shade");g.height(f);g.width(h);a.fadeIn("slow");g.fadeIn("slow");$(".uiv2-location").hide();$(".uiv2-popupclose").click(function(){uiv2_hide_popup(d)});if(c){$(document).keyup(function(j){if(j.keyCode==27){uiv2_hide_popup(d)}})}$(".uiv2-popup-wrapper").height(b);if(d=="system-popup-message"){$(".uiv2-popup-wrapper").removeAttr("style")}if(d=="uiv2-new-address-form"){init_newaddress_autocomplete()}}function uiv2_show_small_popup(a,b){$("#"+a).hover(function(){$("#"+b).toggle()})}function submit_edit_address(){init_edit_address_submit();$("#frmEditAddress").submit()}function isNumberKey(b){var a=(b.which)?b.which:b.keyCode;return !(a>31&&(a<48||a>57))}function set_utm_cookies(){var a=2;if($.QueryString.utm_source){$.cookie("_bb_usource",$.QueryString.utm_source,{path:"/",expires:a})}if($.QueryString.utm_medium){$.cookie("_bb_umedium",$.QueryString.utm_medium,{path:"/",expires:a})}if($.QueryString.utm_term){$.cookie("_bb_uterm",$.QueryString.utm_term,{path:"/",expires:a})}if($.QueryString.utm_campaign){$.cookie("_bb_ucampaign",$.QueryString.utm_campaign,{path:"/",expires:a})}if($.QueryString.utm_content){$.cookie("_bb_ucontent",$.QueryString.utm_content,{path:"/",expires:a})}}function parse_utm_cookies(){if($.QueryString.utm_campaign){set_utm_cookies();return}if(!$.cookie("_bb_usource")&&$.QueryString.utm_source){set_utm_cookies()}}function navigateTo(a){window.location=a}function init_close_autovoucheroffer_dialog(){$("body").bind("click",function(a){if(!$(a.target).is(".ui-dialog, a")&&!$(a.target).closest(".ui-dialog").length){$(".pdialog").dialog("close");$(".spicInAutovoucher").dialog("close")}})}function is_valid_qty(b){var a=/^\d+$/.test(b);if(!isNaN(b)&&a&&parseInt(b,10)>0){return true}else{return false}}function add_to_basket_from_dyf(a,c){if(!c){c=1}var d=$("#p"+a+"_qty").val();if(!is_valid_qty(d)){show_alert("Invalid Quantity");return false}var b=$("#dyf_"+a).find("a.skuLnk").attr("title");add_to_basket(a,d,c,b,ADD_TO_CART_SOURCES.DYF);return true}function add_to_cart(a,c,b){var d=$("#p"+a+"_qty").val();if(!is_valid_qty(d)){show_alert("Invalid Quantity");return false}add_to_basket(a,d,c,null,b);last_add_prod=a;return true}function init_display_child_product(a){$(".moreSizes").each(function(){$(this).click(function(){pid=$(this).attr("id").split("_")[1];$(".pdialog").each(function(b){if($(this).dialog("isOpen")&&!$(b.target).is(".ui-dialog, a")&&!$(b.target).closest(".ui-dialog").length){$(this).dialog("close")}});$("#children_"+pid+"_more").dialog({autoOpen:true,closeOnEscape:true,draggable:false,resizable:false,minWidth:"200px",minHeight:"200px",position:{my:"left top",at:"left bottom",of:$(this)},open:function(){$(".ui-dialog").css("height","auto");$(".ui-dialog").css("width","auto");$(".ui-dialog").css("minWidth","200px");$(".ui-dialog").css("z-index","950");$(".ui-dialog-titlebar").css("background","#cb2127");$(".ui-widget-content").css("background","#eeeeee");$(".ui-icon").css("background-image","url("+a+"css/images/ui-icons_ffffff_256x240.png?v=14)")}})})})}function init_a2c(b,a){max_qty=b;init_a2c_for_selector(".a2c",a)}function init_a2c_for_selector(a,b){$(a).each(function(){$(this).click(function(){var c=$(this).attr("id").split("_");if($("#featured"+c[1]).val()=="1"){b=ADD_TO_CART_SOURCES.FEATURED_PRODUCT;add_to_cart(c[1],c[2],b)}else{if(b==ADD_TO_CART_SOURCES.DYF){add_to_basket_from_dyf(c[1],c[2])}else{add_to_cart(c[1],c[2],b)}}})})}function show_delivery_slots(){if(delivery_slots_data){return false}$.ajax({url:make_req_url("/order/get-next-slots/"),type:"get",success:function(b){delivery_slots_data=b;slots_info=$("#uiv2-deliverslots-holder");slots_info.empty();for(var a=0;a<delivery_slots_data.length;a++){if(a==0){$("#uiv2-next-avail-slot").html(delivery_slots_data[a])}$("<li>"+delivery_slots_data[a]+"</li>").appendTo(slots_info)}}})}function update_next_slot(){express_slot=page_data.express_next_slot;normal_slot=page_data.normal_next_slot;darkstore_next_slot=page_data.darkstore_next_slot;if(normal_slot){$("#normal_slot").empty().html(normal_slot);$(".normal-slot").prop("title",normal_slot);if($("#uiv2-next-avail-slot")){$("#uiv2-next-avail-slot").empty().html(normal_slot);$(".normal-slot").prop("title",normal_slot)}}if(darkstore_next_slot){$("#express_slot").empty().html(darkstore_next_slot);$(".exp-slot").prop("title",darkstore_next_slot)}else{if(express_slot){$("#express_slot").empty().html(express_slot);$(".exp-slot").prop("title",express_slot)}else{$(".express_slot_container").hide()}}}function init_display_autovoucheroffers(){$(".autovoucheroffer").click(function(){if($(".autovoucheroffer").length>1){$(".autovoucheroffer").each(function(a){if($(this).hasClass("autovoucher"+autovoucherhomenumber)){if($(this).dialog("isOpen")&&!$(a.target).is(".ui-dialog, a")&&!$(a.target).closest(".ui-dialog").length){$(this).dialog("close")}}})}else{$(".autovoucheroffer").each(function(a){if($(this).dialog("isOpen")&&!$(a.target).is(".ui-dialog, a")&&!$(a.target).closest(".ui-dialog").length){$(this).dialog("close")}})}$(".spicInAutovoucher.autovoucher"+autovoucherhomenumber).dialog({autoOpen:true,closeOnEscape:true,draggable:false,resizable:false,maxWidth:"300px",maxHeight:"300px",position:{my:"top",at:"bottom",of:$(this)},open:function(){$(".ui-dialog").css("height","auto");$(".ui-dialog").css("width","300px");$(".ui-dialog").css("minWidth","200px");$(".ui-dialog").css("z-index","950");$(".ui-dialog-titlebar").css("background","#cb2127");$(".ui-widget-content").css("background","#eeeeee")}})})}function get_add_to_basket_nav_ctx(a){var b="n";if(a){switch(a){case ADD_TO_CART_SOURCES.DYF:b="dyf";break;case ADD_TO_CART_SOURCES.AUTO_SEARCH:b="auto-search";break;case ADD_TO_CART_SOURCES.AUTO_SEARCH_AD:b="auto-ad";break;case ADD_TO_CART_SOURCES.PD_ALSO_BOUGHT:b="pd-ab";break;case ADD_TO_CART_SOURCES.PD_REL_BRAND:b="pd-brand";break;case ADD_TO_CART_SOURCES.PD_REL_CAT_PROD:b="pd-cat";break;case ADD_TO_CART_SOURCES.PD_STORE:b="pd-offers";break;case ADD_TO_CART_SOURCES.PD_TOP_LEVEL_CAT:b="pd-tlc";break;case ADD_TO_CART_SOURCES.PD:b="pd";break;case ADD_TO_CART_SOURCES.ALTERNATE_PRODUCT:b="suggestion";break}}return b}function init_view_basket(d,c,b,a){if(!b){b=location.pathname}if(!a){a=""}$(a+".text-change-qty-search-popup").each(function(){$(this).off("focusout");$(this).focusout(function(){qty_changed($(this).attr("id").split("_")[1],$(this).val(),c,null,"change-quantity",b)})});$(a+".icon-increase-qty-search-popup").each(function(){$(this).off("click");$(this).click(function(){qty_changed($(this).prev().attr("id").split("_")[1],parseInt($(this).prev().val())+1,c,null,"incr-quantity",b)})});$(a+".icon-decrease-qty-search-popup").each(function(){$(this).off("click");$(this).click(function(){var e=parseInt($(this).next().val())-1;var f=$(this).next().attr("id").split("_")[1];if(e>0){qty_changed(f,e,c,null,"decr-quantity",b)}else{remove_from_cart(f,c,null,"remove-from-cart",b)}})});$(a+".uiv2-removerow").each(function(){$(this).off("click");$(this).click(function(){remove_from_cart($(this).attr("id").split("_")[1],c,null,"remove-from-cart",b)})})}var NotifyPopUp={hideNotifyPopUp:function(){var a=$("#notify-popup");var b=$("#shoplist-mask");a.fadeOut("slow");b.fadeOut("slow");localStorage.removeItem("notify_non_login");localStorage.removeItem("prod")},showNotifyPopup:function(a,c){if(!c){path=location.pathname+location.search;location.href="/auth/login/?next="+path;localStorage.setItem("path",path);localStorage.setItem("notify_non_login",true);localStorage.setItem("prod",a)}else{var b=$("#notify-popup");var d=$("#shoplist-mask");b.fadeIn("slow");d.fadeIn("slow");NotifyPopUp.bindNotifyClick(a,c)}},bindNotifyClick:function(a,b){NotifyPopUp.cancel=$("#cancel_me");NotifyPopUp.notify=$("#notify_me");NotifyPopUp.is_member=b;NotifyPopUp.productId=a;NotifyPopUp.cancel.click(function(){NotifyPopUp.hideNotifyPopUp()});NotifyPopUp.notify.click(function(){NotifyPopUp.sendNotify()})},sendNotify:function(){var a=$("input[name=radio_sl]:checked").val();data={product_id:NotifyPopUp.productId,notify_type:a};NotifyPopUp.sendRequest("/product/call-notify-popup",data,"post")},sendRequest:function(a,c,b){c.csrfmiddlewaretoken=csrf;$.ajax({url:a,data:c,type:b}).done(function(d){$.notifyBar({html:d,position:"top",cssClass:"success"});NotifyPopUp.hideNotifyPopUp()})},showOnReturn:function(c){var b=localStorage.getItem("notify_non_login");var a=localStorage.getItem("prod");if(b&&c){NotifyPopUp.showNotifyPopup(a,true);localStorage.removeItem("notify_non_login");localStorage.removeItem("path");localStorage.removeItem("prod");return true}else{localStorage.removeItem("notify_non_login");localStorage.removeItem("path");localStorage.removeItem("prod")}return false}};function sl_popup(a,c,b,d){if(a=="close"){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide()}else{$.ajax({url:"/order/sl-popup/",type:"post",data:{shoplist_type:c,slug:b,order_id:$("#order_detail_popup").val()},dataType:"json",success:function(e){if(e.success){if(!e.logged_in){location.href="/auth/login/?next="+encodeURIComponent(window.location.pathname)}$("#popup-content").html(e.sl_popup_html);uiv2_show_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").show();if(d){$(".uiv2-shoplist-select").addClass("order-detail-copy")}else{$(".uiv2-shoplist-select").dropkick()}$("#dk_container_sl_names").css("height","26px")}}})}}function delete_shoplist_popup(a,b){show_confirm("Are you sure want to delete this list?",function(){var c=$("#"+a+"_shoppingListName").html();$.ajax({url:"/msl/delete-list/",type:"post",dataType:"json",data:{slug:a},success:function(d){if(d.success){$("#sl_"+b).remove();set_shoplist_gae($("#shoplist-gae-type").val(),c," - Delete List","");location.href="/shopping-lists/"}}})},function(){return})}function valid_list_name(a){var b="<>@!#$%^&*()+[]{}?:;|'\"\\,./~`=";for(i=0;i<b.length;i++){if(a.indexOf(b[i])!=-1){return false}}return true}function add_newlist(d){if(shoppinglist_create_state==false){shoppinglist_create_state=true}else{return}var f=$("#newShoppingListName").val().replace(/\s+/g," ");var e=f.replace(/^\s+|\s+$/g,"");var f=e.toLowerCase();var a=$("#select-shopping-lists :selected").val();if(!valid_list_name(f)){$("#create_alert").html("");$("#create_alert").html("The list name cannot contain special characters. Please try another name.");shoppinglist_create_state=false;return}var b=[];$("#all_lists").each(function(){b.push($(this).html().toLowerCase().replace(/(^\s+|\s+$)/g,""))});present=false;for(var c=0;c<b.length;c++){if(b[c]===f.toLowerCase()){present=true}}if(present){$("#create_alert").html("");$("#create_alert").html("The list name chosen already exists. Please try another name.");shoppinglist_create_state=false}else{if(e.length>0){$("#respond-1").hide();$("#createlist").attr("onClick","javascript:void(0);");if(shoppinglist_create_state==true){$.ajax({url:"/msl/create-list/",type:"post",dataType:"json",data:{name:e,is_public:0},success:function(g){if(g.success){$("#createlist").attr("onClick","add_newlist();");shoppinglist_create_state==false;if(g.logged_in){location.href="/shopping-list/"+g.slug}else{location.href="/auth/login/?next=/shopping-list/"+a+"/"}set_shoplist_gae($("#shoplist-gae-type").val(),e," - Create New List");if(d){location.href="/shopping-lists/"}}else{$("#create_alert").html("");$("#create_alert").html("Please try another name.");return false}}})}}else{$("#create_alert").html("");$("#create_alert").html("Please enter a name.");shoppinglist_create_state=false}}}function check_duplicate_popup(b){var g=$("#"+b+"_editShoppingListName").val().replace(/\s+/g," ");var a=g.replace(/^\s+|\s+$/g,"");if(a.length>0){var f=$("#select-shopping-lists option:selected").text();var g=a.toLowerCase();var e=$("#"+b+"_shoppingListName").html().toLowerCase();var c=[];$("#all_lists").each(function(){c.push($(this).html().toLowerCase().replace(/(^\s+|\s+$)/g,""))});present=false;for(var d=0;d<c.length;d++){if(c[d]===g.toLowerCase()){present=true}}if(present){if(g!=e){show_alert("The list name you have chosen already exists. Please try another name.")}else{return}}else{showEditShoppingLists_popup(b,false,"update",a)}}else{show_alert("Please Enter a Name")}}function rename_list(b){var g=$("#newShoppingListName").val().replace(/\s+/g," ");var f=$("#list-view").val();var a=g.replace(/^\s+|\s+$/g,"");var e=$("#"+b+"_shoppingListName").html().toLowerCase();if(a.length>0){var c=[];$("#all_lists").each(function(){c.push($(this).html().toLowerCase().replace(/(^\s+|\s+$)/g,""))});present=false;for(var d=0;d<c.length;d++){if(c[d]===g.toLowerCase()){present=true}}if(present){if(g!=e){$("#create_alert").html("");$("#create_alert").html("The list name you have chosen already exists. Please try another name.")}else{return}}else{$.ajax({url:"/msl/rename-list/",type:"post",dataType:"json",data:{slug:b,name:a},success:function(h){if(!h.success){$("#create_alert").html("");$("#create_alert").html("Renaming this list was unsuccessful. Please choose a different name")}else{if($("#shoplist-landing").val()=="1"){location.href="/shopping-lists/"}else{location.href="/shopping-list/"+h.slug}}}})}}else{$("#create_alert").html("");$("#create_alert").html("Please Enter a Name")}}function copy_shoplist_items(g){sl=$(".uiv2-shoplist-select :selected").val();shoplist=$("input[type='radio'][name='shoplist-options']:checked").val();var b=false;var d=false;var f=0;if($("#order_detail_page").val()){checkbox=$("[name = 'shoppinglist-item']");b=true;d=true}else{checkbox=$("[name = 'shoppinglist-item']:visible");for(var c=0;c<checkbox.length;c++){if(checkbox[c].checked===true){b=true;f+=1}}if(b===false&&g=="no-order"){$("#create_alert").html("Select atleast one item from the shopping list to copy");return}}item_qts=get_shoplist_items(checkbox,d);if(!shoplist){$("#create_alert").empty().html("Please select an option");return}if(!$("#newShoppingListName").val()&&shoplist=="create"){$("#create_alert").empty().html("Please enter a name");return}if(shoplist=="create"){present=false;var e=$("#newShoppingListName").val().replace(/\s+/g," ");var a=e.replace(/^\s+|\s+$/g,"");$.ajax({url:"/msl/create-list/",type:"post",dataType:"json",data:{name:a,is_public:0},success:function(h){if(h.success){if(h.logged_in){set_shoplist_gae($("#shoplist-gae-type").val(),a," - Create New List");copy_items_to_shopping_list(a,b,f,g,item_qts)}else{location.href="/auth/login/?next="+encodeURIComponent(window.location.pathname)}}else{$("#create_alert").html("");$("#create_alert").html("Please try another name. This list already exists");present=true}}})}else{a=$(".uiv2-shoplist-select :selected").val();copy_items_to_shopping_list(a,b,f,g,item_qts)}return}function get_shoplist_items(c,b){item_qtys=[];for(var a=0;a<c.length;a++){if(b){itemname=c[a].value+"_"+1;item_qtys.push(itemname)}else{if(c[a].checked===true){itemname=c[a].value+"_"+$("#p"+c[a].value+"_qty").val();item_qtys.push(itemname)}}}return item_qtys}function copy_items_to_shopping_list(b,a,d,e,c){if(!d){d=""}if(a==true|e!="no-order"){$.ajax({url:"/order/msl/copy-items/",type:"post",dataType:"json",data:{"items[]":item_qtys,"sl-name":b,order_id:e},success:function(f){if(f.success){mesg="Successfully copied "+d+" items to the shopping list "+b;if(e!="no-order"){mesg="Successfully copied order items to the shopping list "+b}$.notifyBar({cls:"success",html:mesg});uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide();set_shoplist_gae($("#shoplist-gae-type").val(),b," - Copy to List")}}})}}function set_background(){for(var a=0;a<$(".AccordionPanelContent").children().size();a++){if(a%2==0){$(".AccordionPanelContent").children()[a].removeAttribute("class");$(".AccordionPanelContent").children()[a].addClass("product-listing odd-itemrow")}else{$(".AccordionPanelContent").children()[a].removeAttribute("class");$(".AccordionPanelContent").children()[a].addClass("product-listing even-itemrow")}}}function catSelectChkGroup(e){var b=e+"_cat_accordion";var d=document.getElementById(b);var c=d.getElementsByTagName("input");for(var a=0;a<c.length;a++){if(c[a].type=="checkbox"&&c[a].disabled==false){c[a].checked=true}}set_shoplist_gae($("#shoplist-gae-type").val(),e," - Select All for cat")}function catClearChkGroup(d){var a=d+"_cat_accordion";var c=document.getElementById(a);var b=c.getElementsByTagName("input");$(b).each(function(){$(this).removeAttr("checked")});set_shoplist_gae($("#shoplist-gae-type").val(),d," - Clear All for cat")}function remove_from_list(item_row_id,item_id,topcat,cityId,slug){var parent=topcat+"_header";var cat_name=topcat+"_itemcount";var item_desc=item_id+" "+$("#desc_"+item_id).html();$.ajax({url:"/msl/remove-item/",type:"post",dataType:"json",async:false,data:{slug:slug,product_id:item_id,product_city:cityId},success:function(data){if(data.success){if(data.logged_in){$("#"+item_row_id).remove();$("#"+item_row_id).hide();set_background();var toplevelCatAccordion=topcat+"_header";var parent_id=document.getElementById(toplevelCatAccordion);total_count_items=parseInt($("#totalid").html());total_no=eval(total_count_items-1);document.getElementById("totalid").innerHTML=total_no;if(total_no==0){$(".my-accordion").append('<p class="show-info" id = "shoplist_info">This shopping list does not have any items.&nbsp;Search for products and click on <a class ="add" style = "cursor:pointer" onclick = "applyMask();" ></a> to add the specific product to the list.</p>');$("#add_basket_base").hide()}var cat_items_count=parseInt(document.getElementById(cat_name).innerHTML);var child_count=eval(cat_items_count-1);document.getElementById(cat_name).innerHTML=eval(cat_items_count-1);if(child_count==0){document.getElementById(toplevelCatAccordion).style.display="none";document.getElementById(toplevelCatAccordion).innerHTML="";document.getElementById(parent).style.display="none"}set_shoplist_gae($("#shoplist-gae-type").val(),item_desc," - Remove-item")}else{location.href="/auth/login/?next=/shopping-list/"+slug+"/"}}}});return false}function get_view(a,b,c){$("#shoplist-mask").show();$(".loadShoplistMask").show();$.ajax({url:"/order/get-shopping-list-view/",type:"post",dataType:"json",data:{list_grid:a,list_type:b,list_id:c},success:function(d){if(d.success){$("#sl-items").html("");$("#sl-items").html(d.sl_html);if(a=="list"){$("#sl_list_view").show();$("#sl_grid_view").hide()}else{shoplist_view_change_init();$("#sl_grid_view").show();$("#sl_list_view").hide()}if(d.itemcount>0){$(".noItems").hide();$("#sl_operations").show()}else{$(".noItems").show();$("#sl_operations").hide()}}$("#totalid").html(d.itemcount);$("#c102").prop("checked",false);$("#selected_count").html(0);$("#shoplist-mask").hide();$(".loadShoplistMask").hide()}})}function delete_list_items(a,c){is_listview=$("#listview_sl").val();is_listview=$("#listview_sl").val();var b=[];$("#sl-form").find(":checkbox[name = 'shoppinglist-item']").each(function(){var d=$(this);if(d.is(":checked")){b.push(d.val())}});if(b.length==0){show_alert("Select atleast one item to delete");return false}show_confirm("Are you sure want to delete these items?",function(){$("#shoplist-mask").show();$(".loadShoplistMask").show();$.ajax({url:"/msl/delete-shoppinglist-items/",type:"post",dataType:"json",data:{slug:a,product_city:c,items:b,is_listview:is_listview},success:function(d){if(d.success){if(d.logged_in){$("#sl-items").html(d.sl);shoplist_view_change_init();$("#selected_count").html("0");$("#shoplist-mask").hide();$("#totalid").html(d.itemcount);$(".loadShoplistMask").hide();if(d.itemcount<1){$(".noItems").show();$("#sl_operations").hide()}set_shoplist_gae($("#shoplist-gae-type").val(),a," - Delete items from List")}else{location.href="/auth/login/?next=/shopping-list/"+a+"/"}}}})},function(){return false})}function shoplist_view_change_init(){$(".parentchild").dropkick(dropkick_change);$(".a2c").unbind("click");init_a2c($("#max-qty").val());init_view_basket($("#max-qty").val(),1);$(".checkbox").unbind("click");$("input[type=checkbox]").on("click",function(){ctr=0;len=$("input[name=shoppinglist-item]:checked");len.each(function(){if($(this).is(":visible")){ctr+=1}});$("#selected_count").html(ctr)})}function add_shoplist_to_basket(b){$(".arrow-collapse:visible").trigger("click");checkbox=$("[name = 'shoppinglist-item']:visible");qtyField=$(".qtyTxtField:visible");var a=false;var d=0;for(var c=0;c<checkbox.length;c++){if(checkbox[c].checked===true){a=true;d+=1}}for(c=0;c<qtyField.length;c++){var f=qtyField[c].value;if(checkbox[c].checked===true&&!is_valid_qty(f)){var e=$("#"+$(checkbox)[c].value+"_name").html();show_alert("Invalid Quantity for item "+e);return false}}if(a===false){show_alert("Select atleast one in-stock item to add to basket");return false}item_qtys=[];for(var c=0;c<checkbox.length;c++){if(checkbox[c].checked===true){if($("#p"+checkbox[c].value+"_cart").val()){cart_qty=parseInt($("#p"+checkbox[c].value+"_cart").val())+1}else{cart_qty=parseInt($("#p"+checkbox[c].value+"_qty").val())}e=checkbox[c].value+"_"+cart_qty;if($("#"+checkbox[c].value+"_availability").val()=="1"){item_qtys.push(e)}}}$("#shoplist-mask").show();$(".loadShoplistMask").show();$.ajax({url:"/msl/add-list-item-to-basket/",type:"post",dataType:"json",data:{"items[]":item_qtys,slug:b},success:function(h){if(!h.logged_in){location.href="/auth/login/?next="+window.location.pathname}if(h.success){$("#shoplist-mask").hide();$(".loadShoplistMask").hide();msg=h.msg;mesg="Successfully added items to the basket";$.notifyBar({cls:"success",html:mesg});set_shoplist_gae($("#shoplist-gae-type").val(),"num-items"," - Add to basket",d);for(var g=0;g<h.basket_widget_list.length;g++){if(h.basket_widget_list[g]["basket_widget"]!="undefined"){update_basket_widget(h.basket_widget_list[g]["product_id"],h.basket_widget_list[g]["cart_type"],h.basket_widget_list[g]["basket_widget"],true,location.pathname)}}init_basket();cart_changed=true;if(ga){ga("set","matric6",1)}}else{$("#shoplist-mask").hide();$(".loadShoplistMask").hide();show_alert(h.msg)}}});for(var c=0;c<checkbox.length;c++){if(checkbox[c].checked===true){pid=checkbox[c].value;checkbox[c].checked=false}}for(c=0;c<qtyField.length;c++){qtyField[c].value="1"}}function show_hide_catg(a){if($("#categoryItems_"+a).is(":visible")){$("#categoryItems_"+a).hide();$("#img-expand_"+a).hide();$("#img-collapse_"+a).show()}else{$("#categoryItems_"+a).show();$("#img-expand_"+a).show();$("#img-collapse_"+a).hide()}}function selectToggle(d){var a=0;var c=0;if($("#c102").is(":checked")){toggle=true}else{toggle=false}$(".checkbox").each(function(){if(toggle){$(this).prop("checked",true)}else{$(this).prop("checked",false)}});checkbox=$("[name = 'shoppinglist-item']");for(var b=0;b<checkbox.length;b++){if(checkbox[b].checked===true){check=true;a+=1}else{c+=1}}if(a>0){set_shoplist_gae($("#shoplist-gae-type").val(),"num-items"," - Select all ",a)}if(c>0){set_shoplist_gae($("#shoplist-gae-type").val(),"num-items"," - Clear all ",c)}}function check_cat_select(a){if($("#c104_"+a).is(":checked")){check_select(a)}else{check_clear(a)}}function check_select(e){var b="categoryItems_"+e;var d=document.getElementById(b);var c=d.getElementsByTagName("input");for(var a=0;a<c.length;a++){if(c[a].type=="checkbox"&&c[a].disabled==false){c[a].checked=true}}set_shoplist_gae($("#shoplist-gae-type").val(),e,"-Select All for cat")}function check_clear(d){var a="categoryItems_"+d;var c=document.getElementById(a);var b=c.getElementsByTagName("input");$(b).each(function(){$(this).removeAttr("checked")});set_shoplist_gae($("#shoplist-gae-type").val(),d,"-Clear All for cat")}function isHtml5AttributeSupported(c,b){var a=document.createElement(c);return b in a}function setPlaceHolder(b){var a=$(b);var c=$(b).attr("placeholder");a.val(c);a.css("color","#ccc");a.focus(function(){if(a.val()==c){a.val("");a.css("color","#333")}});a.blur(function(){if(a.val().length==0){a.val(c);a.css("color","#ccc")}})}function submit_search_form(){var a=$("#id_q").val();if(!a){a=""}a=a.replace(/^[ ]+/g,"").replace(/[ ]+$/g,"");if(a===""||a=="Search for over 18,000 products in 7 languages, e.g. bhindi, vendakai..."){$("#id_q").focus();return false}return true}function get_cookie(c){var b=document.cookie.indexOf(c);if(b>-1){var d=document.cookie.indexOf("=",b)+2;var a=document.cookie.indexOf('"',d);return document.cookie.substring(d,a)}return null}function get_member_cookie(){return get_cookie("_bb_mid")}function get_visitor_cookie(){return get_cookie("_bb_vid")}function checkout(b,a){$(b).removeAttr("onclick");location.href="/co/checkout/"+(a?"?divergence_ok=yes":"");return false}function get_flatpage_marketplace(b,a){$.ajax({url:"/get-flatpage/",type:"post",dataType:"json",data:{url:b},success:function(c){if(c.success){$("#marketplace_div").html(c.content);$("#marketplace_title").html(a);uiv2_show_popup("popup_marketplace")}}})}var label="";var mixed="";function basket_checkout(e,c){var f=$("#cwr_div").html();if(f){uiv2_show_popup("popup_category_weight_restriction");return false}$(e).removeAttr("onclick");var a="express_basket_checkout";var d,b;d="express_basket";if(mixed){d="mixed_basket"}b="express_checkout_"+label;if(!c){b="normal_checkout_"+label}ExpressOrderController.logAnalytics(a,d,b,1);location.href="/co/checkout/?x="+c;return false}function set_child_details(b,a){$("#slidingProduct"+b).hide();$("#slidingProduct"+a).show();title=$("#"+a).attr("value");$(document).attr("title",title);if($("#children_"+b+"_more")){$("#children_"+b+"_more").dialog("close")}$("#radio_"+b+"_"+b).prop("checked",true)}function show_shoplists(c,a,b){if($.trim(a).length==0){return}$.ajax({url:"/msl/show-shopping-lists/",type:"post",dataType:"json",data:{product_id:c,product_city:a},success:function(e){if(e.success){if(e.logged_in){$(".shoplistContainer").html("");$(".shoplistContainer").html(e.shopping_lists);if(!e.no_list){var f=$("#"+c+"_shoplist").offset();$("#sl_"+c+"_shoplist").show();var d=f.top+30;var g=f.left-163;$("#sl_"+c+"_shoplist").offset({top:d,left:g});$("#sl_"+c+"_shoplist").show();$(".apply_sl").hide();$(".shoplists").jScrollPane()}if(b){$("#chk_"+c+"_"+b).attr("checked",true);$("#apply_sldiv"+c).show();$(".apply_sl").show();$(".newList").hide()}}else{location.href="/auth/login/?next="+window.location.pathname+window.location.search}}}});if(ganalytics){pdesc=$("#prod-"+c+"-desc").val();item_desc=parseInt(c)+" "+pdesc;_gaq.push(["_trackEvent","sl-prod-list","Product List Shopping List - Icon Clicked",item_desc])}}function search_lists(e){current_listnames=[];var c=$("#search_"+e).val().replace(/\s+/g," ");var b=c.replace(/^\s+|\s+$/g,"");$("#all_"+e+" div").each(function(){$(this).children("input").each(function(){current_listnames.push($(this))})});if(b.length==0){$("#all_"+e+" div").each(function(){$(this).show()})}else{for(var a=0;a<current_listnames.length;a++){var d=current_listnames[a].val();if(d.toLowerCase().indexOf(b.toLowerCase())==-1){id="result_"+e+"_"+current_listnames[a].val();document.getElementById(id).style.display="none"}else{id="result_"+e+"_"+current_listnames[a].val();document.getElementById(id).style.display=""}}}}function show_apply(d,b){var a=$("#flag_"+b).html();var c="chk_"+d+"_"+b;$("#newlist_"+d).hide();if($("#"+c).attr("checked")&&a==0){$(".apply_sl").hide();$(".newList").show()}if(!$("#"+c).attr("checked")&&a==0){$(".apply_sl").show();$(".newList").hide()}if($("#"+c).attr("checked")&&a==1){$(".apply_sl").show();$(".newList").hide()}if(!$("#"+c).attr("checked")&&a==1){$(".apply_sl").hide();$(".newList").show()}$("#all_"+d+" input").each(function(){var e=$(this);var f=$("#flag_"+$(this).attr("name")).html();if(e.is(":checked")&&f==1){$(".apply_sl").show();$(".newList").hide();$("#newlist_"+d).hide()}if(!e.is(":checked")&&f==0){$(".apply_sl").show();$(".newList").hide()}});$("#apply_sldiv"+d).show()}function cancel_create_sl(a){$("#create_"+a).val("");$("#msg_"+a).html("");$("#newlist_"+a).hide()}function show_createlists(a){$("#newlist_"+a).show();$("#apply_sldiv"+a).hide();$("#msg_"+a).html("");$("#create_"+a).val("")}function new_shoppinglist(g,a){if(shoppinglist_click_state==false){shoppinglist_click_state=true}else{return}var e=0;var f=$("#create_"+g).val().replace(/\s+/g," ");var d=f.replace(/^\s+|\s+$/g,"");var c=d.toLowerCase();if(!valid_list_name(c)){$("#msg_"+g).html("");$("#msg_"+g).html("The list name cannot contain special characters. Please try another name.");shoppinglist_click_state=false;return}var b=[];$("#all_"+g+" input").each(function(){b.push($(this).val().toLowerCase().split("*")[0])});for(i=0;i<b.length;i++){if(b[i]==c){e=1}}if(e){$("#msg_"+g).html("");$("#msg_"+g).html("The list name you have chosen already exists. Please try another name.");shoppinglist_click_state=false}else{if(d.length>0){$("#popupcreate").attr("onClick","javascript:void(0);");if(shoppinglist_click_state==true){$.ajax({url:"/msl/create-list/",type:"post",dataType:"json",data:{name:d,is_public:0},success:function(h){if(h.success){shoppinglist_click_state=false;show_shoplists(g,a,d);mesg="<strong>"+d+"</strong> has been created";$.notifyBar({cls:"success",html:mesg})}}});if(ganalytics){item_desc=g+$("#prod-"+g+"-desc").val();_gaq.push(["_trackEvent","sl-prod-list"," Product List Shopping List - Create New",item_desc])}}}else{$("#msg_"+g).html("");$("#msg_"+g).html("Please enter a name");shoppinglist_click_state=false}}}function add_item_to_lists(g,f){var a=[];var c=[];var e=[];var d=[];$("#all_"+g+" input").each(function(){var j=$(this);var h=$("#flag_"+$(this).attr("name")).html();if(j.is(":checked")&&h==1){a.push(j.attr("name"));c.push(j.val())}if(!j.is(":checked")&&h==0){e.push(j.attr("name"));d.push(j.val())}});for(var b=0;b<a.length;b++){$.ajax({url:"/msl/add-item/",type:"post",dataType:"json",data:{slug:a[b],product_id:g,product_city:f},success:function(h){}})}for(var b=0;b<e.length;b++){$.ajax({url:"/msl/remove-item/",type:"post",dataType:"json",data:{slug:e[b],product_id:g,product_city:f},success:function(h){}})}$(".shoplistContainer").html("");if(c.length>0){mesg="<strong>"+$("#prod-"+g+"-desc").val()+"</strong> has been added to ";mesg+=c.join();if(d.length>0){mesg+=" and removed from ";mesg+=d.join()}}else{if(d.length>0){mesg="<strong>"+$("#prod-"+g+"-desc").val()+"</strong> has been removed from "+d.join()}}$.notifyBar({cls:"success",html:mesg});if(ganalytics){item_desc=g+$("#prod-"+g+"-desc").val();_gaq.push(["_trackEvent","sl-prod-list"," Product List Shopping List - Apply",item_desc])}}function change_pd_image(b,a){$("."+a+"_uiv2-product-large-img-display").hide();pimg=$("#pimg_"+b);pimg.show();$(".pimg_holder").removeClass("active");$("#pimg_"+b+"_holder").addClass("active")}function goto_url(a){location.href=a;return false}function set_shoplist_gae(a,c,d,b){if(ganalytics){if(a=="sysl"){gae_catg="sysl-activity";gae_action="Sys Shopping List"}else{if(a=="so"){gae_catg="so-activity";gae_action="Shop from order"}else{if(a=="sb"){gae_catg="sb-activity";gae_action="Smart Basket"}else{if(a=="re"){gae_catg="re-activity";gae_action="Recommendations"}else{if(a=="scratch"){gae_catg="scratch-activity";gae_action="Scratch List"}else{gae_catg="sl-activity";gae_action="Shopping List"}}}}}gae_action=gae_action+d;if(b){_gaq.push(["_trackEvent",gae_catg,gae_action,c,b])}else{_gaq.push(["_trackEvent",gae_catg,gae_action,c])}}}function fb_confirm_option_selected(){console.log($("input[name='fb-confirm-option']").val())}function fb_logged_in(){console.log("FB logged in");console.log("FB response... "+FB.getAuthResponse())}function check_item_scl(a){if($("#scratch_state"+a).val()==1){check_status=false;$("#scratch_state"+a).val(0)}else{check_status=true;$("#scratch_state"+a).val(1)}$.ajax({url:"/member/check-scratchlist-item/",type:"post",dataType:"json",data:{"item-id":a,check_status:check_status},success:function(b){if(b.success){$("#check_"+a).attr("title",b.tooltip);if(b["item-checked"]){$("#"+a).addClass("scratchItem");set_shoplist_gae("scratch",$("#"+a).val()," -Scratch item","")}else{$("#"+a).removeClass("scratchItem");set_shoplist_gae("scratch",$("#"+a).val()," -UnScratch item","")}}}})}function scratch_list_click_handler(a){if($("#shoplist-popup").has(a.target).length==0&&$(".uiv2-new-my-shopping-list").has(a.target).length==0&&$(".uiv2-back-block").has(a.target).length==0&&$("#scratch_list_main").has(a.target).length==0&&$(".uiv2-close-widget-button").has(a.target).length==0){$(".uiv2-new-my-shopping-list").hide();a.stopPropagation()}}function get_scratchlist_content(c,a){scl_landing="#landing_scl_"+c;landing=$(scl_landing);if(c&&landing.html()){if(a=="system"){var b=$("#landing_link_ssl_"+c).offset()}else{var b=$("#landing_link_sl_"+c).offset()}$("#scratch_list_main").offset({top:b.top+30,left:b.left+100})}else{b=$(".uiv2-shop-by-list-link").offset();$("#scratch_list_main").offset({top:b.top+46,left:b.left-45})}set_scratch_list_scroll();$("#scratchListContainer").css("width","0px");$("#scratchListContainer").css("height","0px")}function get_list_items(a){if(a=="None"){a="unsaved"}scl_id="#scratchlist_"+a;items=[];$(scl_id+" [name = 'scratchlist-item']").each(function(){if($.trim($(this).val())){item_id=$(this).attr("id");if(!item_id){item_id=""}items.push($(this).val()+"_"+item_id)}});return items}function show_scratchlist(e,d,b,c,a){$.ajax({url:make_req_url("/member/show-scratch-list/"),type:"post",dataType:"json",data:{list_id:e,edit_mode:d,csrfmiddlewaretoken:$("#id_csrftkn").val(),scl_type:b,show_help:c},success:function(f){if(f.success){$("#scratchListContainer").empty().html(f.list_html);get_scratchlist_content(e,b);if(f.list_id){e=f.list_id;if(e=="unsaved"){set_shoplist_gae("scratch","Unsaved List"," - Create List","")}}if(f.edit_mode){init_edit_scratchlist(d,e)}$(".uiv2-shop-by-list-dropdown").hide();if(a){$(".uiv2-my-shopping-minus").remove();$(".plusOpen").remove();$(".uiv2-save-edit-clear-links-wrap").css("width","129px");$(".close-scl").css("margin-left","-5px");$(".uiv2-my-shopping-help").css("margin-left","-5px");$(".uiv2-my-shopping-help").css("margin-right","5px")}}}})}function init_scratchlist_help_popup(){$("#shoplist-mask").show();$(".uiv2-help-small-box").hide();$(".uiv2-slide-warpper").removeClass("de-active").addClass("active"),function(){};a(".uiv2-pop-up-black-new");var b=$(this).width();var c=$(this).height();function a(d){$(d).width(b);$(d).height(c);$(d).fadeIn(600)}}function occupy_screen(b){$(b).width(d_width);$(b).height(d_height);$(b).fadeIn(600)}function show_scratchlist_help(a,c,b){$("#help-scl").empty();$.ajax({url:make_req_url("/member/scratch-list-help/"),type:"post",dataType:"json",data:{help_type:a,list_id:c},success:function(d){if(d.success){$("#help-scl").empty().html(d.list_html);$("#help-scl").show();$("#help-scl").offset({top:150,left:980});init_scratchlist_help_popup();$(".uiv2-back-block").css("background","transparent");b="- Help "+b;set_shoplist_gae("scratch",$("#scratch-list-name_"+c).html(),b)}}});$("#help-scl").css("width","0px");$("#help-scl").css("height","0px")}function hide_scratchlist_help(a,b){$(".uiv2-new-my-shopping-list").show();$("#shoplist-mask").hide();$(".uiv2-pop-up-black-new").hide();$(".uiv2-help-small-box").fadeIn(300);$(".uiv2-slide-warpper").removeClass("active").addClass("de-active");$("#help-scl").empty();$("#help_box").hide()}function find_scratchlist_products(d,b,a,c){items=get_list_items(d);slug=$("#scl_slug").val();if(items.length>=1){href_attr=$("#find_product_link").attr("href");$("#find_product_link").attr("href","");$.ajax({url:make_req_url("/member/scratch-list-products/"),type:"post",dataType:"json",data:{"items[]":items,list_id:d,csrfmiddlewaretoken:$("#id_csrftkn").val(),list_type:a,q:c},success:function(e){if(e.success){set_shoplist_gae("scratch",$("#scratch-list-name_scratchlist_"+d).html()," - Save & Find products");set_shoplist_gae("scratch",$("#scratch-list-name_scratchlist_"+d).html()," - Find products");if(a=="1"){location.href="/ps/ssl/"+slug+"/?q="+e.q}else{location.href="/ps/sl/"+slug+"/?q="+e.q}if(ga){ga("set","matric7",1)}}else{show_alert(e.msg)}$("#find_product_link").attr("href",href_attr)}})}else{show_alert("Please enter some items in the list")}}function remove_scl_item(b,d){scratch_list_edited=true;set_shoplist_gae("scratch",$("#"+b).val(),"- Delete item");$("#list_"+b).remove();clone_check=$(".scratchListItems ul li").length;if(clone_check<10){var a=$(".scratchListItems ul").find("li:last-child");var c=a.off("keyup").clone();c.find("input").val("");c.insertBefore(a);init_scratchlist_item_row();init_edit_scratchlist(true,d)}}function show_scl_popup(a,e,d,c,b){if(a=="close"){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide()}else{$.ajax({url:"/member/show-scl-popup/",type:"post",data:{list_type:b,list_id:e,popup_type:a,csrfmiddlewaretoken:$("#id_csrftkn").val(),is_done:c},dataType:"json",success:function(f){if(f.success){if(f.is_member){$("#popup-content").html(f.sl_popup_html);uiv2_show_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").show();$(".uiv2-shoplist-select").dropkick();$("#dk_container_sl_names").css("height","26px")}else{save_visitor_items(e);get_params=window.location.href.split("?");next_url=window.location.pathname;if(get_params.length>1){next_url=next_url+"?"+get_params[1]}show_alert("Please sign in to save this list. Clicking on OK will redirect you to the login page",function(){location.href="/auth/login/?next="+encodeURIComponent(next_url)})}}}})}}function save_visitor_items(a){items=get_list_items(a);$.ajax({url:"/member/save-visitor-items/",type:"post",data:{list_id:a,csrfmiddlewaretoken:$("#id_csrftkn").val(),items:items},dataType:"json",success:function(b){if(b.success){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide()}}})}function save_items_to_list(d,b,a,c){scl_function=$("input[type='radio'][name='radio_sl']:checked").val();if(!scl_function){$("#create_alert").empty().html("Please select an option");return}if(!d||d=="None"){items=get_list_items("unsaved")}else{items=get_list_items(d)}if(items.length<=0){show_alert("Please enter some items in the list");return}q_scl=$("#scl_query_term").val();attr_href=$("#save_link").attr("href");if(scl_function=="create"){new_name=$("#newShoppingListName").val().replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");if(new_name.length<=0){$("#create_alert").empty().html("Please enter a name.")}$("#save_link").attr("href","");$.ajax({url:"/member/create-scl/",type:"post",data:{"items[]":items,new_name:new_name,csrfmiddlewaretoken:$("#id_csrftkn").val(),"edit-mode":true,list_id:d,q:q_scl,list_type:a,list_status:c},dataType:"json",success:function(e){if(e.success){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide();mesg="Successfully saved list "+new_name;$.notifyBar({cls:"success",html:mesg});set_shoplist_gae("scratch",new_name," - Save as a new list","");if(e.change_list){scl_id=e.scl_id;a=e.list_type;slug=e.slug;if($("#continue-scl")){$("#continue-scl").find("a").attr("href","javascript:show_ps_scratch_list('"+scl_id+"','"+a+"','"+slug+"')")}replace_scratch_list_html(e.list_html)}if($("#shoplist-landing").val()){location.href=window.location.pathname}if(e.change_list&&!$("#shoplist-landing").val()){get_scratchlist_content(d)}if(b=="true"){location.href="/basket/?ver=1"}}else{if(e.fail_msg){$("#create_alert").empty().html(e.fail_msg)}}$("#save_link").attr("href",attr_href)}})}if(scl_function=="add"){copy_to_list=$(".uiv2-shoplist-select :selected").val();$.ajax({url:"/member/add-to-scratchlist/",type:"post",data:{"items[]":items,copy_to_list:copy_to_list,csrfmiddlewaretoken:$("#id_csrftkn").val(),"edit-mode":true,current_list:d,q:q_scl},dataType:"json",success:function(e){if(e.success){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide();set_shoplist_gae("scratch",$(".uiv2-shoplist-select :selected").html()," - Add to selected list","");mesg="Successfully saved to the list "+$(".uiv2-shoplist-select :selected").html();$.notifyBar({cls:"success",html:mesg});if($("#shoplist-landing").val()){location.href=window.location.pathname}if(b=="true"){location.href="/basket/?ver=1"}}else{if(e.fail_msg){$("#create_alert").empty().html(e.fail_msg)}}$("#save_link").attr("href",attr_href)}})}}function clear_list(a){items=get_list_items(a);if(items.length<=0){show_alert("Please enter some items in the list");return}scratch_list_edited=true;clear_list_items(a)}function clear_list_items(d){items=get_list_items(d);$(".empty-li").addClass("toRemove");set_shoplist_gae("scratch",$("#scratch-list-name_scratchlist_"+d).html(),"- Clear list",items.length);$("[name = 'scratchlist-item']").each(function(){$(this).val("");$(".uiv2-cross").hide();$(this).removeClass("scratchItem");$(this).attr("id","")});$(".scratchState").val(0);$(".item-li").remove();var a=$(".empty-li").last();var c=10;for(i=0;i<c;i++){var b=a.off("keyup").clone();b.insertBefore(a);b.removeClass("toRemove");b.find("input").val("")}init_scratchlist_item_row();init_edit_scratchlist(true,d);$(".toRemove").remove();$("#continue-scl").hide();$(".uiv2-shop-red-icon").hide()}function init_scratchlist_item_row(){$(".empty-row").on("keyup",function(a){$(this).parent().find("a").css("display","block")});$(".uiv2-my-scratch-list-wrapper ul li input").hover(function(){$(this).css({color:"#676768","font-weight":"500"})});$("[name = 'scratchlist-item']").on("keypress",function(){if($(this).is(":focus")){$(this).removeClass("scratchItem")}$("[name = 'scratchlist-item']").each(function(){scratch_state="#scratch_state"+$(this).attr("id");if(!$(this).is(":focus")&&$(scratch_state).val()==1){$(this).addClass("scratchItem")}})});$("[name = 'scratchlist-item']").blur(function(){scratch_state="#scratch_state"+$(this).attr("id");if(!$(this).is(":focus")&&$(scratch_state).val()==1){$(this).addClass("scratchItem")}});$(".scratchListItems").on("keyup","li",function(a){if(a.keyCode==38){$(this).prev().find("input").focus()}if(a.keyCode==40||a.keyCode===13){$(this).next().find("input").focus()}})}function rename_scratchlist(b,a){new_name=$("#newShoppingListName").val().replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");if(new_name.length<=0){$("#create_alert").empty().html("Please enter a name.")}q_scl=$("#scl_query_term").val();$.ajax({url:"/member/rename-list/",type:"post",data:{new_name:new_name,csrfmiddlewaretoken:$("#id_csrftkn").val(),"edit-mode":true,scl_id:b,memvis_id:a},dataType:"json",success:function(c){if(c.success){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide();$("#scratch-list-name_scratchlist_"+a).html(new_name);$("#nav_scl_"+a).html(new_name);$("#sclName_"+a).html(new_name)}else{if(c.fail_msg){$("#create_alert").empty().html(c.fail_msg)}}}})}function remove_node(b){clone_check=$(".scratchListItems ul li").length;if(b&&clone_check<10){var a=b.off("keyup").clone();var c=b.parent().find("li:last-child");a.insertAfter(c);a.find("input").val("");a.find(".uiv2-cross").hide();init_scratchlist_item_row();b.on("keyup","li",function(d){if(d.keyCode==38){$(this).prev().find("input").focus()}if(d.keyCode==40||d.keyCode==13){$(this).next().find("input").focus()}})}b.remove();set_scratch_list_scroll()}function init_edit_scratchlist(a,b){set_scratch_list_scroll();scl_id="scratchlist_"+b;clone_ele=false;list_items_id="#list-items_"+scl_id;$(list_items_id+" li").each(function(){$(this).find("input").removeAttr("readonly");$(this).find("input").css("background","#FEFBDA");$(this).css("background","#FEFBDA");$(this).find("input").attr("onclick","")});$(list_items_id).on("keyup","li",function(d){if(d.keyCode==13&&(($(this).find("input").val()&&$(this).next().find("input").val())||$(this).is(":last-child"))){var c=$(this).off("keyup").clone();c.css("background","#FEFBDA");c.attr("id","");c.find(".scratchState").attr("id","");c.find(".scratchState").val(0);c.find(".scratchBtn").remove();new_inp=c.find("input");new_inp.css("background","#FEFBDA");new_inp.val("");new_inp.attr("id","");new_inp.removeClass("scratchItem");new_inp.on("onclick",function(e){});a_ele=c.find("a");a_ele.attr("href","javascript:remove_node()");a_ele.click(function(){remove_node($(this).parent())});a_ele.css("display","none");c.insertAfter($(this));$(".scratchListItems").jScrollPane({}).data("jsp").destroy();$(".scratchListItems").jScrollPane({contentWidth:"0px"});if($(".scratchListItems ul li").length>=12&&(/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent))){$(".scratchListItems").css("padding-top","15px")}new_inp.focus();new_inp.on("keyup",function(e){$(this).parent().find("a").css("display","block");if(e.which===38){inp=$(this).parent().prev().find("input");inp.focus()}if(e.which===40){inp=$(this).parent().next().find("input");inp.focus()}});new_inp.hover(function(){$(this).css({color:"#676768","font-weight":"500"})})}if(d.keyCode==38){$(this).prev().find("input").focus()}if(d.keyCode==40){$(this).next().find("input").focus()}});$("#"+scl_id+" [name = 'scratchlist-item']").on("keyup",function(c){if(c.which===13){inp=$(this).parent().next().find("input");inp.focus()}});$("#"+scl_id+".item-li .uiv2-cross").show();$("#"+scl_id+" #find_products").show();$("#"+scl_id+" #clear_list").show();$("#"+scl_id+" #done").hide();$("#"+scl_id+" #edit_link").hide();$(".arrow_scl").hide();$("#"+scl_id+" .checkbox_scl").hide()}function edit_scratch_list(c,d,a,b){q_scl=$("#scl_query_term").val();attr_href=$("#edit_link").find("a").attr("href");$("#edit_link").find("a").attr("href","");$.ajax({url:"/member/edit-list/",type:"post",data:{csrfmiddlewaretoken:$("#id_csrftkn").val(),"edit-mode":true,list_id:d,scl_type:a,q:q_scl,memvis_id:b},dataType:"json",success:function(e){if(e.success){uiv2_hide_popup("shoplist-popup");$(".uiv2-background-shade").hide();$("#shoplist-mask").hide();replace_scratch_list_html(e.list_html);set_shoplist_gae("scratch",$("#scratch-list-name_scratchlist_"+b).html()," -  Edit list");if(e.original_list_id){get_scratchlist_content(e.original_list_id)}else{get_scratchlist_content(b)}init_edit_scratchlist(c,b)}$("#edit_link").find("a").attr("href",attr_href)}})}function show_search_products(a){location.href="/ps/?q="+a}function show_ps_scratch_list(c,b,a){$.ajax({url:make_req_url("/member/ps-scratch-list/"),type:"post",data:{scl_id:c,"list-type":b},dataType:"json",success:function(d){if(d.success){if(b=="1"){location.href="/ps/ssl/"+a+"/?q="+d.q}else{location.href="/ps/sl/"+a+"/?q="+d.q}}else{if(d.msg){if(d.status=="unsaved"){show_alert(d.msg+". Clicking on the create new shopping list button brings up the Unsaved List")}else{msg=d.msg;if(window.location.pathname.indexOf("/ps/sl")==-1||window.location.pathname.indexOf("/ps/ssl")==-1){msg+=".You can view this list on the shopping lists page."}if($(".uiv2-save-edit-clear-wrap").length){show_alert(msg)}else{show_alert(msg,function(){location.href="/order/shopping-lists/"})}}}}}})}function done_scratchlist(c,a,b){if(a==1){show_scl_popup("save",c,b,true,"")}else{location.href="/basket/?ver=1"}}function delete_scratch_list(a){show_confirm("Are you sure want to delete this list?",function(){$.ajax({url:"/member/delete-scratch-list/",type:"post",data:{csrfmiddlewaretoken:$("#id_csrftkn").val(),list_id:a},dataType:"json",success:function(b){if(b.success){set_shoplist_gae("scratch",$("#sclName_"+a).html(),"-Delete List");$("#landing_scl_"+a).remove();if(b.del_session){$("#continue-scl").hide();$(".uiv2-shop-red-icon").hide()}}}})},function(){return})}function init_show_message(){$(".uiv2-max-min-btn").show();$(".uiv2-min-max-btn").hide();var a=$(".uiv2-widgets-bottom-slide");a.find(".uiv2-min-max-btn").click(function(){a.find(".uiv2-widget-contents").slideDown();$(".uiv2-min-max-btn").hide();$(".uiv2-max-min-btn").show()});a.find(".uiv2-max-min-btn").click(function(){a.find(".uiv2-widget-contents").slideUp();$(".uiv2-max-min-btn").hide();$(".uiv2-min-max-btn").show()});a.find(".uiv2-close-btn-n").click(function(){$(".uiv2-widgets-bottom-slide").fadeOut()})}function close_scl(a){scl_id="#"+a;$(scl_id).remove();$("#help_box").hide()}function minimize_scratchlist(b,a){$("#"+b+" .uiv2-my-scratch-list-wrapper").slideToggle();a.hide();$("#"+b+" .plusOpen").show();set_shoplist_gae("scratch",$("#scratch-list-name_"+b).html()," - Minimize")}function maximize_scratchlist(b,a){$("#"+b+" .uiv2-my-scratch-list-wrapper").slideToggle();a.hide();$("#"+b+" .uiv2-my-shopping-minus").show();set_shoplist_gae("scratch",$("#scratch-list-name_"+b).html()," - Maximize")}function replace_scratch_list_html(a){if($("#facetsContainer").html()){$("#scratchListContainerFacets").empty().html(a)}else{sl_html=$("#scratchListContainer").empty().html(a)}}function set_scratch_list_scroll(){setTimeout(function(){$(".scratchListItems").jScrollPane({contentWidth:"0px"})},15)}function cancel_list_edit(b,a){if(a=="3"){muiv2_close_popup();return}attr_href=$("#cancel_link").attr("href");$("#cancel_link").attr("href","");$.ajax({url:"/member/cancel-list-edit/",type:"post",data:{csrfmiddlewaretoken:$("#id_csrftkn").val(),memvis_id:b},dataType:"json",success:function(c){if(c.success){replace_scratch_list_html(c.list_html);set_shoplist_gae("scratch",$("#sclName_"+b).html(),"-Cancel List Edit")}$("#cancel_link").attr("href",attr_href);$("#continue-scl").show();$(".uiv2-shop-red-icon").show()}})}function show_alert(c,a,b){$("#custom-alert").show();$("#alert-msg").empty().html(c);$("#cancel_button").hide();$("#shoplist-mask").show();$("#ok_button").on("click",function(){$("#custom-alert").hide();if(a){a()}$("#shoplist-mask").hide()});set_popup_pos()}function show_confirm(c,a,b){$("#custom-alert").show();$("#cancel_button").show();$("#alert-msg").empty().html(c);$("#shoplist-mask").show();$("#ok_button").unbind("click");$("#ok_button").on("click",function(){$("#custom-alert").hide();$("#shoplist-mask").hide();if(a){a()}});$("#cancel_button").unbind("click");$("#cancel_button").on("click",function(){if(b){b}$("#shoplist-mask").hide();$("#custom-alert").hide()});set_popup_pos()}function set_popup_pos(){var a=$(".uiv2-header-section").width()/2;var b=$(".uiv2-popup-alert").width();var c=a-(b/2)+30;$(".uiv2-popup-alert").css("margin-left",c)}function scratch_list_edit_handler(){if(window.location.pathname.indexOf("ps/sl")!=-1||window.location.pathname.indexOf("ps/ssl")!=-1){$("#create_scratch_list").find("a").attr("href","#");$("#create_scratch_list").click(function(){location.href="/?scl=1"})}scratch_list_edited=false;$(".uiv2-my-scratch-list-wrapper ul li").on("keyup","input",function(a){scratch_list_edited=true})}function unbind_slider(a){$(a+" .uiv2-navigation").parent().remove();$(a+" .Next-btn").unbind("click");$(a+" .Prev-btn").unbind("click");$(a+" .uiv2-navigation li").unbind("click")}function show_tab_help(b,a){help_id="#"+b;$(".tabs-content").hide();$("#"+b).show();$(".tabs li a").removeClass("active");$(help_id+"_a").addClass("active");if(a&&a=="prod"){set_help="prod"}if(a&&a=="scl"){set_help="scl"}if(help_id=="#tab1"){if(set_help=="prod"){trigger_click($("#tab1 .uiv2-navigation li:nth-child(3)"),"#tab1");$("#tab1 .uiv2-navigation li:nth-child(3)").addClass("active")}else{if(set_help=="scl"){trigger_click($("#tab1 .uiv2-navigation li:nth-child(4)"),"#tab1");$("#tab1 .uiv2-navigation li:nth-child(4)").addClass("active")}else{click_li="";set_slider(help_id,click_li,false)}}}else{click_li="";set_slider(help_id,click_li,false)}}function trigger_click(b,a){set_slider(a,b,false);$("#tab1 .uiv2-navigation").find("li").removeClass("active");set_help=""}function set_slider(a,b,c){unbind_slider(a);if(c){setTimeout(function(){slider(".uiv2-slide-obj:visible",300,a,b)},250)}else{slider(".uiv2-slide-obj:visible",300,a,b)}}function hash(g){var b=1,j=0,e,f;if(g){b=0;for(e=g.length-1;e>=0;e--){f=g.charCodeAt(e);b=(b<<6&268435455)+f+(f<<14);j=b&266338304;b=j!=0?b^j>>21:b}}return b}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),b=c.exec(location.search);return b==null?"":decodeURIComponent(b[1].replace(/\+/g," "))}function on_register_free_delivery_token_dialog(){var b=window.location.href;var d=b.split("?")[1];if(d!=undefined&&d.search("delivery_token_msg=1")!=-1){var a=getParameterByName("num_tokens");var c=getParameterByName("valid_to");$("#num_free_delivery_token").html(a);$("#num_free_delivery_token1").html(a);$("#expiry_free_delivery_token").html(c);uiv2_show_popup("uiv2_on_registration_free_delivery_token");$("#uiv2_on_registration_free_delivery_token a.uiv2-popupclose").bind("click",on_register_free_delivery_token_dialog_close)}return false}function on_register_free_delivery_token_dialog_close(){window.location.href=window.location.href.replace(/&?((num_tokens)|(valid_to)|(delivery_token_msg))=([^&]$|[^&]*)/gi,"")}function load_shopping_list_menu(){$("#shoplist-menu").show();if(shopping_list_menu_loaded){$("#shoplist-menu").show()}else{$.ajax({url:make_req_url("/shopping-list-top-menu/"),type:"post",dataType:"json",data:{},success:function(a){if(a.success){$("#shoplist_dropdown").html(a.sl_menu);shopping_list_menu_loaded=true}}})}}function switch_to_mw(){if(confirm("Switch to Mobile Site?")){var a=docCookies.getItem("_bb_rdt");if(ganalytics){ga("set","metric8",1)}if(a){var b=new Date();b.setDate(b.getDate()+365);docCookies.setItem("_bb_rdt",a.split(".")[0]+".1",b.toUTCString(),"/");location.reload()}$.ajax({url:"/log-ui-switch/",type:"post",dataType:"json",data:{switch_from:"DM",csrfmiddlewaretoken:csrf}}).done(function(c){if(ganalytics){ga("send","event","site_view_switch","desktop_to_mobile",c.os+"|"+c.user_agent+"|"+c.resolution+""+c.device)}else{console.log(c)}})}}function truncate_str(b){b=b.toString();var a=b.split(".");return(parseInt(a[1])==0?a[0]:parseFloat(b).toFixed(2))}function remove_email_address(b){if(!parseInt(b)){return}var a="Are you sure you want to remove this address?";if($("#cashback_program"+b).html()){prog_name=$.trim($("#program_name"+b).html());a+=" Deleting this address will remove your association with the member rewards program - "+prog_name}show_confirm(a,function(){$.ajax({url:"/member/delete-email-address/",type:"post",dataType:"json",data:{address_id:b},success:function(d){if(d.success){email_addr=$("#row"+b+"_address").html();$("#row"+b).remove();$(".uiv2-table tr").removeClass("dark");$(".uiv2-table tr:nth-child(even)").addClass("dark");var c="The email address "+email_addr+" has been deleted successfully";$.notifyBar({cls:"success",html:c});$("#cashback_program"+b).remove()}}})},function(){return})}function add_email_address(){email_addr=$.trim($("#new-email-id").val());email_addr=email_addr.replace(/<\/?[^>]+(>|$)/g,"");if(!email_addr){$("#email_error").empty().html("Please enter an email address");return}if(!validate_email(email_addr)){$("#email_error").empty().html("Please enter a valid email address");return}$.ajax({url:"/member/add-email-address/",type:"post",dataType:"json",data:{secondary_email:email_addr},success:function(b){if(b.success){$("#email-address-list").empty().html(b.email_list_html);var a="The email address "+email_addr+" has been added successfully. Please check your email and validate this address";show_alert(a);uiv2_hide_popup("add-email")}else{$("#email_error").empty().html(b.error)}}})}function user_email_validation(a){if(!a){return}$.ajax({url:"/member/user-validate-email/",type:"post",dataType:"json",data:{address_id:a},success:function(b){if(b.success){show_alert("Please check your email for a link to validate this email address")}}})}function empty_cart(){show_confirm("Are you sure you want to remove all items from your basket?",function(){show_loader();$.ajax({url:make_req_url("/basket/empty-basket/"),type:"post",dataType:"json",data:{},success:function(a){if(a.success){$.notifyBar({cls:"success",html:"All items have been removed from your basket"});_gaq.push(["_trackEvent","Basket","Empty Basket - Desktop",$("#no_items").val()]);hide_loader();$("#no_items").val("0");check_empty_cart()}else{$.notifyBar({cls:"error",html:"Unable to remove items from your basket"});hide_loader()}}})},function(){return})}function show_loader(){$(".loadShoplistMask").show()}function hide_loader(){$(".loadShoplistMask").hide()}function check_empty_cart(){if($("#no_items").val()=="0"){$("#empty_message").show();$("#impulse_buying_menu").hide();$("#cart-items").hide()}else{$("#cart-items").show();$("#impulse_buying_menu").show();$("#empty_message").hide()}}function show_featured_product(a){$(".featured-products-hover-box").hide();var b=$("#img_"+a).offset();var c=b.left-140;$("#dyf_"+a).css("left",c+"px");$("#dyf_"+a).show();$(".featured-product").css("margin-left","10px")}function show_add_email_popup(){uiv2_show_popup("add-email");$("#new-email-id").val("");$("#email_error").empty()}function hide_add_email_popup(){uiv2_hide_popup("add-email");$("#new-email-id").val("");$("#email_error").empty()}function show_hide_product_carousel(){var a=9;if($(".es-carousel ul li").length<=a){$(".es-nav").hide();$(".es-carousel").css("margin-left","-25px")}}function make_donation(d,b,c,a){amount=$("#donation_amount").val();fixed=b;if(fixed==0){if(!amount){return}if(isNaN((amount))){show_alert("Please enter a numeric value.");return}if(amount<=0){show_alert("Please enter an amount greater than 0.");return}}if(amount){msg="Click on OK to make a contribution of Rs. "+amount}else{msg="Click on OK to make a contribution of "+$.trim($("#default_amount").html())}var e=confirm(msg);if(e){$.ajax({url:"/sc/make_donation/",type:"post",dataType:"json",data:{campaign_id:d,amount:amount},success:function(f){if(f.success){$("#donation_amount").html("");if($("#payment_social_campaign").val()=="1"){evoucher_amount=$("#evoucher_credit").val();get_summary(evoucher_amount,$("#id_free_delivery").val());update_payment_details(0)}show_alert("Thank you for contributing towards this social cause. Every small bit makes a difference!")}else{location.href="/auth/login/?next=/sc/"+c+"/"}}})}else{return}}function showCampaignPopup(){window.scrollTo(0,40);$("#shoplist-mask").show();$("#campaignData").show();$(".scContent").jScrollPane()}function closeCampaignPopup(){$("#shoplist-mask").hide();$("#campaignData").hide()}(function(d,e,f){d.fn.jScrollPane=function(a){function b(br,bb){var bk,a9=this,a1,bF,aK,bD,a6,a0,s,aO,bi,bS,bs,aW,bh,aX,aV,bO,a5,bz,a2,aM,bw,by,bJ,bC,bl,aT,bu,bm,aI,bq,bP,aZ,be,bG=true,ba=true,bQ=false,aU=false,bA=br.clone(false,false).empty(),bM=d.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";bP=br.css("paddingTop")+" "+br.css("paddingRight")+" "+br.css("paddingBottom")+" "+br.css("paddingLeft");aZ=(parseInt(br.css("paddingLeft"),10)||0)+(parseInt(br.css("paddingRight"),10)||0);function bx(j){var o,m,n,g,h,k,l=false,p=false;bk=j;if(a1===f){h=br.scrollTop();k=br.scrollLeft();br.css({overflow:"hidden",padding:0});bF=br.innerWidth()+aZ;aK=br.innerHeight();br.width(bF);a1=d('<div class="jspPane" />').css("padding",bP).append(br.children());bD=d('<div class="jspContainer" />').css({width:bF+"px",height:aK+"px"}).append(a1).appendTo(br)}else{br.css("width","");l=bk.stickToBottom&&bf();p=bk.stickToRight&&bv();g=br.innerWidth()+aZ!=bF||br.outerHeight()!=aK;if(g){bF=br.innerWidth()+aZ;aK=br.innerHeight();bD.css({width:bF+"px",height:aK+"px"})}if(!g&&be==a6&&a1.outerHeight()==a0){br.width(bF);return}be=a6;a1.css("width","");br.width(bF);bD.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}a1.css("overflow","auto");if(j.contentWidth){a6=j.contentWidth}else{a6=a1[0].scrollWidth}a0=a1[0].scrollHeight;a1.css("overflow","");s=a6/bF;aO=a0/aK;bi=aO>1;bS=s>1;if(!(bS||bi)){br.removeClass("jspScrollable");a1.css({top:0,width:bD.width()-aZ});aR();bp();a8();aJ()}else{br.addClass("jspScrollable");o=bk.maintainPosition&&(bh||bO);if(o){m=bU();n=bW()}bR();c();bn();if(o){bc(p?(a6-bF):m,false);bd(l?(a0-aK):n,false)}bg();bI();bB();if(bk.enableKeyboardNavigation){a7()}if(bk.clickOnTrack){aP()}bt();if(bk.hijackInternalLinks){aS()}}if(bk.autoReinitialise&&!bq){bq=setInterval(function(){bx(bk)},bk.autoReinitialiseDelay)}else{if(!bk.autoReinitialise&&bq){clearInterval(bq)}}h&&br.scrollTop(0)&&bd(h,false);k&&br.scrollLeft(0)&&bc(k,false);br.trigger("jsp-initialised",[bS||bi])}function bR(){if(bi){bD.append(d('<div class="jspVerticalBar" />').append(d('<div class="jspCap jspCapTop" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragTop" />'),d('<div class="jspDragBottom" />'))),d('<div class="jspCap jspCapBottom" />')));a5=bD.find(">.jspVerticalBar");bz=a5.find(">.jspTrack");bs=bz.find(">.jspDrag");if(bk.showArrows){by=d('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",bT(0,-1)).bind("click.jsp",bV);bJ=d('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",bT(0,1)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){by.bind("mouseover.jsp",bT(0,-1,by));bJ.bind("mouseover.jsp",bT(0,1,bJ))}bE(bz,bk.verticalArrowPositions,by,bJ)}aM=aK;bD.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){aM-=d(this).outerHeight()});bs.hover(function(){bs.addClass("jspHover")},function(){bs.removeClass("jspHover")}).bind("mousedown.jsp",function(h){d("html").bind("dragstart.jsp selectstart.jsp",bV);bs.addClass("jspActive");var g=h.pageY-bs.position().top;d("html").bind("mousemove.jsp",function(j){a4(j.pageY-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aQ()}}function aQ(){bz.height(aM+"px");bh=0;a2=bk.verticalGutter+bz.outerWidth();a1.width(bF-a2-aZ);try{if(a5.position().left===0){a1.css("margin-left",a2+"px")}}catch(g){}}function c(){if(bS){bD.append(d('<div class="jspHorizontalBar" />').append(d('<div class="jspCap jspCapLeft" />'),d('<div class="jspTrack" />').append(d('<div class="jspDrag" />').append(d('<div class="jspDragLeft" />'),d('<div class="jspDragRight" />'))),d('<div class="jspCap jspCapRight" />')));bC=bD.find(">.jspHorizontalBar");bl=bC.find(">.jspTrack");aX=bl.find(">.jspDrag");if(bk.showArrows){bm=d('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",bT(-1,0)).bind("click.jsp",bV);aI=d('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",bT(1,0)).bind("click.jsp",bV);if(bk.arrowScrollOnHover){bm.bind("mouseover.jsp",bT(-1,0,bm));aI.bind("mouseover.jsp",bT(1,0,aI))}bE(bl,bk.horizontalArrowPositions,bm,aI)}aX.hover(function(){aX.addClass("jspHover")},function(){aX.removeClass("jspHover")}).bind("mousedown.jsp",function(h){d("html").bind("dragstart.jsp selectstart.jsp",bV);aX.addClass("jspActive");var g=h.pageX-aX.position().left;d("html").bind("mousemove.jsp",function(j){a3(j.pageX-g,false)}).bind("mouseup.jsp mouseleave.jsp",bo);return false});aT=bD.innerWidth();bH()}}function bH(){bD.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){aT-=d(this).outerWidth()});bl.width(aT+"px");bO=0}function bn(){if(bS&&bi){var h=bl.outerHeight(),g=bz.outerWidth();aM-=h;d(bC).find(">.jspCap:visible,>.jspArrow").each(function(){aT+=d(this).outerWidth()});aT-=g;aK-=g;bF-=h;bl.parent().append(d('<div class="jspCorner" />').css("width",h+"px"));aQ();bH()}if(bS){a1.width((bD.outerWidth()-aZ)+"px")}a0=a1.outerHeight();aO=a0/aK;if(bS){bu=Math.ceil(1/s*aT);if(bu>bk.horizontalDragMaxWidth){bu=bk.horizontalDragMaxWidth}else{if(bu<bk.horizontalDragMinWidth){bu=bk.horizontalDragMinWidth}}aX.width(bu+"px");aV=aT-bu;bK(bO)}if(bi){bw=Math.ceil(1/aO*aM);if(bw>bk.verticalDragMaxHeight){bw=bk.verticalDragMaxHeight}else{if(bw<bk.verticalDragMinHeight){bw=bk.verticalDragMinHeight}}bs.height(bw+"px");aW=aM-bw;bL(bh)}}function bE(m,k,n,h){var g="before",l="after",j;if(k=="os"){k=/Mac/.test(navigator.platform)?"after":"split"}if(k==g){l=k}else{if(k==l){g=k;j=n;n=h;h=j}}m[g](n)[l](h)}function bT(j,g,h){return function(){bj(j,g,this,h);this.blur();return false}}function bj(l,m,g,j){g=d(g).addClass("jspActive");var k,n,o=true,h=function(){if(l!==0){a9.scrollByX(l*bk.arrowButtonSpeed)}if(m!==0){a9.scrollByY(m*bk.arrowButtonSpeed)}n=setTimeout(h,o?bk.initialDelay:bk.arrowRepeatFreq);o=false};h();k=j?"mouseout.jsp":"mouseup.jsp";j=j||d("html");j.bind(k,function(){g.removeClass("jspActive");n&&clearTimeout(n);n=null;j.unbind(k)})}function aP(){aJ();if(bi){bz.bind("mousedown.jsp",function(j){if(j.originalTarget===f||j.originalTarget==j.currentTarget){var l=d(this),g=l.offset(),k=j.pageY-g.top-bh,n,o=true,h=function(){var q=l.offset(),p=j.pageY-q.top-bw/2,t=aK*bk.scrollPagePercent,r=aW*t/(a0-aK);if(k<0){if(bh-r>p){a9.scrollByY(-t)}else{a4(p)}}else{if(k>0){if(bh+r<p){a9.scrollByY(t)}else{a4(p)}}else{m();return}}n=setTimeout(h,o?bk.initialDelay:bk.trackClickRepeatFreq);o=false},m=function(){n&&clearTimeout(n);n=null;d(document).unbind("mouseup.jsp",m)};h();d(document).bind("mouseup.jsp",m);return false}})}if(bS){bl.bind("mousedown.jsp",function(j){if(j.originalTarget===f||j.originalTarget==j.currentTarget){var l=d(this),g=l.offset(),k=j.pageX-g.left-bO,n,o=true,h=function(){var q=l.offset(),p=j.pageX-q.left-bu/2,t=bF*bk.scrollPagePercent,r=aV*t/(a6-bF);if(k<0){if(bO-r>p){a9.scrollByX(-t)}else{a3(p)}}else{if(k>0){if(bO+r<p){a9.scrollByX(t)}else{a3(p)}}else{m();return}}n=setTimeout(h,o?bk.initialDelay:bk.trackClickRepeatFreq);o=false},m=function(){n&&clearTimeout(n);n=null;d(document).unbind("mouseup.jsp",m)};h();d(document).bind("mouseup.jsp",m);return false}})}}function aJ(){if(bl){bl.unbind("mousedown.jsp")}if(bz){bz.unbind("mousedown.jsp")}}function bo(){d("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");if(bs){bs.removeClass("jspActive")}if(aX){aX.removeClass("jspActive")}}function a4(g,h){if(!bi){return}if(g<0){g=0}else{if(g>aW){g=aW}}if(h===f){h=bk.animateScroll}if(h){a9.animate(bs,"top",g,bL)}else{bs.css("top",g);bL(g)}}function bL(l){if(l===f){l=bs.position().top}bD.scrollTop(0);bh=l;var h=bh===0,k=bh==aW,j=l/aW,g=-j*(a0-aK);if(bG!=h||bQ!=k){bG=h;bQ=k;br.trigger("jsp-arrow-change",[bG,bQ,ba,aU])}aL(h,k);a1.css("top",g);br.trigger("jsp-scroll-y",[-g,h,k]).trigger("scroll")}function a3(h,g){if(!bS){return}if(h<0){h=0}else{if(h>aV){h=aV}}if(g===f){g=bk.animateScroll}if(g){a9.animate(aX,"left",h,bK)}else{aX.css("left",h);bK(h)}}function bK(l){if(l===f){l=aX.position().left}bD.scrollTop(0);bO=l;var h=bO===0,j=bO==aV,k=l/aV,g=-k*(a6-bF);if(ba!=h||aU!=j){ba=h;aU=j;br.trigger("jsp-arrow-change",[bG,bQ,ba,aU])}aN(h,j);a1.css("left",g);br.trigger("jsp-scroll-x",[-g,h,j]).trigger("scroll")}function aL(h,g){if(bk.showArrows){by[h?"addClass":"removeClass"]("jspDisabled");bJ[g?"addClass":"removeClass"]("jspDisabled")}}function aN(h,g){if(bk.showArrows){bm[h?"addClass":"removeClass"]("jspDisabled");aI[g?"addClass":"removeClass"]("jspDisabled")}}function bd(g,j){var h=g/(a0-aK);a4(h*aW,j)}function bc(j,g){var h=j/(a6-bF);a3(h*aV,g)}function bN(j,o,g){var r,v,u,w=0,k=0,h,p,q,m,n,l;try{r=d(j)}catch(t){return}v=r.outerHeight();u=r.outerWidth();bD.scrollTop(0);bD.scrollLeft(0);while(!r.is(".jspPane")){w+=r.position().top;k+=r.position().left;r=r.offsetParent();if(/^body|html$/i.test(r[0].nodeName)){return}}h=bW();q=h+aK;if(w<h||o){n=w-bk.verticalGutter}else{if(w+v>q){n=w-aK+v+bk.verticalGutter}}if(n){bd(n,g)}p=bU();m=p+bF;if(k<p||o){l=k-bk.horizontalGutter}else{if(k+u>m){l=k-bF+u+bk.horizontalGutter}}if(l){bc(l,g)}}function bU(){return -a1.position().left}function bW(){return -a1.position().top}function bf(){var g=a0-aK;return(g>20)&&(g-bW()<10)}function bv(){var g=a6-bF;return(g>20)&&(g-bU()<10)}function bI(){bD.unbind(bM).bind(bM,function(j,h,k,m){var l=bO,g=bh;a9.scrollBy(k*bk.mouseWheelSpeed,-m*bk.mouseWheelSpeed,false);return l==bO&&g==bh})}function aR(){bD.unbind(bM)}function bV(){return false}function bg(){a1.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(g){bN(g.target,false)})}function bp(){a1.find(":input,a").unbind("focus.jsp")}function a7(){var g,k,h=[];bS&&h.push(bC[0]);bi&&h.push(a5[0]);a1.focus(function(){br.focus()});br.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(l){if(l.target!==this&&!(h.length&&d(l.target).closest(h).length)){return}var m=bO,n=bh;switch(l.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:g=l.keyCode;j();break;case 35:bd(a0-aK);g=null;break;case 36:bd(0);g=null;break}k=l.keyCode==g&&m!=bO||n!=bh;return !k}).bind("keypress.jsp",function(l){if(l.keyCode==g){j()}return !k});if(bk.hideFocus){br.css("outline","none");if("hideFocus" in bD[0]){br.attr("hideFocus",true)}}else{br.css("outline","");if("hideFocus" in bD[0]){br.attr("hideFocus",false)}}function j(){var l=bO,m=bh;switch(g){case 40:a9.scrollByY(bk.keyboardSpeed,false);break;case 38:a9.scrollByY(-bk.keyboardSpeed,false);break;case 34:case 32:a9.scrollByY(aK*bk.scrollPagePercent,false);break;case 33:a9.scrollByY(-aK*bk.scrollPagePercent,false);break;case 39:a9.scrollByX(bk.keyboardSpeed,false);break;case 37:a9.scrollByX(-bk.keyboardSpeed,false);break}k=l!=bO||m!=bh;return k}}function a8(){br.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function bt(){if(location.hash&&location.hash.length>1){var h,k,j=escape(location.hash.substr(1));try{h=d("#"+j+', a[name="'+j+'"]')}catch(g){return}if(h.length&&a1.find(j)){if(bD.scrollTop()===0){k=setInterval(function(){if(bD.scrollTop()>0){bN(h,true);d(document).scrollTop(bD.position().top);clearInterval(k)}},50)}else{bN(h,true);d(document).scrollTop(bD.position().top)}}}}function aS(){if(d(document.body).data("jspHijack")){return}d(document.body).data("jspHijack",true);d(document.body).delegate("a[href*=#]","click",function(q){var h=this.href.substr(0,this.href.indexOf("#")),p=location.href,l,k,g,n,o,m;if(location.href.indexOf("#")!==-1){p=location.href.substr(0,location.href.indexOf("#"))}if(h!==p){return}l=escape(this.href.substr(this.href.indexOf("#")+1));k;try{k=d("#"+l+', a[name="'+l+'"]')}catch(j){return}if(!k.length){return}g=k.closest(".jspScrollable");n=g.data("jsp");n.scrollToElement(k,true);if(g[0].scrollIntoView){o=d(e).scrollTop();m=k.offset().top;if(m<o||m>o+d(e).height()){g[0].scrollIntoView()}}q.preventDefault()})}function bB(){var l,m,j,k,h,g=false;bD.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(o){var n=o.originalEvent.touches[0];l=bU();m=bW();j=n.pageX;k=n.pageY;h=false;g=true}).bind("touchmove.jsp",function(n){if(!g){return}var o=n.originalEvent.touches[0],p=bO,q=bh;a9.scrollTo(l+j-o.pageX,m+k-o.pageY);h=h||Math.abs(j-o.pageX)>5||Math.abs(k-o.pageY)>5;return p==bO&&q==bh}).bind("touchend.jsp",function(n){g=false}).bind("click.jsp-touchclick",function(n){if(h){h=false;return false}})}function aY(){var g=bW(),h=bU();br.removeClass("jspScrollable").unbind(".jsp");br.replaceWith(bA.append(a1.children()));bA.scrollTop(g);bA.scrollLeft(h);if(bq){clearInterval(bq)}}d.extend(a9,{reinitialise:function(g){g=d.extend({},bk,g);bx(g)},scrollToElement:function(h,j,g){bN(h,j,g)},scrollTo:function(h,g,j){bc(h,j);bd(g,j)},scrollToX:function(h,g){bc(h,g)},scrollToY:function(g,h){bd(g,h)},scrollToPercentX:function(h,g){bc(h*(a6-bF),g)},scrollToPercentY:function(h,g){bd(h*(a0-aK),g)},scrollBy:function(j,g,h){a9.scrollByX(j,h);a9.scrollByY(g,h)},scrollByX:function(g,j){var k=bU()+Math[g<0?"floor":"ceil"](g),h=k/(a6-bF);a3(h*aV,j)},scrollByY:function(g,j){var k=bW()+Math[g<0?"floor":"ceil"](g),h=k/(a0-aK);a4(h*aW,j)},positionDragX:function(g,h){a3(g,h)},positionDragY:function(h,g){a4(h,g)},animate:function(l,h,g,j){var k={};k[h]=g;l.animate(k,{duration:bk.animateDuration,easing:bk.animateEase,queue:false,step:j})},getContentPositionX:function(){return bU()},getContentPositionY:function(){return bW()},getContentWidth:function(){return a6},getContentHeight:function(){return a0},getPercentScrolledX:function(){return bU()/(a6-bF)},getPercentScrolledY:function(){return bW()/(a0-aK)},getIsScrollableH:function(){return bS},getIsScrollableV:function(){return bi},getContentPane:function(){return a1},scrollToBottom:function(g){a4(aW,g)},hijackInternalLinks:d.noop,destroy:function(){aY()}});bx(bb)}a=d.extend({},d.fn.jScrollPane.defaults,a);d.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed});return this.each(function(){var h=d(this),c=h.data("jsp");if(c){c.reinitialise(a)}else{d("script",h).filter('[type="text/javascript"],:not([type])').remove();c=new b(h,a);h.data("jsp",c)}})};d.fn.jScrollPane.defaults={showArrows:false,maintainPosition:true,stickToBottom:false,stickToRight:false,clickOnTrack:true,autoReinitialise:false,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:f,animateScroll:false,animateDuration:300,animateEase:"linear",hijackInternalLinks:false,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:false,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:true,hideFocus:false,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);(function(Q,D,J){var G=navigator.userAgent.match(/MSIE ([0-9]{1,}[\.0-9]{0,})/),M=!!G,F=M&&parseFloat(G[1])<7,I=navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i),B={},V=[],P={left:37,up:38,right:39,down:40,enter:13,tab:9,zero:48,z:90,last:221},L=['<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">','<a class="dk_toggle">','<span class="dk_label">{{ label }}</span>',"</a>",'<div class="dk_options">','<ul class="dk_options_inner">',"</ul>","</div>","</div>"].join(""),T='<li class="{{ current }} {{ disabled }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>',N={startSpeed:400,theme:!1,changes:!1,syncReverse:!0,nativeMobile:!0},H=null,R=null,A=function(f,b,h){var d,a,c,g;d=f.attr("data-dk-dropdown-value");a=f.text();c=b.data("dropkick");g=c.$select;b.find(".dk_label").text(a);g.val(d).trigger("change");h=h||!1;c.settings.change&&!h&&!c.settings.syncReverse&&c.settings.change.call(g,d,a)},K=function(a){a.removeClass("dk_open");H=null},O=function(e){var c=e.find(".dk_toggle"),a=e.find(".dk_options").outerHeight(),b=Q(D).height()-c.outerHeight()-c.offset().top+Q(D).scrollTop(),d=c.offset().top-Q(D).scrollTop();return a<d?a<b:!0},k=function(f,b,h){var d=f.find(".dk_options_inner"),a=b.prevAll("li").outerHeight()*b.prevAll("li").length,c=d.scrollTop(),g=d.height()+d.scrollTop()-b.outerHeight();(h&&h.type==="keydown"||a<c||a>g)&&d.scrollTop(a)},U=function(b,a){var c=O(b);b.find(".dk_options").css({top:c?b.find(".dk_toggle").outerHeight()-1:"",bottom:c?"":b.find(".dk_toggle").outerHeight()-1});H=b.toggleClass("dk_open");k(b,b.find(".dk_option_current"),a)},z=function(b,a,c){a.find(".dk_option_current").removeClass("dk_option_current");b.addClass("dk_option_current");k(a,b,c)},C=function(w,aa){var X=w.keyCode,ac=aa.data("dropkick"),W=String.fromCharCode(X),Z=aa.find(".dk_options"),m=aa.hasClass("dk_open"),ah=Z.find("li"),ab=aa.find(".dk_option_current"),ag=ah.first(),ad=ah.last(),Y,af,ae,e,v,b,f;switch(X){case P.enter:if(m){if(!ab.hasClass("disabled")){A(ab.find("a"),aa);K(aa)}}else{U(aa,w)}w.preventDefault();break;case P.tab:if(m){A(ab.find("a"),aa);K(aa)}break;case P.up:af=ab.prev("li");m?af.length?z(af,aa,w):z(ad,aa,w):U(aa,w);w.preventDefault();break;case P.down:if(m){Y=ab.next("li").first();Y.length?z(Y,aa,w):z(ag,aa,w)}else{U(aa,w)}w.preventDefault();break;default:}if(X>=P.zero&&X<=P.z){ae=(new Date).getTime();if(ac.finder===null){ac.finder=W.toUpperCase();ac.timer=ae}else{if(ae>parseInt(ac.timer,10)+1000){ac.finder=W.toUpperCase();ac.timer=ae}else{ac.finder=ac.finder+W.toUpperCase();ac.timer=ae}}e=ah.find("a");for(v=0,b=e.length;v<b;v++){f=Q(e[v]);if(f.html().toUpperCase().indexOf(ac.finder)===0){A(f,aa);z(f.parent(),aa,w);break}}aa.data("dropkick",ac)}},j=function(a){return Q.trim(a).length>0?a:!1},q=function(m,d){var b=m.replace("{{ id }}",d.id).replace("{{ label }}",d.label).replace("{{ tabindex }}",d.tabindex),e=[],p,c,l,h,g;if(d.options&&d.options.length){for(c=0,l=d.options.length;c<l;c++){h=Q(d.options[c]);c===0&&h.attr("selected")!==undefined&&h.attr("disabled")!==undefined?g=null:g=T.replace("{{ value }}",h.val()).replace("{{ current }}",j(h.val())===d.value?"dk_option_current":"").replace("{{ disabled }}",h.attr("disabled")!==undefined?"disabled":"").replace("{{ text }}",h.html());e[e.length]=g}}p=Q(b);p.find(".dk_options_inner").html(e.join(""));return p};F||(J.documentElement.className=J.documentElement.className+" dk_fouc");B.init=function(a){a=Q.extend({},N,a);return this.each(function(){var e=Q(this),b=e.find(":selected").first(),g=e.find("option"),x=e.data("dropkick")||{},w=e.attr("id")||e.attr("name"),m=a.width||e.outerWidth(),o=e.attr("tabindex")||"0",l=!1,d,t;if(x.id){return e}x.settings=a;x.tabindex=o;x.id=w;x.$original=b;x.$select=e;x.value=j(e.val())||j(b.attr("value"));x.label=b.text();x.options=g;l=q(L,x);l.find(".dk_toggle").css({width:m+"px"});e.before(l).appendTo(l);l=Q('div[id="dk_container_'+w+'"]').fadeIn(a.startSpeed);d=a.theme||"default";l.addClass("dk_theme_"+d);x.theme=d;x.$dk=l;e.data("dropkick",x);l.addClass(e.attr("class"));l.data("dropkick",x);V[V.length]=e;l.bind("focus.dropkick",function(){R=l.addClass("dk_focus")}).bind("blur.dropkick",function(){l.removeClass("dk_focus");R=null});I&&x.settings.nativeMobile&&l.addClass("dk_mobile");x.settings.syncReverse&&e.on("change",function(f){var h=e.val(),c=Q('a[data-dk-dropdown-value="'+h+'"]',l),n=c.text();l.find(".dk_label").text(n);x.settings.change&&x.settings.change.call(e,h,n);z(c.parent(),l,f)});if(e.attr("form")||e.closest("form").length){t=e.attr("form")?Q("#"+e.attr("form").replace(" ",", #")):e.closest("form");t.on("reset",function(){e.dropkick("reset")})}})};B.theme=function(b){var d=Q(this).data("dropkick"),c=d.$dk,a="dk_theme_"+d.theme;c.removeClass(a).addClass("dk_theme_"+b);d.theme=b};B.reset=function(){return this.each(function(){var a=Q(this).data("dropkick"),c=a.$dk,b=Q('a[data-dk-dropdown-value="'+a.value+'"]',c);!a.$original.eq(0).prop("selected")&&a.$original.eq(0).prop("selected",!0);c.find(".dk_label").text(a.label);z(b.parent(),c)})};B.setValue=function(a){var c=Q(this).data("dropkick").$dk,b=Q('.dk_options a[data-dk-dropdown-value="'+a+'"]',c);if(b.length){A(b,c);z(b.parent(),c)}else{console.warn("There is no option with this value in the <select>")}};B.refresh=function(){return this.each(function(){var a=Q(this).data("dropkick"),c=a.$select,b=a.$dk;a.settings.startSpeed=0;c.removeData("dropkick").insertAfter(b);b.remove();c.dropkick(a.settings)})};Q.fn.dropkick=function(a){if(!F){if(B[a]){return B[a].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof a=="object"||!a){return B.init.apply(this,arguments)}}};Q(function(){Q(J).on(M?"mousedown":"click",".dk_options a",function(){var b=Q(this),c=b.parents(".dk_container").first();if(!b.parent().hasClass("disabled")){A(b,c);z(b.parent(),c);K(c)}return !1});Q(J).bind("keydown.dk_nav",function(c){var b=null;H?b=H:R&&!H&&(b=R);b&&C(c,b)});Q(J).on("click",null,function(b){if(H&&Q(b.target).closest(".dk_container").length===0){K(H)}else{if(Q(b.target).is(".dk_toggle, .dk_label")){var c=Q(b.target).parents(".dk_container").first();if(c.hasClass("dk_open")){K(c)}else{H&&K(H);U(c,b)}return !1}}});var a="onwheel" in D?"wheel":"onmousewheel" in J?"mousewheel":"MouseScrollEvent" in D?"DOMMouseScroll MozMousePixelScroll":!1;a&&Q(J).on(a,".dk_options_inner",function(c){var b=c.originalEvent.wheelDelta||-c.originalEvent.deltaY||-c.originalEvent.detail;if(M){this.scrollTop-=Math.round(b/10);return !1}return b>0&&this.scrollTop<=0||b<0&&this.scrollTop>=this.scrollHeight-this.offsetHeight?!1:!0})})})(jQuery,window,document);(function(b){b.fn.addBack=b.fn.addBack||b.fn.andSelf;b.fn.extend({actual:function(v,a){if(!this[v]){throw'$.actual => The jQuery method "'+v+'" you called does not exist'}var r={absolute:false,clone:false,includeMargin:false};var o=b.extend(r,a);var s=this.eq(0);var p,n;if(o.clone===true){p=function(){var c="position: absolute !important; top: -1000 !important; ";s=s.clone().attr("style",c).appendTo("body")};n=function(){s.remove()}}else{var q=[];var t="";var u;p=function(){u=s.parents().addBack().filter(":hidden");t+="visibility: hidden !important; display: block !important; ";if(o.absolute===true){t+="position: absolute !important; "}u.each(function(){var c=b(this);q.push(c.attr("style"));c.attr("style",t)})};n=function(){u.each(function(c){var d=b(this);var e=q[c];if(e===undefined){d.removeAttr("style")}else{d.attr("style",e)}})}}p();var m=/(outer)/.test(v)?s[v](o.includeMargin):s[v]();n();return m}})})(jQuery);
/*! Hammer.JS - v1.0.6dev - 2013-04-10
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <j.tangelder@gmail.com>;
 * Licensed under the MIT license */
(function(b,f){function h(){if(!a.READY){a.event.determineEventTypes();for(var e in a.gestures){a.gestures.hasOwnProperty(e)&&a.detection.register(a.gestures[e])}a.event.onTouch(a.DOCUMENT,a.EVENT_MOVE,a.detection.detect),a.event.onTouch(a.DOCUMENT,a.EVENT_END,a.detection.detect),a.READY=!0}}var a=function(j,k){return new a.Instance(j,k||{})};a.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},a.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,a.HAS_TOUCHEVENTS="ontouchstart" in b,a.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,a.NO_MOUSEEVENTS=a.HAS_TOUCHEVENTS&&navigator.userAgent.match(a.MOBILE_REGEX),a.EVENT_TYPES={},a.DIRECTION_DOWN="down",a.DIRECTION_LEFT="left",a.DIRECTION_UP="up",a.DIRECTION_RIGHT="right",a.POINTER_MOUSE="mouse",a.POINTER_TOUCH="touch",a.POINTER_PEN="pen",a.EVENT_START="start",a.EVENT_MOVE="move",a.EVENT_END="end",a.DOCUMENT=document,a.plugins={},a.READY=!1,a.Instance=function(j,l){var k=this;return h(),this.element=j,this.enabled=!0,this.options=a.utils.extend(a.utils.extend({},a.defaults),l||{}),this.options.stop_browser_behavior&&a.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),a.event.onTouch(j,a.EVENT_START,function(e){k.enabled&&a.detection.startDetect(k,e)}),this},a.Instance.prototype={on:function(k,l){for(var m=k.split(" "),j=0;m.length>j;j++){this.element.addEventListener(m[j],l,!1)}return this},off:function(k,l){for(var m=k.split(" "),j=0;m.length>j;j++){this.element.removeEventListener(m[j],l,!1)}return this},trigger:function(j,l){var m=a.DOCUMENT.createEvent("Event");m.initEvent(j,!0,!0),m.gesture=l;var k=this.element;return a.utils.hasParent(l.target,k)&&(k=l.target),k.dispatchEvent(m),this},enable:function(e){return this.enabled=e,this}};var d=null,g=!1,c=!1;a.event={bindDom:function(k,m,o){for(var j=m.split(" "),l=0;j.length>l;l++){k.addEventListener(j[l],o,!1)}},onTouch:function(k,l,m){var j=this;this.bindDom(k,a.EVENT_TYPES[l],function(o){var e=o.type.toLowerCase();if(!e.match(/mouse/)||!c){e.match(/touch/)||e.match(/pointerdown/)||e.match(/mouse/)&&1===o.which?g=!0:e.match(/mouse/)&&1!==o.which&&(g=!1),e.match(/touch|pointer/)&&(c=!0);var n=0;g&&(a.HAS_POINTEREVENTS&&l!=a.EVENT_END?n=a.PointerEvent.updatePointer(l,o):e.match(/touch/)?n=o.touches.length:c||(n=e.match(/up/)?0:1),n>0&&l==a.EVENT_END?l=a.EVENT_MOVE:n||(l=a.EVENT_END),n||null===d?d=o:o=d,m.call(a.detection,j.collectEventData(k,l,o)),a.HAS_POINTEREVENTS&&l==a.EVENT_END&&(n=a.PointerEvent.updatePointer(l,o))),n||(d=null,g=!1,c=!1,a.PointerEvent.reset())}})},determineEventTypes:function(){var e;e=a.HAS_POINTEREVENTS?a.PointerEvent.getEvents():a.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],a.EVENT_TYPES[a.EVENT_START]=e[0],a.EVENT_TYPES[a.EVENT_MOVE]=e[1],a.EVENT_TYPES[a.EVENT_END]=e[2]},getTouchList:function(e){return a.HAS_POINTEREVENTS?a.PointerEvent.getTouchList():e.touches?e.touches:[{identifier:1,pageX:e.pageX,pageY:e.pageY,target:e.target}]},collectEventData:function(j,l,p){var k=this.getTouchList(p,l),m=a.POINTER_TOUCH;return(p.type.match(/mouse/)||a.PointerEvent.matchType(a.POINTER_MOUSE,p))&&(m=a.POINTER_MOUSE),{center:a.utils.getCenter(k),timeStamp:(new Date).getTime(),target:p.target,touches:k,eventType:l,pointerType:m,srcEvent:p,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return a.detection.stopDetect()}}}},a.PointerEvent={pointers:{},getTouchList:function(){var j=this,k=[];return Object.keys(j.pointers).sort().forEach(function(e){k.push(j.pointers[e])}),k},updatePointer:function(j,k){return j==a.EVENT_END?this.pointers={}:(k.identifier=k.pointerId,this.pointers[k.pointerId]=k),Object.keys(this.pointers).length},matchType:function(j,k){if(!k.pointerType){return !1}var l={};return l[a.POINTER_MOUSE]=k.pointerType==k.MSPOINTER_TYPE_MOUSE||k.pointerType==a.POINTER_MOUSE,l[a.POINTER_TOUCH]=k.pointerType==k.MSPOINTER_TYPE_TOUCH||k.pointerType==a.POINTER_TOUCH,l[a.POINTER_PEN]=k.pointerType==k.MSPOINTER_TYPE_PEN||k.pointerType==a.POINTER_PEN,l[j]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},a.utils={extend:function(j,l,e){for(var k in l){j[k]!==f&&e||(j[k]=l[k])}return j},hasParent:function(j,k){for(;j;){if(j==k){return !0}j=j.parentNode}return !1},getCenter:function(k){for(var m=[],o=[],j=0,l=k.length;l>j;j++){m.push(k[j].pageX),o.push(k[j].pageY)}return{pageX:(Math.min.apply(Math,m)+Math.max.apply(Math,m))/2,pageY:(Math.min.apply(Math,o)+Math.max.apply(Math,o))/2}},getVelocity:function(j,k,l){return{x:Math.abs(k/j)||0,y:Math.abs(l/j)||0}},getAngle:function(k,l){var m=l.pageY-k.pageY,j=l.pageX-k.pageX;return 180*Math.atan2(m,j)/Math.PI},getDirection:function(j,l){var m=Math.abs(j.pageX-l.pageX),k=Math.abs(j.pageY-l.pageY);return m>=k?j.pageX-l.pageX>0?a.DIRECTION_LEFT:a.DIRECTION_RIGHT:j.pageY-l.pageY>0?a.DIRECTION_UP:a.DIRECTION_DOWN},getDistance:function(k,l){var m=l.pageX-k.pageX,j=l.pageY-k.pageY;return Math.sqrt(m*m+j*j)},getScale:function(j,k){return j.length>=2&&k.length>=2?this.getDistance(k[0],k[1])/this.getDistance(j[0],j[1]):1},getRotation:function(j,k){return j.length>=2&&k.length>=2?this.getAngle(k[1],k[0])-this.getAngle(j[1],j[0]):0},isVertical:function(e){return e==a.DIRECTION_UP||e==a.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(k,m){var q,j=["webkit","khtml","moz","ms","o",""];if(m&&k.style){for(var l=0;j.length>l;l++){for(var p in m){m.hasOwnProperty(p)&&(q=p,j[l]&&(q=j[l]+q.substring(0,1).toUpperCase()+q.substring(1)),k.style[q]=m[p])}}"none"==m.userSelect&&(k.onselectstart=function(){return !1})}}},a.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(j,k){this.current||(this.stopped=!1,this.current={inst:j,startEvent:a.utils.extend({},k),lastEvent:!1,name:""},this.detect(k))},detect:function(j){if(this.current&&!this.stopped){j=this.extendEventData(j);for(var l=this.current.inst.options,p=0,k=this.gestures.length;k>p;p++){var m=this.gestures[p];if(!this.stopped&&l[m.name]!==!1&&m.handler.call(m,j,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=j),j.eventType==a.EVENT_END&&!j.touches.length-1&&this.stopDetect(),j}},stopDetect:function(){this.previous=a.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(k){var p=this.current.startEvent;if(p&&(k.touches.length!=p.touches.length||k.touches===p.touches)){p.touches=[];for(var v=0,m=k.touches.length;m>v;v++){p.touches.push(a.utils.extend({},k.touches[v]))}}var q=k.timeStamp-p.timeStamp,l=k.center.pageX-p.center.pageX,j=k.center.pageY-p.center.pageY,u=a.utils.getVelocity(q,l,j);return a.utils.extend(k,{deltaTime:q,deltaX:l,deltaY:j,velocityX:u.x,velocityY:u.y,distance:a.utils.getDistance(p.center,k.center),angle:a.utils.getAngle(p.center,k.center),direction:a.utils.getDirection(p.center,k.center),scale:a.utils.getScale(p.touches,k.touches),rotation:a.utils.getRotation(p.touches,k.touches),startEvent:p}),k},register:function(e){var j=e.defaults||{};return j[e.name]===f&&(j[e.name]=!0),a.utils.extend(a.defaults,j,!0),e.index=e.index||1000,this.gestures.push(e),this.gestures.sort(function(k,l){return k.index<l.index?-1:k.index>l.index?1:0}),this.gestures}},a.gestures=a.gestures||{},a.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(j,k){switch(j.eventType){case a.EVENT_START:clearTimeout(this.timer),a.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==a.detection.current.name&&k.trigger("hold",j)},k.options.hold_timeout);break;case a.EVENT_MOVE:j.distance>k.options.hold_threshold&&clearTimeout(this.timer);break;case a.EVENT_END:clearTimeout(this.timer)}}},a.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(j,l){if(j.eventType==a.EVENT_END){var m=a.detection.previous,k=!1;if(j.deltaTime>l.options.tap_max_touchtime||j.distance>l.options.tap_max_distance){return}m&&"tap"==m.name&&j.timeStamp-m.lastEvent.timeStamp<l.options.doubletap_interval&&j.distance<l.options.doubletap_distance&&(l.trigger("doubletap",j),k=!0),(!k||l.options.tap_always)&&(a.detection.current.name="tap",l.trigger(a.detection.current.name,j))}}},a.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:0.7},handler:function(j,k){if(j.eventType==a.EVENT_END){if(k.options.swipe_max_touches>0&&j.touches.length>k.options.swipe_max_touches){return}(j.velocityX>k.options.swipe_velocity||j.velocityY>k.options.swipe_velocity)&&(k.trigger(this.name,j),k.trigger(this.name+j.direction,j))}}},a.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(e,k){if(a.detection.current.name!=this.name&&this.triggered){return k.trigger(this.name+"end",e),this.triggered=!1,f}if(!(k.options.drag_max_touches>0&&e.touches.length>k.options.drag_max_touches)){switch(e.eventType){case a.EVENT_START:this.triggered=!1;break;case a.EVENT_MOVE:if(e.distance<k.options.drag_min_distance&&a.detection.current.name!=this.name){return}a.detection.current.name=this.name,(a.detection.current.lastEvent.drag_locked_to_axis||k.options.drag_lock_to_axis&&k.options.drag_lock_min_distance<=e.distance)&&(e.drag_locked_to_axis=!0);var j=a.detection.current.lastEvent.direction;e.drag_locked_to_axis&&j!==e.direction&&(e.direction=a.utils.isVertical(j)?0>e.deltaY?a.DIRECTION_UP:a.DIRECTION_DOWN:0>e.deltaX?a.DIRECTION_LEFT:a.DIRECTION_RIGHT),this.triggered||(k.trigger(this.name+"start",e),this.triggered=!0),k.trigger(this.name,e),k.trigger(this.name+e.direction,e),(k.options.drag_block_vertical&&a.utils.isVertical(e.direction)||k.options.drag_block_horizontal&&!a.utils.isVertical(e.direction))&&e.preventDefault();break;case a.EVENT_END:this.triggered&&k.trigger(this.name+"end",e),this.triggered=!1}}}},a.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:0.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(e,l){if(a.detection.current.name!=this.name&&this.triggered){return l.trigger(this.name+"end",e),this.triggered=!1,f}if(!(2>e.touches.length)){switch(l.options.transform_always_block&&e.preventDefault(),e.eventType){case a.EVENT_START:this.triggered=!1;break;case a.EVENT_MOVE:var j=Math.abs(1-e.scale),k=Math.abs(e.rotation);if(l.options.transform_min_scale>j&&l.options.transform_min_rotation>k){return}a.detection.current.name=this.name,this.triggered||(l.trigger(this.name+"start",e),this.triggered=!0),l.trigger(this.name,e),k>l.options.transform_min_rotation&&l.trigger("rotate",e),j>l.options.transform_min_scale&&(l.trigger("pinch",e),l.trigger("pinch"+(1>e.scale?"in":"out"),e));break;case a.EVENT_END:this.triggered&&l.trigger(this.name+"end",e),this.triggered=!1}}}},a.gestures.Touch={name:"touch",index:-1/0,defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(e,j){return j.options.prevent_mouseevents&&e.pointerType==a.POINTER_MOUSE?(e.stopDetect(),f):(j.options.prevent_default&&e.preventDefault(),e.eventType==a.EVENT_START&&j.trigger(this.name,e),f)}},a.gestures.Release={name:"release",index:1/0,handler:function(j,k){j.eventType==a.EVENT_END&&k.trigger(this.name,j)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=a:(b.Hammer=a,"function"==typeof b.define&&b.define.amd&&b.define("hammer",[],function(){return a}))})(this),function(a,b){a!==b&&(Hammer.event.bindDom=function(e,c,d){a(e).on(c,function(f){var g=f.originalEvent||f;g.pageX===b&&(g.pageX=f.pageX,g.pageY=f.pageY),g.target||(g.target=f.target),g.which===b&&(g.which=g.button),g.preventDefault||(g.preventDefault=f.preventDefault),g.stopPropagation||(g.stopPropagation=f.stopPropagation),d.call(this,g)})},Hammer.Instance.prototype.on=function(c,d){return a(this.element).on(c,d)},Hammer.Instance.prototype.off=function(c,d){return a(this.element).off(c,d)},Hammer.Instance.prototype.trigger=function(d,f){var c=a(this.element);return c.has(f.target).length&&(c=a(f.target)),c.trigger({type:d,gesture:f})},a.fn.hammer=function(c){return this.each(function(){var e=a(this),d=e.data("hammer");d?d&&c&&Hammer.utils.extend(d.options,c):e.data("hammer",new Hammer(this,c||{}))})})}(window.jQuery||window.Zepto);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):"object"===typeof exports?module.exports=a:a(jQuery)})(function(t){function f(h){var q=h||window.event,l=a.call(arguments,1),n=0,p=0,d=0,m=0;h=t.event.fix(q);h.type="mousewheel";"detail" in q&&(d=-1*q.detail);"wheelDelta" in q&&(d=q.wheelDelta);"wheelDeltaY" in q&&(d=q.wheelDeltaY);"wheelDeltaX" in q&&(p=-1*q.wheelDeltaX);"axis" in q&&q.axis===q.HORIZONTAL_AXIS&&(p=-1*d,d=0);n=0===d?p:d;"deltaY" in q&&(n=d=-1*q.deltaY);"deltaX" in q&&(p=q.deltaX,0===d&&(n=-1*p));if(0!==d||0!==p){1===q.deltaMode?(m=t.data(this,"mousewheel-line-height"),n*=m,d*=m,p*=m):2===q.deltaMode&&(m=t.data(this,"mousewheel-page-height"),n*=m,d*=m,p*=m);m=Math.max(Math.abs(d),Math.abs(p));if(!o||m<o){o=m,g.settings.adjustOldDeltas&&"mousewheel"===q.type&&0===m%120&&(o/=40)}g.settings.adjustOldDeltas&&"mousewheel"===q.type&&0===m%120&&(n/=40,p/=40,d/=40);n=Math[1<=n?"floor":"ceil"](n/o);p=Math[1<=p?"floor":"ceil"](p/o);d=Math[1<=d?"floor":"ceil"](d/o);h.deltaX=p;h.deltaY=d;h.deltaFactor=o;h.deltaMode=0;l.unshift(h,n,p,d);e&&clearTimeout(e);e=setTimeout(u,200);return(t.event.dispatch||t.event.handle).apply(this,l)}}function u(){o=null}var c=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],j="onwheel" in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],a=Array.prototype.slice,e,o;if(t.event.fixHooks){for(var b=c.length;b;){t.event.fixHooks[c[--b]]=t.event.mouseHooks}}var g=t.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var d=j.length;d;){this.addEventListener(j[--d],f,!1)}}else{this.onmousewheel=f}t.data(this,"mousewheel-line-height",g.getLineHeight(this));t.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var d=j.length;d;){this.removeEventListener(j[--d],f,!1)}}else{this.onmousewheel=null}},getLineHeight:function(d){return parseInt(t(d)["offsetParent" in t.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(d){return t(d).height()},settings:{adjustOldDeltas:!0}};t.fn.extend({mousewheel:function(d){return d?this.bind("mousewheel",d):this.trigger("mousewheel")},unmousewheel:function(d){return this.unbind("mousewheel",d)}})});
/*!
 * VERSION: 1.11.2
 * DATE: 2013-11-20
 * UPDATES AND DOCS AT: http://www.greensock.com
 *
 * Includes all of the following: TweenLite, TweenMax, TimelineLite, TimelineMax, EasePack, CSSPlugin, RoundPropsPlugin, BezierPlugin, AttrPlugin, DirectionalRotationPlugin
 *
 * @license Copyright (c) 2008-2013, GreenSock. All rights reserved.
 * This work is subject to the terms at http://www.greensock.com/terms_of_use.html or for
 * Club GreenSock members, the software agreement that was issued with your membership.
 *
 * @author: Jack Doyle, jack@greensock.com
// **/
/*!
 * VERSION: 1.1
 * DATE: 01-31-2014
 *
 * TouchNSwipe
 *
 * @license Copyright (c) 2014, Ron Feliciano. All rights reserved.
 * This work is subject to the terms at http://codecanyon.net/licenses
 *
 * @author: Ron Feliciano
 * contact me through http://codecanyon.net/user/ronfeliciano/?ref=ronfeliciano
 **/
(function(a){a.extend(a.fn,{validate:function(d){if(this.length){var c=a.data(this[0],"validator");if(c){return c}this.attr("novalidate","novalidate");c=new a.validator(d,this[0]);a.data(this[0],"validator",c);if(c.settings.onsubmit){d=this.find("input, button");d.filter(".cancel").click(function(){c.cancelSubmit=true});c.settings.submitHandler&&d.filter(":submit").click(function(){c.submitButton=this});this.submit(function(f){function b(){if(c.settings.submitHandler){if(c.submitButton){var e=a("<input type='hidden'/>").attr("name",c.submitButton.name).val(c.submitButton.value).appendTo(c.currentForm)}c.settings.submitHandler.call(c,c.currentForm);c.submitButton&&e.remove();return false}return true}c.settings.debug&&f.preventDefault();if(c.cancelSubmit){c.cancelSubmit=false;return b()}if(c.form()){if(c.pendingRequest){c.formSubmitted=true;return false}return b()}else{c.focusInvalid();return false}})}return c}else{d&&d.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing")}},valid:function(){if(a(this[0]).is("form")){return this.validate().form()}else{var d=true,c=a(this[0].form).validate();this.each(function(){d&=c.element(this)});return d}},removeAttrs:function(e){var c={},f=this;a.each(e.split(/\s/),function(d,b){c[b]=f.attr(b);f.removeAttr(b)});return c},rules:function(j,c){var o=this[0];if(j){var n=a.data(o.form,"validator").settings,m=n.rules,l=a.validator.staticRules(o);switch(j){case"add":a.extend(l,a.validator.normalizeRule(c));m[o.name]=l;if(c.messages){n.messages[o.name]=a.extend(n.messages[o.name],c.messages)}break;case"remove":if(!c){delete m[o.name];return l}var k={};a.each(c.split(/\s/),function(b,d){k[d]=l[d];delete l[d]});return k}}o=a.validator.normalizeRules(a.extend({},a.validator.metadataRules(o),a.validator.classRules(o),a.validator.attributeRules(o),a.validator.staticRules(o)),o);if(o.required){n=o.required;delete o.required;o=a.extend({required:n},o)}return o}});a.extend(a.expr[":"],{blank:function(b){return !a.trim(""+b.value)},filled:function(b){return !!a.trim(""+b.value)},unchecked:function(b){return !b.checked}});a.validator=function(d,c){this.settings=a.extend(true,{},a.validator.defaults,d);this.currentForm=c;this.init()};a.validator.format=function(d,c){if(arguments.length==1){return function(){var b=a.makeArray(arguments);b.unshift(d);return a.validator.format.apply(this,b)}}if(arguments.length>2&&c.constructor!=Array){c=a.makeArray(arguments).slice(1)}if(c.constructor!=Array){c=[c]}a.each(c,function(f,b){d=d.replace(RegExp("\\{"+f+"\\}","g"),b)});return d};a.extend(a.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:a([]),errorLabelContainer:a([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(b){this.lastActive=b;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,b,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(b)).hide()}},onfocusout:function(b){if(!this.checkable(b)&&(b.name in this.submitted||!this.optional(b))){this.element(b)}},onkeyup:function(b){if(b.name in this.submitted||b==this.lastElement){this.element(b)}},onclick:function(b){if(b.name in this.submitted){this.element(b)}else{b.parentNode.name in this.submitted&&this.element(b.parentNode)}},highlight:function(e,c,f){e.type==="radio"?this.findByName(e.name).addClass(c).removeClass(f):a(e).addClass(c).removeClass(f)},unhighlight:function(e,c,f){e.type==="radio"?this.findByName(e.name).removeClass(c).addClass(f):a(e).removeClass(c).addClass(f)}},setDefaults:function(b){a.extend(a.validator.defaults,b)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:a.validator.format("Please enter no more than {0} characters."),minlength:a.validator.format("Please enter at least {0} characters."),rangelength:a.validator.format("Please enter a value between {0} and {1} characters long."),range:a.validator.format("Please enter a value between {0} and {1}."),max:a.validator.format("Please enter a value less than or equal to {0}."),min:a.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){function e(h){var d=a.data(this[0].form,"validator"),b="on"+h.type.replace(/^validate/,"");d.settings[b]&&d.settings[b].call(d,this[0],h)}this.labelContainer=a(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||a(this.currentForm);this.containers=a(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var c=this.groups={};a.each(this.settings.groups,function(d,b){a.each(b.split(/\s/),function(k,j){c[j]=d})});var f=this.settings.rules;a.each(f,function(d,b){f[d]=a.validator.normalizeRule(b)});a(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",e).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",e);this.settings.invalidHandler&&a(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){this.checkForm();a.extend(this.submitted,this.errorMap);this.invalid=a.extend({},this.errorMap);this.valid()||a(this.currentForm).triggerHandler("invalid-form",[this]);this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var d=0,c=this.currentElements=this.elements();c[d];d++){this.check(c[d])}return this.valid()},element:function(d){this.lastElement=d=this.validationTargetFor(this.clean(d));this.prepareElement(d);this.currentElements=a(d);var c=this.check(d);if(c){delete this.invalid[d.name]}else{this.invalid[d.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return c},showErrors:function(d){if(d){a.extend(this.errorMap,d);this.errorList=[];for(var c in d){this.errorList.push({message:d[c],element:this.findByName(c)[0]})}this.successList=a.grep(this.successList,function(b){return !(b.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){a.fn.resetForm&&a(this.currentForm).resetForm();this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var c=0,f;for(f in e){c++}return c},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{a(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(b){}}},findLastActive:function(){var b=this.lastActive;return b&&a.grep(this.errorList,function(c){return c.element.name==b.name}).length==1&&b},elements:function(){var d=this,c={};return a(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in c||!d.objectLength(a(this).rules())){return false}return c[this.name]=true})},clean:function(b){return a(b)[0]},errors:function(){return a(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=a([]);this.toHide=a([]);this.currentElements=a([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(b){this.reset();this.toHide=this.errorsFor(b)},check:function(j){j=this.validationTargetFor(this.clean(j));var c=a(j).rules(),o=false,n;for(n in c){var m={method:n,parameters:c[n]};try{var l=a.validator.methods[n].call(this,j.value.replace(/\r/g,""),j,m.parameters);if(l=="dependency-mismatch"){o=true}else{o=false;if(l=="pending"){this.toHide=this.toHide.not(this.errorsFor(j));return}if(!l){this.formatAndAdd(j,m);return false}}}catch(k){this.settings.debug&&window.console&&console.log("exception occured when checking element "+j.id+", check the '"+m.method+"' method",k);throw k}}if(!o){this.objectLength(c)&&this.successList.push(j);return true}},customMetaMessage:function(e,c){if(a.metadata){var f=this.settings.meta?a(e).metadata()[this.settings.meta]:a(e).metadata();return f&&f.messages&&f.messages[c]}},customMessage:function(e,c){var f=this.settings.messages[e];return f&&(f.constructor==String?f:f[c])},findDefined:function(){for(var b=0;b<arguments.length;b++){if(arguments[b]!==undefined){return arguments[b]}}},defaultMessage:function(d,c){return this.findDefined(this.customMessage(d.name,c),this.customMetaMessage(d,c),!this.settings.ignoreTitle&&d.title||undefined,a.validator.messages[c],"<strong>Warning: No message defined for "+d.name+"</strong>")},formatAndAdd:function(f,c){var h=this.defaultMessage(f,c.method),g=/\$?\{(\d+)\}/g;if(typeof h=="function"){h=h.call(this,c.parameters,f)}else{if(g.test(h)){h=jQuery.format(h.replace(g,"{$1}"),c.parameters)}}this.errorList.push({message:h,element:f});this.errorMap[f.name]=h;this.submitted[f.name]=h},addWrapper:function(b){if(this.settings.wrapper){b=b.add(b.parent(this.settings.wrapper))}return b},defaultShowErrors:function(){for(var d=0;this.errorList[d];d++){var c=this.errorList[d];this.settings.highlight&&this.settings.highlight.call(this,c.element,this.settings.errorClass,this.settings.validClass);this.showLabel(c.element,c.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(d=0;this.successList[d];d++){this.showLabel(this.successList[d])}}if(this.settings.unhighlight){d=0;for(c=this.validElements();c[d];d++){this.settings.unhighlight.call(this,c[d],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return a(this.errorList).map(function(){return this.element})},showLabel:function(e,c){var f=this.errorsFor(e);if(f.length){f.removeClass(this.settings.validClass).addClass(this.settings.errorClass);f.attr("generated")&&f.html(c)}else{f=a("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(e),generated:true}).addClass(this.settings.errorClass).html(c||"");if(this.settings.wrapper){f=f.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}this.labelContainer.append(f).length||(this.settings.errorPlacement?this.settings.errorPlacement(f,a(e)):f.insertAfter(e))}if(!c&&this.settings.success){f.text("");typeof this.settings.success=="string"?f.addClass(this.settings.success):this.settings.success(f)}this.toShow=this.toShow.add(f)},errorsFor:function(d){var c=this.idOrName(d);return this.errors().filter(function(){return a(this).attr("for")==c})},idOrName:function(b){return this.groups[b.name]||(this.checkable(b)?b.name:b.id||b.name)},validationTargetFor:function(b){if(this.checkable(b)){b=this.findByName(b.name).not(this.settings.ignore)[0]}return b},checkable:function(b){return/radio|checkbox/i.test(b.type)},findByName:function(d){var c=this.currentForm;return a(document.getElementsByName(d)).map(function(f,b){return b.form==c&&b.name==d&&b||null})},getLength:function(d,c){switch(c.nodeName.toLowerCase()){case"select":return a("option:selected",c).length;case"input":if(this.checkable(c)){return this.findByName(c.name).filter(":checked").length}}return d.length},depend:function(d,c){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,c):true},dependTypes:{"boolean":function(b){return b},string:function(d,c){return !!a(d,c.form).length},"function":function(d,c){return d(c)}},optional:function(b){return !a.validator.methods.required.call(this,a.trim(b.value),b)&&"dependency-mismatch"},startRequest:function(b){if(!this.pending[b.name]){this.pendingRequest++;this.pending[b.name]=true}},stopRequest:function(d,c){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[d.name];if(c&&this.pendingRequest==0&&this.formSubmitted&&this.form()){a(this.currentForm).submit();this.formSubmitted=false}else{if(!c&&this.pendingRequest==0&&this.formSubmitted){a(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(b){return a.data(b,"previousValue")||a.data(b,"previousValue",{old:null,valid:true,message:this.defaultMessage(b,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(d,c){d.constructor==String?this.classRuleSettings[d]=c:a.extend(this.classRuleSettings,d)},classRules:function(d){var c={};(d=a(d).attr("class"))&&a.each(d.split(" "),function(){this in a.validator.classRuleSettings&&a.extend(c,a.validator.classRuleSettings[this])});return c},attributeRules:function(f){var c={};f=a(f);for(var h in a.validator.methods){var g;if(g=h==="required"&&typeof a.fn.prop==="function"?f.prop(h):f.attr(h)){c[h]=g}else{if(f[0].getAttribute("type")===h){c[h]=true}}}c.maxlength&&/-1|2147483647|524288/.test(c.maxlength)&&delete c.maxlength;return c},metadataRules:function(d){if(!a.metadata){return{}}var c=a.data(d.form,"validator").settings.meta;return c?a(d).metadata()[c]:a(d).metadata()},staticRules:function(e){var c={},f=a.data(e.form,"validator");if(f.settings.rules){c=a.validator.normalizeRule(f.settings.rules[e.name])||{}}return c},normalizeRules:function(d,c){a.each(d,function(h,g){if(g===false){delete d[h]}else{if(g.param||g.depends){var b=true;switch(typeof g.depends){case"string":b=!!a(g.depends,c.form).length;break;case"function":b=g.depends.call(c,c)}if(b){d[h]=g.param!==undefined?g.param:true}else{delete d[h]}}}});a.each(d,function(f,b){d[f]=a.isFunction(b)?b(c):b});a.each(["minlength","maxlength","min","max"],function(){if(d[this]){d[this]=Number(d[this])}});a.each(["rangelength","range"],function(){if(d[this]){d[this]=[Number(d[this][0]),Number(d[this][1])]}});if(a.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength}}d.messages&&delete d.messages;return d},normalizeRule:function(d){if(typeof d=="string"){var c={};a.each(d.split(/\s/),function(){c[this]=true});d=c}return d},addMethod:function(e,c,f){a.validator.methods[e]=c;a.validator.messages[e]=f!=undefined?f:a.validator.messages[e];c.length<3&&a.validator.addClassRules(e,a.validator.normalizeRule(e))},methods:{required:function(e,c,f){if(!this.depend(f,c)){return"dependency-mismatch"}switch(c.nodeName.toLowerCase()){case"select":return(e=a(c).val())&&e.length>0;case"input":if(this.checkable(c)){return this.getLength(e,c)>0}default:return a.trim(e).length>0}},remote:function(h,c,m){if(this.optional(c)){return"dependency-mismatch"}var l=this.previousValue(c);this.settings.messages[c.name]||(this.settings.messages[c.name]={});l.originalMessage=this.settings.messages[c.name].remote;this.settings.messages[c.name].remote=l.message;m=typeof m=="string"&&{url:m}||m;if(this.pending[c.name]){return"pending"}if(l.old===h){return l.valid}l.old=h;var k=this;this.startRequest(c);var j={};j[c.name]=h;a.ajax(a.extend(true,{url:m,mode:"abort",port:"validate"+c.name,dataType:"json",data:j,success:function(e){k.settings.messages[c.name].remote=l.originalMessage;var b=e===true;if(b){var d=k.formSubmitted;k.prepareElement(c);k.formSubmitted=d;k.successList.push(c);k.showErrors()}else{d={};e=e||k.defaultMessage(c,"remote");d[c.name]=l.message=a.isFunction(e)?e(h):e;k.showErrors(d)}l.valid=b;k.stopRequest(c,b)}},m));return"pending"},minlength:function(e,c,f){return this.optional(c)||this.getLength(a.trim(e),c)>=f},maxlength:function(e,c,f){return this.optional(c)||this.getLength(a.trim(e),c)<=f},rangelength:function(e,c,f){e=this.getLength(a.trim(e),c);return this.optional(c)||e>=f[0]&&e<=f[1]},min:function(e,c,f){return this.optional(c)||e>=f},max:function(e,c,f){return this.optional(c)||e<=f},range:function(e,c,f){return this.optional(c)||e>=f[0]&&e<=f[1]},email:function(d,c){return this.optional(c)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,c){return this.optional(c)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,c){return this.optional(c)||!/Invalid|NaN/.test(new Date(d))},dateISO:function(d,c){return this.optional(c)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(d)},number:function(d,c){return this.optional(c)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d)},digits:function(d,c){return this.optional(c)||/^\d+$/.test(d)},creditcard:function(h,c){if(this.optional(c)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(h)){return false}var m=0,l=0,k=false;h=h.replace(/\D/g,"");for(var j=h.length-1;j>=0;j--){l=h.charAt(j);l=parseInt(l,10);if(k){if((l*=2)>9){l-=9}}m+=l;k=!k}return m%10==0},accept:function(e,c,f){f=typeof f=="string"?f.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(c)||e.match(RegExp(".("+f+")$","i"))},equalTo:function(e,c,f){f=a(f).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){a(c).valid()});return e==f.val()}}});a.format=a.validator.format})(jQuery);(function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(c,b,a){b=c.port;if(c.mode=="abort"){e[b]&&e[b].abort();e[b]=a}})}else{var d=f.ajax;f.ajax=function(b){var a=("port" in b?b:f.ajaxSettings).port;if(("mode" in b?b:f.ajaxSettings).mode=="abort"){e[a]&&e[a].abort();return e[a]=d.apply(this,arguments)}return d.apply(this,arguments)}}})(jQuery);(function(a){!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener&&a.each({focus:"focusin",blur:"focusout"},function(e,c){function f(b){b=a.event.fix(b);b.type=c;return a.event.handle.call(this,b)}a.event.special[c]={setup:function(){this.addEventListener(e,f,true)},teardown:function(){this.removeEventListener(e,f,true)},handler:function(b){arguments[0]=a.event.fix(b);arguments[0].type=c;return a.event.handle.apply(this,arguments)}}});a.extend(a.fn,{validateDelegate:function(e,c,f){return this.bind(c,function(d){var b=a(d.target);if(b.is(e)){return f.apply(b,arguments)}})}})})(jQuery);function set_price(b,a){if(!a){a=1}sale_price=parseFloat($("#"+b+"_price").html())*a;member_contribution=round_value((parseFloat($("#member_contribution").val())+sale_price));bb_contribution=round_value(((parseFloat($("#bb_csr_contribution").val())*member_contribution)/100));final_contribution=round_value((member_contribution-bb_contribution));set_contribution(final_contribution,bb_contribution,member_contribution)}function update_price(b,a){if(!a){a=1}sale_price=parseFloat($("#"+b+"_price").html())*a;member_contribution=round_value((parseFloat($("#member_contribution").val())-sale_price));bb_contribution=round_value(((parseFloat($("#bb_csr_contribution").val())*member_contribution)/100));final_contribution=round_value((member_contribution-bb_contribution));set_contribution(final_contribution,bb_contribution,member_contribution)}function set_contribution(a,c,b){a=round_value(a);c=round_value(c);b=round_value(b);$("#final_contribution").val(a);$("#member_contribution").val(b);$("#running_total").html("Rs. "+a);$("#total_member").html("Rs. "+b);$("#total_bb").html("Rs. "+c);set_wallet_contribution()}function set_selected_bundle(a){reset_csr_locals();$("#uiv2-checkout-delivery-address ul li").removeClass("uiv2-selected");$(".csr-bundle-change-qty").val("1");$("#"+a+"_bundleQty").addClass("uiv2-selected");$(".bundle-select").css("visibility","hidden");$("#"+a+"_selected").css("visibility","visible");$("#campaignProducts").hide();$(".bundleContainer").hide();$("#"+a+"_bundleContainer").show();set_selected_bundle_price(a);$(".qty-change-csr").val("0");$(".item-total-price").html("0.0")}function show_customize_bundle(){$("#uiv2-checkout-delivery-address ul li").removeClass("uiv2-selected");$(".csr-bundle-change-qty").val("1");$(".bundle-select").css("visibility","hidden");$("#campaignProducts").show();$(".bundleContainer").hide();window.scrollTo(0,$(".uiv2-griditems-sc").offset().top);set_contribution(0,0,0);reset_csr_locals()}function set_selected_bundle_price(a,b){final_contribution=0;member_contribution=0;bb_contribution=parseFloat($("#bb_csr_contribution").val());if(!b){b=1}$("#"+a+"_bundleContainer ol.uiv2-griditems-details-sc").each(function(){sale_price=parseFloat($(this).find("span.unit_price").html());quantity=parseFloat($(this).find("span.item_quantity").html());member_contribution=member_contribution+(parseFloat(sale_price*quantity)*b)});bb_contribution=(bb_contribution*member_contribution)/100;final_contribution=member_contribution-bb_contribution;set_contribution(final_contribution,bb_contribution,member_contribution)}function round_value(a){return parseFloat(a).toFixed(2)}function init_change_csr_qty(){$(".icon-increase-qty-csr").click(function(){skuid=$(this).prev().attr("id").split("_")[0];new_qty=parseInt($(this).prev().val())+1;$(this).prev().val(new_qty);$("#"+skuid+"_finalQty").val(new_qty);set_price(skuid);sp=parseFloat($("#"+skuid+"_price").html());total=sp*new_qty;$("#"+skuid+"_totalPrice").html(round_value(total))});$(".icon-decrease-qty-csr").click(function(){if(parseInt($(this).next().val())>0){skuid=$(this).next().attr("id").split("_")[0];update_price(skuid,1);new_qty=parseInt($(this).next().val())-1;$(this).next().val(new_qty);$("#"+skuid+"_finalQty").val(new_qty);sp=parseFloat($("#"+skuid+"_price").html());total=sp*new_qty;$("#"+skuid+"_totalPrice").html(round_value(total))}if(parseInt($(this).next().val())==0){$("#"+skuid+"_finalQty").val("0")}});$(".qty-change-csr").focusout(function(){newQty=$(this).val();if(parseInt(newQty)!=0){if(!parseInt(newQty)){show_alert("Please enter a number");return}}skuid=$(this).attr("id").split("_")[0];prevQty=$("#"+skuid+"_finalQty").val();update_price(skuid,prevQty);set_price(skuid,newQty);$("#"+skuid+"_finalQty").val(newQty);product_total_price=parseFloat($("#"+skuid+"_price").html())*newQty;product_total_price=round_value(product_total_price);$("#"+skuid+"_totalPrice").html(product_total_price)})}function init_change_bundle_qty(){$(".icon-increase-qty-csr-bundle").click(function(){bundle_id=$(this).prev().attr("id").split("_")[0];new_qty=parseInt($(this).prev().val())+1;$(this).prev().val(new_qty);add_bundle_selected_class(bundle_id);set_selected_bundle_price(bundle_id,new_qty)});$(".icon-decrease-qty-csr-bundle").click(function(){if(parseInt($(this).next().val())>1){bundle_id=$(this).next().attr("id").split("_")[0];new_qty=parseInt($(this).next().val())-1;$(this).next().val(new_qty);set_selected_bundle_price(bundle_id,new_qty);add_bundle_selected_class(bundle_id)}if(parseInt($(this).next().val())==1){set_selected_bundle_price(bundle_id,1)}});$(".csr-bundle-change-qty").focusout(function(){newQty=$(this).val();if(!parseInt(newQty)){show_alert("Please enter a number greater than 0");return}bundle_id=$(this).attr("id").split("_")[0];add_bundle_selected_class(bundle_id);set_selected_bundle_price(bundle_id,newQty)})}function get_selected_bundle(){selected_set="";bundle_set="";$(".campaignBundleSet").each(function(){if($(this).hasClass("uiv2-selected")){selected_set=$(this).attr("id").split("_")[0];bundle_no=$("#"+selected_set+"_totalBundleQty").val();bundle_set=selected_set+"_"+bundle_no}});return bundle_set}function get_selected_products(){prod_arr=[];$(".qty-change-csr").each(function(){skuid=$(this).attr("id").split("_")[0];sku_qty=$(this).val();var a=skuid+"_"+sku_qty;if(parseInt(sku_qty)>0){prod_arr.push(a)}});return prod_arr}function load_csr_locals(){if(typeof(Storage)!=="undefined"){products=localStorage.prod_arr;bundle_set=localStorage.bundle_set;$("#member_contribution").val("0");$("#final_contribution").val("0");$("#final-product-qty").val("0");if(bundle_set){set_id=bundle_set.split("_")[0];bundle_qty=bundle_set.split("_")[1];set_selected_bundle(set_id);$("#"+set_id+"_bundleQty").addClass("uiv2-selected");$("#"+set_id+"_totalBundleQty").val(bundle_qty);set_selected_bundle_price(set_id,bundle_qty)}if(products){if(products.length>0){products=products.split(",");for(i=0;i<products.length;i++){prod=products[i];skuid=prod.split("_")[0];qty=prod.split("_")[1];$("#"+skuid+"_finalQty").val(qty);$("#"+skuid+"_qty").val(qty);unit_price=parseFloat($("#"+skuid+"_price").html())*qty;total_price=round_value(unit_price);$("#"+skuid+"_totalPrice").html(total_price);set_price(skuid,qty)}}}}$("[name='payment_type']").each(function(){if($(this).val()==localStorage.payment_type){$(this).prop("checked",true)}})}function set_csr_locals(){prod_arr=get_selected_products();bundle_set=get_selected_bundle();if(typeof(Storage)!=="undefined"){localStorage.prod_arr=prod_arr;localStorage.bundle_set=bundle_set;localStorage.payment_type=$('input[name="payment_type"]:checked').val()}}function reset_csr_locals(){if(typeof(Storage)!=="undefined"){localStorage.prod_arr=[];localStorage.bundle_set="";$("[name='payment_type']").each(function(){if($(this).val()==localStorage.payment_type){$(this).prop("checked",false)}});$("#member_contribution").val("0");$("#final_contribution").val("0")}}function login_member_for_csr(){set_csr_locals();location.href="/auth/login/?next="+window.location.pathname}function register_member(){first_name=$.trim($("#id_first_name").val());first_name=first_name.replace(/<\/?[^>]+(>|$)/g,"");last_name=$.trim($("#id_last_name").val());last_name=last_name.replace(/<\/?[^>]+(>|$)/g,"");email=$.trim($("#id_email").val());email=email.replace(/<\/?[^>]+(>|$)/g,"");campaign_id=$("#id_campaign").val();if(!campaign_id){return}if(first_name&&last_name&&email){set_csr_locals();$("#shoplist-mask").show();show_loader();$.ajax({url:"/bb/csr/register-member/",type:"post",dataType:"json",data:{first_name:first_name,last_name:last_name,campaign_id:campaign_id,email:email},success:function(a){if(a.success){location.href=a.campaign_url}else{error=a.error;show_alert(error);return}hide_loader();$("#shoplist-mask").hide()}})}else{if(!first_name){$("#first_name_error").html("Please enter your first name")}if(!last_name){$("#last_name_error").html("Please enter your last name")}if(!email){$("#email_error").html("Please enter an email")}}hide_loader();$("#shoplist-mask").hide()}function add_bundle_selected_class(a){if(!$("#"+a+"_bundleQty").hasClass("uiv2-selected")){$("#uiv2-checkout-delivery-address ul li").removeClass("uiv2-selected");$("#"+a+"_bundleQty").addClass("uiv2-selected");$(".bundle-select").css("visibility","hidden");$("#"+a+"_selected").css("visibility","visible");$("#campaignProducts").hide();$(".bundleContainer").hide();$("#"+a+"_bundleContainer").show();set_selected_bundle_price(a);$(".qty-change-csr").val("0");$(".item-total-price").html("0.0");$(".csr-bundle-change-qty").each(function(){if(parseInt(a)!=$(this).attr("id").split("_")[0]){$(this).val("1")}});reset_csr_locals()}}function set_wallet_contribution(){csr_amount=$("#csr_amount").html();if(csr_amount){final_contribution=$("#final_contribution").val();wallet_amount=parseFloat($("#total_wallet_amount").val());if(wallet_amount>final_contribution){$("#csr_amount").html(round_value(final_contribution));new_wallet_amount=wallet_amount-final_contribution;new_wallet_amount=round_value(new_wallet_amount);csr_remaining_amount=0;$("#wallet_amount").html(new_wallet_amount);$("#uiv2-pay-remaining-amount-options").hide()}else{$("#csr_amount").html(round_value(wallet_amount));csr_remaining_amount=final_contribution-wallet_amount;$("#uiv2-pay-remaining-amount-options").show();$("#wallet_amount").html("0")}$("#csr_remaining_amount").html(round_value(csr_remaining_amount))}}function AppDownloadWeb(b){this.number=$("#id_mobileno");this.action=location.pathname;this.context=b;this.errorText=$("#notification_text");this.success_text=$("#success_text");var a=this;this.sendRequest=function(c,d,e){e.csrfmiddlewaretoken=csrf;$.ajax({url:c,type:d,data:e}).done(function(f){a.success_text.show();$(".inputDiv").css("margin-bottom","10px")}).fail(function(f,h,g){a.errorText.show();a.number.removeClass("send_sms_focus").addClass("send_sms_error");$(".inputDiv").css("margin-bottom","10px")})};this.sendDownloadSms=function(){var c={action:this.action,number:this.number.val(),context:this.context};this.sendRequest("/member/send_sms/","post",c);a.errorText.hide();a.success_text.hide();a.number.removeClass("send_sms_error");a.number.addClass("send_sms_focus")}}function logAnalytics(b,a){if(ganalytics){ga("send","event","app_promotion",b,a,"1")}else{console.log("app_promotion,"+b+" "+a)}}function fb_login(a){_gaq.push(["_trackEvent","Login","Login Action","Facebook Login"]);location.href="/auth/fb/login/?sl="+a}function gplus_login(a){_gaq.push(["_trackEvent","Login","Login Action","Google Login"]);location.href="/auth/gplus/login/?sl="+a}function register_user(){_gaq.push(["_trackEvent","Login","Login Action","Register"]);location.href="/register/"}function reset_pwd(){_gaq.push(["_trackEvent","Login","Login Action","Reset Password"]);location.href="/auth/reset-password/"}function cancel_register(){_gaq.push(["_trackEvent","Login","Login Action","Register"]);location.href="/"}function show_eligible_vouchers_popup(){uiv2_show_popup("uiv2-eligible-vouchers");$(".vouchers-eligible").jScrollPane()}var ShopFromPreviousOrder={getSlotCloseTime:function(b,a){ShopFromPreviousOrder.sendRequest("/order/slot_close_time/","post",{order_id:b},a)},sendRequest:function(a,b,d,c){d.csrfmiddlewaretoken=csrf;$.ajax({url:a,type:b,data:d}).done(function(e){ShopFromPreviousOrder.updateUi(e);uiv2_show_popup(c)}).fail(function(e){show_alert("Something went wrong. Please try again")})},updateUi:function(a){if(a.is_valid){$("#shop-from-previous-order").html(a.order_msg)}},showPopUp:function(a,b){if(b){ShopFromPreviousOrder.getSlotCloseTime(b,a)}else{uiv2_show_popup(a)}window.scrollTo(0,40)}};function show_voucher_tnc_note(a){$("#vouchers-tnc-"+a).toggle();$(".vouchers-eligible").jScrollPane({}).data("jsp").destroy();$(".vouchers-eligible").jScrollPane()}var ExpressOrderController={sendRequest:function(a,b,c){c.csrfmiddlewaretoken=csrf;$.ajax({url:a,type:b,data:c}).done(function(d){ExpressOrderController.responseHandle(d)}).fail(function(d){show_alert("Something went wrong please try again")})},expressEligible:function(a){},freeItemCheck:function(){},responseHandle:function(a){if(a.ga_action){label=a.label;ExpressOrderController.logAnalytics(a.ga_category,a.ga_action,a.ga_label,1)}mixed=a.is_mixed;if(a.hasOwnProperty("error_code")){var b=new ExpressOrderUi();var c=a.error_code;if(!(a.express)){var d=a.message;b.hideExpress(c,d,a.flatpage)}else{b.expressShow(a.address,a.delivery_charge)}}},logAnalytics:function(b,d,a,c){if(typeof(c)=="undefined"){c=1}if(ganalytics){ga("send","event",b,d,a,c)}else{console.log(b,d,a,c)}}};function ExpressOrderUi(){this.$normalCheckout=$("#checkout_normal_button");this.$expressCheckout=$("#checkout_express_button");this.$expressErrorMessage=$("#express_info");this.$expressToggle=$("#express_toggle");this.$expressToggleLabel=$("#express_toggle_label");this.$expressError=$("#express_error_note");this.$addressNote=$("#address_note");this.$expressAddress=$("#address");this.$deliveryCharge=$("#final_delivery_charge");this.$deliveryNote=$("#delivery_note");this.$exdeliveryNote=$("#note");this.$normalDeliveyNote=$("#for_normal");this.$amtdeliveryCharge=$("#exd_delivery_charge");var a=this;this.displayError=function(b,c){this.$expressError.show();this.$exdeliveryNote.text("Why am I not able to see Express Delivery option?");this.$expressErrorMessage.html('<p id="express_info" class="Exd_limit">'+b+"<a href="+c+' target="_blank"> Know more</a></p>');this.$expressErrorMessage.show()};this.hideError=function(){this.$expressError.hide();this.$expressErrorMessage.hide()};this.toggleExpress=function(c,b){var d=Boolean(c);if(d){this.$normalCheckout.hide();this.$expressCheckout.show();this.$deliveryCharge.show();this.$expressError.show()}else{this.$normalCheckout.show();this.$deliveryCharge.hide();this.$expressError.hide();this.$expressCheckout.hide()}if(!b){this.$deliveryCharge.hide();this.$expressError.hide()}};this.expressShow=function(c,b){this.$addressNote.show();this.$expressAddress.text(c).show();this.$expressToggle.prop("checked",false);this.$expressToggleLabel.show();this.$expressToggle.show();this.$normalCheckout.hide();this.hideError();this.$expressCheckout.show();this.$deliveryCharge.show();this.$expressToggle.change(function(){a.toggleExpress(+!($(this).prop("checked")),b)});if(b){this.$deliveryCharge.show();this.$expressError.show();this.$exdeliveryNote.text("# Express Delivery Charges "+this.$amtdeliveryCharge.text()+" per order").show()}else{this.$deliveryCharge.hide()}};this.hideExpress=function(b,d,c){this.$expressToggleLabel.hide();this.$expressToggle.hide();this.$expressError.hide();if(!b){this.$normalDeliveyNote.hide()}this.$deliveryCharge.hide();this.toggleExpress(0);this.$expressError.hide();this.$addressNote.hide();$.each(b,function(e,f){a.displayError(d[e],c)})}}function submit_register_form(){$("#id_csr_register_form").submit();set_csr_locals()}(function(a){a.fn.menuAim=function(c){this.each(function(){b.call(this,c)});return this};function b(c){var d=a(this),r=null,g=[],s=null,q=null,t=a.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:a.noop,exit:a.noop,activate:a.noop,deactivate:a.noop,exitMenu:a.noop},c);var k=3,f=300;var e=function(u){g.push({x:u.pageX,y:u.pageY});if(g.length>k){g.shift()}};var p=function(){if(q){clearTimeout(q)}if(t.exitMenu(this)){if(r){t.deactivate(r)}r=null}t.exit(this);h(this)};var m=function(){if(q){clearTimeout(q)}t.enter(this);h(this)},l=function(){t.exit(this)};var n=function(){j(this)};var j=function(u){if(u==r){return}if(r){t.deactivate(r)}t.activate(u);r=u};var h=function(v){var u=o();if(u){q=setTimeout(function(){h(v)},u)}else{j(v)}};var o=function(){if(!r||!a(r).is(t.submenuSelector)){return 0}var y=d.offset(),u={x:y.left,y:y.top-t.tolerance},F={x:y.left+d.outerWidth(),y:u.y},H={x:y.left,y:y.top+d.outerHeight()+t.tolerance},z={x:y.left+d.outerWidth(),y:H.y},A=g[g.length-1],E=g[0];if(!A){return 0}if(!E){E=A}if(E.x<y.left||E.x>z.x||E.y<y.top||E.y>z.y){return 0}if(s&&A.x==s.x&&A.y==s.y){return 0}function B(J,I){return(I.y-J.y)/(I.x-J.x)}var D=F,v=z;if(t.submenuDirection=="left"){D=H;v=u}else{if(t.submenuDirection=="below"){D=z;v=H}else{if(t.submenuDirection=="above"){D=u;v=F}}}var w=B(A,D),C=B(A,v),G=B(E,D),x=B(E,v);if(w<G&&C>x){return f}s=null;return 0};d.mouseleave(p).find(t.rowSelector).mouseenter(m).mouseleave(l).click(n);a(document).mousemove(e)}})(jQuery);var $menu=$(".dropdown-menu");$menu.menuAim({activate:activateSubmenu,deactivate:deactivateSubmenu});function activateSubmenu(f){var c=$(f),b=c.data("submenuId"),d=$("#"+b),a=$menu.outerHeight(),e=$menu.outerWidth();d.css({display:"block"});c.find("a").addClass("maintainHover")}function deactivateSubmenu(d){var b=$(d),a=b.data("submenuId"),c=$("#"+a);c.css("display","none");b.find("a").removeClass("maintainHover")}$(window).resize(function(){set_ftv_popup_height()});function set_ftv_popup_height(){var d=$(window);var b=d.width();var f=d.height();if(b>=1024){var c=$(".uiv2-landing-container").innerHeight();var e=$(".uiv2-land-content-container").innerHeight();var a=(c-e)/2;$(".uiv2-land-content-container").css("top",a)}else{$(".uiv2-land-content-container").css("top","auto")}}function save_other_city_ftv_info(){var c=$("#oc-email").val();var a=$("#oc-location").val();var b=$("#oc-message").val();var d=true;if(!validate_email(c)){d=false}if(a==""||a==null||a==undefined){d=false}if(d){$.ajax({url:make_req_url("/member/other-city-info/"),method:"post",data:{email:c,location:a,message:b,name:$("#oc-name").val()},success:function(){set_city(1);$(".uiv2-landing-wrapper, #shoplist-mask").fadeOut()}})}else{set_city(1)}}function is_first_time(){return($.cookie("_bb_vid")==undefined&&$("#id_show_visitor_popup").val()=="1")}function is_first_time_visitor(){return($.cookie("_bb_vid")==undefined&&$.cookie("_ft_vid")==undefined)}function init_ftv_popup(){set_ftv_popup_height();$("#uiv2-ftv-button").on("click",function(){city_id=$("#ftv-city-selectboxdiv option:selected").val();if(city_id=="Others"){$("#uiv2-input-field").hide();$(".uiv2-explore-section").show()}else{set_city(city_id)}});$("#ftv-city-popup select").change(function(){var a="";a=$(this).find(":selected").text();$(".out").text(a)}).trigger("change")}function show_ftv_popup(a){$(".uiv2-landing-outer, #shoplist-mask").fadeIn();$("#ftv-city-selectboxdiv").val(a).trigger("change");init_ftv_popup()}$(document).ready(function(){$(window).scroll(function(){var b=$(".uiv2-header-section-fixed-container"),a=$(window).scrollTop();if(a>=170){$("#facetsContainer").trigger("sticky_kit:recalc_and_tick");b.slideDown();$(".scrollToTopButton").fadeIn();b.addClass("fixed");$("#auto_search .uiv2-search").appendTo($("#sticky_search"));$(".uiv2-search-dropdown-block").hide()}else{b.slideUp();$(".scrollToTopButton").fadeOut();if(location.pathname=="/"){$("#basket_menu").show()}$(".uiv2-search-dropdown-block").hide();$("#sticky_search .uiv2-search").appendTo($("#auto_search"))}});$(".scrollToTopButton").click(function(){$("html, body").animate({scrollTop:0},800);return false})});(function(){var a;$(function(){return $("[data-sticky_column]").stick_in_parent({parent:"[data-sticky_parent]"})});a=function(){var b;b=$("body,html");b.stop(true);if($(window).scrollTop()!==0){b.animate({scrollTop:0},"slow")}return b};window.scroll_it=function(){var b;b=$(document).height()-$(window).height();return a().animate({scrollTop:b},b*3).delay(100).animate({scrollTop:0},b*3)}}).call(this);(function(){var a,b;a=this.jQuery||window.jQuery;b=a(window);a.fn.stick_in_parent=function(d){var m,n,k,f,l,e,c,j,h,g,o;if(d==null){d={}}j=d.sticky_class,k=d.inner_scrolling,c=d.recalc_every,e=d.parent,l=d.offset_top,f=d.spacer,n=d.bottoming;if(l==null){l=60}if(e==null){e=void 0}if(k==null){k=true}if(j==null){j="is_stuck"}if(n==null){n=true}h=function(t,G,q,p,A,C,y,z){var D,H,r,F,s,w,u,x,B,v,E;if(t.data("sticky_kit")){return}t.data("sticky_kit",true);w=t.parent();if(e!=null){w=w.closest(e)}if(!w.length){throw"failed to find stick parent"}r=false;D=false;v=f!=null?f&&t.closest(f):a("<div />");if(v){v.css("position",t.css("position"))}u=function(){var I,K,J;if(z){return}I=parseInt(w.css("border-top-width"),10);K=parseInt(w.css("padding-top"),10);G=parseInt(w.css("padding-bottom"),10);q=w.offset().top+I+K;p=w.height();if(r){r=false;D=false;if(f==null){t.insertAfter(v);v.detach()}t.css({position:"",top:"",width:"",bottom:""}).removeClass(j);J=true}A=t.offset().top-parseInt(t.css("margin-top"),10)-l;C=t.outerHeight(true);y=t.css("float");if(v){v.css({width:t.outerWidth(true),height:C,display:t.css("display"),"vertical-align":t.css("vertical-align"),"float":y})}if(J){return E()}};u();if(C===p){return}F=void 0;s=l;B=c;E=function(){var K,M,J,I,L;if(z){return}if(B!=null){B-=1;if(B<=0){B=c;u()}}J=b.scrollTop();if(F!=null){M=J-F}F=J;if(r){if(n){I=J+C+s>p+q;if(D&&!I){D=false;t.css({position:"fixed",bottom:"",top:s}).trigger("sticky_kit:unbottom")}}if(J<A){r=false;s=l;if(f==null){if(y==="left"||y==="right"){t.insertAfter(v)}v.detach()}K={position:"",width:"",top:""};t.css(K).removeClass(j).trigger("sticky_kit:unstick")}if(k){L=b.height();if(C+l>L){if(!D){s-=M;s=Math.max(L-C,s);s=Math.min(l,s);if(r){t.css({top:s+"px"})}}}}}else{if(J>A){r=true;K={position:"fixed",top:s};K.width=t.css("box-sizing")==="border-box"?t.outerWidth()+"px":t.width()+"px";t.css(K).addClass(j);if(f==null){t.after(v);if(y==="left"||y==="right"){v.append(t)}}t.trigger("sticky_kit:stick")}}if(r&&n){if(I==null){I=J+C+s>p+q}if(!D&&I){D=true;if(w.css("position")==="static"){w.css({position:"relative"})}return t.css({position:"absolute",bottom:G,top:"auto"}).trigger("sticky_kit:bottom")}}};x=function(){u();return E()};H=function(){z=true;b.off("touchmove",E);b.off("scroll",E);b.off("resize",x);a(document.body).off("sticky_kit:recalc",x);t.off("sticky_kit:detach",H);t.removeData("sticky_kit");t.css({position:"",bottom:"",top:"",width:""});w.position("position","");if(r){if(f==null){if(y==="left"||y==="right"){t.insertAfter(v)}v.remove()}return t.removeClass(j)}};b.on("touchmove",E);b.on("scroll",E);b.on("resize",x);a(document.body).on("sticky_kit:recalc",x);t.on("sticky_kit:detach",H);return setTimeout(E,0)};for(g=0,o=this.length;g<o;g++){m=this[g];h(a(m))}return this}}).call(this);function init_autocomplete_areas(c,a){var b=$("#"+c);area_autocomplete=b.autocomplete({source:function(e,d){var f=$.map(auto_complete_areas,function(g){if(g.toUpperCase().indexOf(e.term.toUpperCase())===0){return g}});d(f)}});b.focusout(function(){var d=$("#"+c).val();if(d!=""){$.ajax({url:"/member/get-pincode/?area="+d,type:"get",dataType:"json",success:function(e){$("#"+a).val(e.pincode)}})}})}function construct_url(c){var b=window.location.port;b=b?":"+b:"";var a=[window.location.protocol,"//",window.location.hostname,b,c];var c=a.join("");return c}function init_zipcode_autocomplete(e,c,d){var a;var b=$("#"+c);a=b.autocomplete({source:function(h,f){var g=$.trim(b.val());if(g.length>4){var j=$.map(zipcodes[d],function(k){if(k.indexOf(h.term.toUpperCase())===0){return k}});f(j)}else{var j=$.map(zipcodes,function(k){if(k.indexOf(h.term.toUpperCase())===0){return k}});f(j.slice(0,10))}}});b.focusout(function(){var f=b.val();if(f!=""){get_zipcode_areas(f,c,e,d)}else{$("#area_options").hide();$("#"+e).show();$("#"+e).val("");$("#other_area_row").empty().hide()}});b.on("keyup",function(){$("#"+e).parent().parent().find("span.uiv2-err-text").html("");$("#area_options").show()});$("#"+e).focusin(function(){var f=b.val();if(f!=""){get_zipcode_areas(f,c,e,d)}})}function get_zipcode_areas(b,a,d,c){$.ajax({url:make_req_url("/member/get-zipcode-area/"),type:"post",dataType:"json",data:{city_id:$("#id_city").val(),zipcode:b},}).done(function(e){if(e.success){set_area_dropdown(e.areas,a,d)}})}function set_area_dropdown(a,b,c){area_html="<select class = 'uiv2-salutation' id='select_area_options'>";if(a.length>0){for(i=0;i<a.length;i++){area_html+="<option value='"+a[i]+"'>"+a[i]+"</option>"}area_html+="<option value='Other'>Other</option></select>";$("#area_options").html(area_html);$("#select_area_options").dropkick();$("#"+c).hide();$("#"+c).val($("#select_area_options option:selected").val());init_other_areas(c);$("#id_other_area").val("");$("#other_area_row").hide();set_dropkick_widthForAddressAreaDropdown()}}function set_dropkick_widthForAddressAreaDropdown(){var a=$(".dk_options_inner li a");for(var b=0;b<a.length;b++){if(a[b].text!=undefined){$(a[b]).parents('div[class^="dk_container"]').addClass("parentchild-big")}}}function init_other_areas(a){$("#select_area_options").on("change",function(){area_val=$("#select_area_options option:selected").val();$("#"+a).val(area_val);if(area_val.toLowerCase()=="other"){$("#other_area_row").show();$("#id_other_area").show();$("#pindiv").css("margin-top","-32px")}else{$("#other_area_row").hide();$("#id_other_area").val("");$("#pindiv").css("margin-top","0px")}});$("#complete-partial-address #select_area_options").on("change",function(){area_val=$("#complete-partial-address #select_area_options option:selected").val();$("#"+a).val(area_val);if(area_val.toLowerCase()=="other"){$("#complete-partial-address #other_area_row").show();$("#complete-partial-address #id_other_area").show();$("#complete-partial-address #pindiv").css("margin-top","-32px")}else{$("#complete-partial-address #other_area_row").hide();$("#complete-partial-address #id_other_area").val("");$("#complete-partial-address #pindiv").css("margin-top","0px")}})}function init_area_autocomplete(d,a,c){var b=$("#"+d);b.autocomplete({source:function(f,e){var g=$.map(areas[c],function(h){if(h.toUpperCase().indexOf(f.term.toUpperCase())===0){return h}});e(g)}});b.focusout(function(){var e=b.val();if(e!=""){$.ajax({url:make_req_url("/member/get-pincode/?area="+e),type:"get",dataType:"json"}).done(function(f){if(f.success){$("#"+a).val(f.pincode)}})}})}function reset_area_source(d,c){var b=$("#"+c);var a=$("#"+d);b.val("");a.show();a.val("");$("#area_options").empty();$("#id_other_area").val("").hide();zip_autocomplete=b.autocomplete({source:function(g,e){var f=$.trim(b.val());if(f.length>4){var h=$.map(zipcodes[$("#id_city").val()],function(j){if(j.indexOf(g.term.toUpperCase())===0){return j}});e(h)}}});a.autocomplete({source:function(f,e){var g=$.map(areas[$("#id_city").val()],function(h){if(h.toUpperCase().indexOf(f.term.toUpperCase())===0){return h}});e(g)}})}function add_address_popup(){uiv2_show_popup("uiv2-new-address-form",false);set_new_address_click();setTimeout(function(){init_zipcode_autocomplete("id_contact_area","id_contact_zipcode",$("#id_city").val());init_area_autocomplete("id_contact_area","id_contact_zipcode",$("#id_city").val());if($("#id_contact_area").val()=="Other"){$("#id_contact_area").val("")}$("#id_city").on("change",function(){reset_area_source("id_contact_area","id_contact_zipcode",$(this).val())})},20)}function set_new_address_click(){var a=$("#id-add-new-address");$(".uiv2-background-shade").hide();a.unbind("click");a.click(function(){return add_new_address()})}function check_address_form_validity(){selected_area=$.trim($("#select_area_options option:selected").val());if(selected_area){other_area=$.trim($("#id_other_area").val());$("#id_area").val(selected_area)}return true}function update_parent_child(b){value=$(b).val();selected_text=b.options[b.selectedIndex].innerHTML.replace(/\s+/g,"");var a=value.split("-");if(a[1]!=a[2]){current_id=a[0]+"_"+a[1];$("#"+current_id).hide();selected_id=a[0]+"_"+a[2];selected_deck=$("#"+selected_id);selected_deck.show();$("select[name="+selected_deck.find("select.parentchild").attr("name")+"] option").filter(function(){return this.text.replace(/\s+/g,"")==selected_text}).attr("selected",true)}}$(function(){$(".uiv2-tab-refine-by a").click(function(){$(this).closest(".uiv2-tab-refine-by").fadeOut(300,function(){$(this).remove()})});$(".uiv2-tab-clear-all a").click(function(){$(this).closest(".uiv2-sku-tab-section").fadeOut(300,function(){$(this).remove()})})});$(function(){$(".parentchild").dropkick(dropkick_change);$(".id_psort").dropkick(dropkick_sort_change);set_dropkick_width()});function set_dropkick_width(){var a=$(".dk_options_inner li a");for(var b=0;b<a.length;b++){if(a[b].text!=undefined){if((a[b].text.length>32)&&(a[b].text.length<45)){$(a[b]).parents('div[class^="dk_container"]').addClass("parentchild-big")}if(a[b].text.length>45){$(a[b]).parents('div[class^="dk_container"]').addClass("parentchild-biggest")}if(a[b].text.indexOf("Out of Stock")>=0){$(a[b]).addClass("linethrough")}}}}var dropkick_change={change:function(c,a){var b;if(!c||c===undefined||c===null){$(this).find("option").each(function(){if(!$(this).attr("disabled")&&$(this).attr("selected")){b=$(this).val().split("-")}})}else{b=c.split("-")}if(b[1]!=b[2]){see_child(b[0]+"_"+b[1],b[0]+"_"+b[2]);$(".parentchild").dropkick("reset")}}};var dropkick_sort_change={change:function(b,a){$(".id_psort .dk_label").html(a.slice(0,a.length/2))}};function init_hashed_pagination(){if($(".pagination")[0]){var a=Backbone.Router.extend({routes:{"!page=:page_num":"go_to_page","promo/:promo_id/:criteriaset_id/:page_num/":"go_to_promo_page","promo/:promo_id/:criteriaset_id/:page_num/prev_next":"go_to_promo_page_nextprev"},go_to_page:function(c){facets.show_page(c)},go_to_promo_page:function(c,d,e){get_promo_page(c,d,e,"")},go_to_promo_page_nextprev:function(c,d,e,f){if(f==null){f=""}get_promo_page(c,d,e,f)}});var b=new a;Backbone.history.start()}}function search_cities(){cities=[];var c=$(".uiv2-location-multicity-input").val().replace(/\s+/g," ");var b=c.replace(/^\s+|\s+$/g,"");$("#uiv2-change li").each(function(){cities.push($(this).text())});if(b.length==0){$(".uiv2-change li").hide();for(var a=0;a<cities.length;a++){city_name=cities[a].toLowerCase();$("#"+city_name+"_city").show();if(a==1){break}}}else{for(var a=0;a<cities.length;a++){city_name=cities[a].toLowerCase();if(city_name.indexOf(b.toLowerCase())==-1){$("#"+city_name+"_city").hide()}else{$("#"+city_name+"_city").show()}}}}function do_ajax(a,b,c){c.csrfmiddlewaretoken=csrf;return $.ajax({url:a,type:b,data:c})}function refresh_impulse_menu(a){$.ajax({url:"/basket/impulse-buying/",type:"get",success:function(d){$("#impulse_buying_menu").html(d);$("#tabs").tabs().addClass("ui-tabs-vertical ui-helper-clearfix");if(a){var b="#"+a;var c=$("#tabs a[href="+b+"]").parent().index();$("#tabs").tabs("option","active",c)}$(".parentchild").dropkick(dropkick_change);refresh()}}).done(function(b){})}function add_impulse_item_to_cart(c,e,a,d){add_to_cart(c,1,"impulse-buying");var f=$("#p"+c+"_qty").val();var b=a+"|"+c+"."+e+"|"+d;_gaq.push(["_trackEvent","add-to-cart","impulse",b,parseInt(f)]);$(".impulse_deliveryInfo_"+c).remove();$(".mrp_box_"+c).css("margin-left","15px")}function initialize_carousel(){$(".carousel_slider").each(function(d,e){var b=$(e).children(".impulse_child").length;var f=e.children.length-b;if(f>4){var c="carouSlide_"+(d+1);var a=$("#"+c);a.carouFredSel({circular:false,infinite:false,auto:false,scroll:{items:1},items:{minimum:4,visible:4},prev:{button:function(){return $(this).parents(".image_carousel").find(".previous")},key:"left"},next:{button:function(){return $(this).parents(".image_carousel").find(".next")},key:"right"}})}else{$(e).parents(".image_carousel").find(".previous").hide();$(e).parents(".image_carousel").find(".next").hide()}})}var auto_complete_apartments=[];function init_apartment_autocomplete(){var a=$("#id_contact_residential_complex");$("#id_contact_residential_complex").on("keyup",function(){var c=$("#id_contact_zipcode").val();var b=$.trim($("#id_contact_residential_complex").val());if(b!=""&&b.length>1){$.ajax({url:"/member/get-apartment/?pincode="+c+"&name="+b,type:"get",dataType:"json",}).done(function(d){auto_complete_apartments=d.apartments;apartment_autocomplete=$("#id_contact_residential_complex").autocomplete({source:function(f,e){var g=$.map(auto_complete_apartments,function(h){if(h.toUpperCase().indexOf(f.term.toUpperCase())===0){return h}});e(g)}})})}})}function show_city_detail(a){if($("#city_slot_detail_"+a).is(":visible")){$("#city_slot_detail_"+a).hide();$(".top-menu-li").removeClass("topmenu-city-li");return}else{$(".changeCity-detail").hide();$(".top-menu-li").removeClass("topmenu-city-li");$("#city_slot_li_"+a).addClass("topmenu-city-li");$("#city_slot_detail_"+a).show()}make_slot_request=false;if(!$("#express_slot_"+a).html()&&!$("#normal_slot_"+a).html()){make_slot_request=true}if(make_slot_request){$.ajax({url:"/member/get-address-slots/",type:"post",data:{address_id:a},}).done(function(b){if(b.success){if(b.darkstore_next_slot){$("#express_container_"+a).show();darkstore_next_slot=b.darkstore_next_slot;$("#express_slot_"+a).empty().html("Express Delivery: "+darkstore_next_slot);$(".exp-slot_"+a).prop("title","Express Delivery: "+darkstore_next_slot)}else{if(b.express_next_slot){$("#express_container_"+a).show();express_slot=b.express_next_slot;$("#express_slot_"+a).empty().html("Express Delivery: "+express_slot.slot_date_formalize+" "+express_slot.from_time+" to "+express_slot.to_time+"");$(".exp-slot_"+a).prop("title","Express Delivery: "+express_slot.slot_date_formalize+" "+express_slot.from_time+" to "+express_slot.to_time+"")}}if(b.normal_next_slot){$("#normal_container_"+a).show();normal_slot=b.normal_next_slot;$("#normal_slot_"+a).empty().html("Standard Delivery: "+normal_slot.slot_date_formalize+","+normal_slot.from_time+" to "+normal_slot.to_time+"");$(".normal-slot_"+a).prop("title","Standard Delivery: "+normal_slot.slot_date_formalize+","+normal_slot.from_time+" to "+normal_slot.to_time+"")}}})}}function set_city_address_change(c,b){var d=$("#city_slot_li_"+b);var a=$.trim($(".uiv2-loc-wrapper span").html()).replace(/\s+/g," ");new_city=$.trim(d.find("a").html()).replace(/\s+/g," ");$("#uiv2-selection").html(new_city);d.html(a);set_city_fn=$("#id-multicity").attr("href");$("#id-multicity").attr("href","javascript:void(0)");set_city(c,b)}function send_vizury_tags(c,a,b){b=typeof(b)=="undefined"?0:b;window.vizLayer={geo:"sg",account_id:"VIZVRM1948",vertical:"ecommerce",type:c,pid:a,cartval:b};(function(){try{var d=document.createElement("script");d.type="text/javascript";d.async=true;d.src=("https:"==document.location.protocol?"https://in-tags.vizury.com":"http://in-tags.vizury.com")+"/analyze/pixel.php?account_id=vst";var f=document.getElementsByTagName("script")[0];f.parentNode.insertBefore(d,f);d.onload=function(){try{pixel.parse()}catch(g){}};d.onreadystatechange=function(){if(d.readyState=="complete"||d.readyState=="loaded"){try{pixel.parse()}catch(g){}}}}catch(e){}})()}function send_vizury_tags_order(d,a,c,b){cartval=typeof(cartval)=="undefined"?0:cartval;window.vizLayer={geo:"sg",account_id:"VIZVRM1948",vertical:"ecommerce",type:d,pid:a,orderid:c,orderprice:b};(function(){try{var e=document.createElement("script");e.type="text/javascript";e.async=true;e.src=("https:"==document.location.protocol?"https://in-tags.vizury.com":"http://in-tags.vizury.com")+"/analyze/pixel.php?account_id=vst";var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(e,g);e.onload=function(){try{pixel.parse()}catch(h){}};e.onreadystatechange=function(){if(e.readyState=="complete"||e.readyState=="loaded"){try{pixel.parse()}catch(h){}}}}catch(f){}})()}function set_cartitem_mode(a,b){$("#"+a).val(b)}function show_incomplete_address_popup(a){uiv2_show_popup("uiv2-new-address-form",false);set_new_address_click();init_zipcode_autocomplete("id_contact_area","id_contact_zipcode",$("#id_city").val());init_area_autocomplete("id_contact_area","id_contact_zipcode",$("#id_city").val());if($("#id_contact_area").val()=="Other"){$("#id_contact_area").val("")}$("#id_city").on("change",function(){reset_area_source("id_contact_area","id_contact_zipcode",$(this).val())});phno=$("#contactnum_"+a).val();if(phno&&phno!=-1000000000){$("#id_contact_number").val(phno)}area=$("#addrarea_"+a).val();$("#id_contact_area").val(area);zipcode=$("#postalcode_"+a).val();if(zipcode!=0){$("#id_contact_zipcode").val(zipcode)}city_slug=$("#cityslug_"+a).val();city_id=$("#cityid_"+a).val();$("#id_city option[value='"+city_id+"']").prop("selected",true);$("#id_city").hide();$("#id_city").parent().find("span.uiv2-field-required").before("<input type='text' class='temp-city' value='"+city_slug+"' readonly/>");$("#add_address_detail").val("1");$("#add-address-id").val(a);$("#address-title").html("Update Address");$("#address-button").html("UPDATE ADDRESS")}function reset_address_form(){$("#id_contact_area").val("");$("#id_contact_zipcode").val("");$("#id_city").show();$(".temp-city").remove();$("#add_address_detail").val("0");$("#add-address-id").val("");$("#address-title").html("Add Address");$("#address-button").html("ADD ADDRESS")}String.prototype.capitalize=function(){return this.toLowerCase().replace(/\b\w/g,function(a){return a.toUpperCase()})};var BBUtils={range:function(e,c,d){if(typeof c=="undefined"){c=e;e=0}if(typeof d=="undefined"){d=1}if((d>0&&e>=c)||(d<0&&e<=c)){return[]}var a=[];for(var b=e;d>0?b<c:b>c;b+=d){a.push(b)}return a},chunkify:function(d,c){var b=[];for(var a=0;a<d.length;a+=c){b.push(d.slice(a,a+c))}return b},toInt:function(a){return a>0?Math.floor(a):Math.ceil(a)},join_on:function(d,a,c){if(d&&d.length>a){var b=this.chunkify(d,a);return b.join(c)}return d},column_major_chunks:function(f,b){var e=this.chunkify(f,b);var a=[];for(var d=0;d<e.length;d++){for(var c=0;c<e[d].length;c++){if(!a[c]){a[c]=[]}a[c][d]=e[d][c]}}return a},is_touch_device:function(){return"ontouchstart" in document.documentElement},initLoginButton:function(a){var b=window.location.pathname;var c=a;if(b){c+="?next="+encodeURIComponent(b+window.location.search)}window.location.href=c},ieVersion:(function(){var c,a=3,d=document.createElement("div"),b=d.getElementsByTagName("i");while(d.innerHTML="<!--[if gt IE "+(++a)+"]><i></i><![endif]-->",b[0]){}return a>4?a:c}()),showIEPopupIfApplicable:function(){if(this.ieVersion<9&&!docCookie.hasItem("_bb_ie")){$("#id_browser_support, .uiv2-background-shade").fadeIn("slow");docCookie.setItem("_bb_ie","shown",15552000)}},getObjPropertyName:function(b,a){for(var c in b){if(b.hasOwnProperty(c)&&b[c]===a){return c}}}};Number.prototype.formatMoney=function(e,g,b){var f=this,e=isNaN(e=Math.abs(e))?2:e,b=b==undefined?".":b,g=g==undefined?",":g,a=f<0?"-":"",d=parseInt(f=Math.abs(+f||0).toFixed(e))+"",c=(c=d.length)>3?c%3:0;return a+(c?d.substr(0,c)+g:"")+d.substr(c).replace(/(\d{3})(?=\d)/g,"$1"+g)+(e?b+Math.abs(f-d).toFixed(e).slice(2):"")};function show_store_popup(a){ele_id="store_popup_"+a;if(ele_id){$.ajax({url:"/store/get-store-details/",type:"post",data:{pd_id:a},}).done(function(e){if(e.success){$("#"+ele_id).html(e.store_html)}});var b=$("#store_popup_"+a);uiv2_show_popup(ele_id);var d=$(window).height();var c=$(window).scrollTop();if(!c){c=450}b.css("top",c-320+"px")}}function store_popup_close(a){ele_id="store_popup_"+a;$("#"+ele_id).hide();$(".uiv2-background-shade").hide()}function onZipcodeChange(a){a.pincode="";return a}var apartmentSelected=false;function loadAreaAndZipCodeAutoComplete(f,d,e,h,c,a){$idContactArea=$("#"+f);$idContactZipcode=$("#"+d);$apartmentComplex=$("#"+e);var k=new AutoComplete();k.initializeAutoComplete($idContactZipcode,"remote",{data:{city_id:h,type:"pincode",fields:JSON.stringify(RETURN_FIELDS),limit:SIZE},type:"get",url:USE_NODE?NODE_URL:"/bb/get_zipcode/"},"response.results",["pincode"],["pincode"],[],"",onZipcodeChange);k.render(c,a);var j=new AutoComplete();j.initializeAutoComplete($idContactArea,"remote",{data:{city_id:h,type:"area",fields:JSON.stringify(RETURN_FIELDS),limit:SIZE},type:"get",url:USE_NODE?NODE_URL:"/bb/get_area_for_zipcodes/"},"response.results",["display_name"],["display_name","pincode"]);j.render(c,a);var g=new AutoComplete();g.initializeAutoComplete($apartmentComplex,"remote",{data:{city_id:h,type:"apartment",fields:JSON.stringify(RETURN_FIELDS),limit:SIZE},type:"get",url:USE_NODE?NODE_URL:"/bb/get_area/"},"response.results",["display_name"],["display_name","pincode"],[],"",onZipcodeChange);g.render(1,25);$idContactZipcode.on("focusout",function(){events.emit("remoteDataSourceChange",{data:{city_id:$city}})});$apartmentComplex.on("typeahead:change",function(){apartmentSelected=false});$idContactZipcode.on("typeahead:change",function(m,l){$idContactArea.typeahead("val","").attr("readonly",false).val("");$("#other_area_row").hide();if($renderAgain){$renderAgain=false;j.render(1,20)}});$apartmentComplex.on("typeahead:select typeahead:cursorchange typeahead:autocomplete",function(m,l){if(l.pincode==0||!l.pincode){l.pincode=""}$idContactArea.typeahead("val","").attr("readonly",false).val("");if($renderAgain){$renderAgain=false;j.render(1,20)}$("#other_area_row").hide();$idContactZipcode.val(l.pincode).typeahead("val",l.pincode);events.emit("remoteDataSourceChange",{data:{city_id:$city}});apartmentSelected=true;$idContactArea.val(l.area).typeahead("val",l.area);$("#id_location").val(JSON.stringify(l))});$idContactArea.on("typeahead:select typeahead:cursorchange typeahead:autocomplete",function(m,l){if(l){$("#other_area_row").hide();if(l.other_area){$renderAgain=true;$idContactArea.attr("readonly",false).val(l.display_name);$("#other_area_row").show();return true}if(l.pincode!=0){$idContactZipcode.val(l.pincode).typeahead("val",l.pincode)}}});var b=$("#id_city");$city=h;b.val($city).trigger("change");b.on("change",function(){$city=$("#id_city").val();events.emit("remoteDataSourceChange",{data:{city_id:$city,pincode:""},type:"get",url:"/bb/get_zipcode/"});resetTheAutoSuggest();j.render(c,a)})}function resetTheAutoSuggest(){$idContactZipcode.typeahead("val","");$idContactArea.typeahead("val","").attr("readonly",false).val("");$("#other_area_row").hide();$apartmentComplex.typeahead("val","")}function updateEngagementStore(a,c){if(typeof angular!=="undefined"){var b=angular.element(document.getElementById("engagementStoreMainContainer"));if(b){b.scope().vm.updateEngagementStore(a,c)}}}function updateEngagementStoreFromCart(){if(typeof angular!=="undefined"){var a=angular.element(document.getElementById("engagementStoreMainContainer"));if(a){a.scope().vm.updateEngagementStoreFromCart()}}}String.prototype.replaceAt=function(a,b){return this.substr(0,a)+b+this.substr(a+b.length)};